<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>06 ã€nodejså†…ç½®æ¨¡å—ï¼ˆä¸­ï¼‰ã€‘ | Aismy&#39;Docs</title>
    <meta name="generator" content="VuePress 1.9.2">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="Aismy&#39;Docs">
    <meta name="keywords" content="vuepress,theme,blog,vdoing">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.906cd319.css" as="style"><link rel="preload" href="/assets/js/app.b738e2cf.js" as="script"><link rel="preload" href="/assets/js/2.ffb45a81.js" as="script"><link rel="preload" href="/assets/js/38.e84bf93e.js" as="script"><link rel="prefetch" href="/assets/js/10.c2e0087a.js"><link rel="prefetch" href="/assets/js/11.515afe89.js"><link rel="prefetch" href="/assets/js/12.fab2a176.js"><link rel="prefetch" href="/assets/js/13.001935e7.js"><link rel="prefetch" href="/assets/js/14.b80dbf2e.js"><link rel="prefetch" href="/assets/js/15.1b1059f6.js"><link rel="prefetch" href="/assets/js/16.fcd1537c.js"><link rel="prefetch" href="/assets/js/17.9df6cc33.js"><link rel="prefetch" href="/assets/js/18.bd3b4e60.js"><link rel="prefetch" href="/assets/js/19.c0b3ce9a.js"><link rel="prefetch" href="/assets/js/20.546547fb.js"><link rel="prefetch" href="/assets/js/21.0692e109.js"><link rel="prefetch" href="/assets/js/22.941054f1.js"><link rel="prefetch" href="/assets/js/23.6a79feac.js"><link rel="prefetch" href="/assets/js/24.d7b40265.js"><link rel="prefetch" href="/assets/js/25.2f068444.js"><link rel="prefetch" href="/assets/js/26.39e773a6.js"><link rel="prefetch" href="/assets/js/27.0cc11d71.js"><link rel="prefetch" href="/assets/js/28.6e0bab80.js"><link rel="prefetch" href="/assets/js/29.aa305b1a.js"><link rel="prefetch" href="/assets/js/3.166f9e48.js"><link rel="prefetch" href="/assets/js/30.a9437cbd.js"><link rel="prefetch" href="/assets/js/31.d2300f1b.js"><link rel="prefetch" href="/assets/js/32.30060633.js"><link rel="prefetch" href="/assets/js/33.ddd9f9e8.js"><link rel="prefetch" href="/assets/js/34.102c62c1.js"><link rel="prefetch" href="/assets/js/35.da833d69.js"><link rel="prefetch" href="/assets/js/36.b4b83ef9.js"><link rel="prefetch" href="/assets/js/37.a549e9e3.js"><link rel="prefetch" href="/assets/js/39.145b375f.js"><link rel="prefetch" href="/assets/js/4.2988106a.js"><link rel="prefetch" href="/assets/js/40.246cd152.js"><link rel="prefetch" href="/assets/js/41.530026b3.js"><link rel="prefetch" href="/assets/js/42.24a60b39.js"><link rel="prefetch" href="/assets/js/43.902a7b0b.js"><link rel="prefetch" href="/assets/js/44.4f8c78f2.js"><link rel="prefetch" href="/assets/js/5.58eac4fd.js"><link rel="prefetch" href="/assets/js/6.d50e78bb.js"><link rel="prefetch" href="/assets/js/7.977fe42a.js"><link rel="prefetch" href="/assets/js/8.289b9caf.js"><link rel="prefetch" href="/assets/js/9.6a3fba9d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.906cd319.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="ç›®å½•" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="Aismy'Docs" class="logo"> <span class="site-name can-hide">Aismy'Docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><a href="https://www.aismy.top" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ğŸ“•åšå®¢
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸµJava SE" class="dropdown-title"><a href="/pages/389d93/" class="link-title">ğŸµJava SE</a> <span class="title" style="display:none;">ğŸµJava SE</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/389d93/" class="nav-link">JavaåŸºç¡€</a></li><li class="dropdown-item"><!----> <a href="/pages/aab896/" class="nav-link">é›†åˆ</a></li><li class="dropdown-item"><!----> <a href="/pages/d2a30d/" class="nav-link">IOæµ</a></li><li class="dropdown-item"><!----> <a href="/pages/780f7d/" class="nav-link">æ³¨è§£å’Œåå°„</a></li><li class="dropdown-item"><!----> <a href="/pages/8d2bfc/" class="nav-link">å¹¶å‘ç¼–ç¨‹</a></li><li class="dropdown-item"><!----> <a href="/pages/e9d599/" class="nav-link">JVM</a></li><li class="dropdown-item"><!----> <a href="/pages/467393/" class="nav-link">æ–°ç‰¹æ€§</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸŒ´æ•°æ®åº“" class="dropdown-title"><a href="/pages/142be7/" class="link-title">ğŸŒ´æ•°æ®åº“</a> <span class="title" style="display:none;">ğŸŒ´æ•°æ®åº“</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/142be7/" class="nav-link">Mysql</a></li><li class="dropdown-item"><!----> <a href="/pages/1ce2e2/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/pages/62a615/" class="nav-link">ElasticSearch</a></li></ul></div></div><div class="nav-item"><a href="/pages/1b02d4/" class="nav-link">ğŸš€åç«¯æ¡†æ¶</a></div><div class="nav-item"><a href="/pages/1fe252/" class="nav-link">ğŸš€å‰ç«¯æŠ€æœ¯</a></div><div class="nav-item"><a href="/pages/83c955/" class="nav-link">ğŸ› ï¸å¼€å‘å·¥å…·</a></div> <a href="https://github.com/Aismy/aismy.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><a href="https://www.aismy.top" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ğŸ“•åšå®¢
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸµJava SE" class="dropdown-title"><a href="/pages/389d93/" class="link-title">ğŸµJava SE</a> <span class="title" style="display:none;">ğŸµJava SE</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/389d93/" class="nav-link">JavaåŸºç¡€</a></li><li class="dropdown-item"><!----> <a href="/pages/aab896/" class="nav-link">é›†åˆ</a></li><li class="dropdown-item"><!----> <a href="/pages/d2a30d/" class="nav-link">IOæµ</a></li><li class="dropdown-item"><!----> <a href="/pages/780f7d/" class="nav-link">æ³¨è§£å’Œåå°„</a></li><li class="dropdown-item"><!----> <a href="/pages/8d2bfc/" class="nav-link">å¹¶å‘ç¼–ç¨‹</a></li><li class="dropdown-item"><!----> <a href="/pages/e9d599/" class="nav-link">JVM</a></li><li class="dropdown-item"><!----> <a href="/pages/467393/" class="nav-link">æ–°ç‰¹æ€§</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸŒ´æ•°æ®åº“" class="dropdown-title"><a href="/pages/142be7/" class="link-title">ğŸŒ´æ•°æ®åº“</a> <span class="title" style="display:none;">ğŸŒ´æ•°æ®åº“</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/142be7/" class="nav-link">Mysql</a></li><li class="dropdown-item"><!----> <a href="/pages/1ce2e2/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/pages/62a615/" class="nav-link">ElasticSearch</a></li></ul></div></div><div class="nav-item"><a href="/pages/1b02d4/" class="nav-link">ğŸš€åç«¯æ¡†æ¶</a></div><div class="nav-item"><a href="/pages/1fe252/" class="nav-link">ğŸš€å‰ç«¯æŠ€æœ¯</a></div><div class="nav-item"><a href="/pages/83c955/" class="nav-link">ğŸ› ï¸å¼€å‘å·¥å…·</a></div> <a href="https://github.com/Aismy/aismy.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>node.js</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/1fe252/" class="sidebar-link">ã€nodejsç®€ä»‹ã€‘</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/1fe252/#node-jsæ˜¯ä»€ä¹ˆ" class="sidebar-link">Node.jsæ˜¯ä»€ä¹ˆï¼Ÿ</a></li><li class="sidebar-sub-header level2"><a href="/pages/1fe252/#node-js-çš„åº”ç”¨" class="sidebar-link">Node.js çš„åº”ç”¨</a></li><li class="sidebar-sub-header level2"><a href="/pages/1fe252/#node-js-çš„ç‰¹ç‚¹" class="sidebar-link">Node.js çš„ç‰¹ç‚¹</a></li><li class="sidebar-sub-header level2"><a href="/pages/1fe252/#ä½¿ç”¨-node-js-æ—¶çš„åŠ£åŠ¿" class="sidebar-link">ä½¿ç”¨ Node.js æ—¶çš„åŠ£åŠ¿</a></li></ul></li><li><a href="/pages/ad57db/" class="sidebar-link">ã€nodejså¼€å‘ç¯å¢ƒå®‰è£…ã€‘</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/ad57db/#ç‰ˆæœ¬ä»‹ç»" class="sidebar-link">ç‰ˆæœ¬ä»‹ç»</a></li><li class="sidebar-sub-header level2"><a href="/pages/ad57db/#node-js-è¿è¡Œç¯å¢ƒé…ç½®-é€šè¿‡-node-js-å®‰è£…åŒ…-ä¸æ¨è" class="sidebar-link">Node.js è¿è¡Œç¯å¢ƒé…ç½®ï¼šé€šè¿‡ Node.js å®‰è£…åŒ…ï¼ˆä¸æ¨èï¼‰</a></li><li class="sidebar-sub-header level2"><a href="/pages/ad57db/#node-js-è¿è¡Œç¯å¢ƒå®‰è£…-é€šè¿‡-nvm-æ¨è" class="sidebar-link">Node.js è¿è¡Œç¯å¢ƒå®‰è£…ï¼šé€šè¿‡ NVMï¼ˆæ¨èï¼‰</a></li><li class="sidebar-sub-header level2"><a href="/pages/ad57db/#nvm-çš„å¸¸ç”¨å‘½ä»¤" class="sidebar-link">NVM çš„å¸¸ç”¨å‘½ä»¤</a></li><li class="sidebar-sub-header level2"><a href="/pages/ad57db/#node-js-çš„å¸¸ç”¨å‘½ä»¤" class="sidebar-link">Node.js çš„å¸¸ç”¨å‘½ä»¤</a></li></ul></li><li><a href="/pages/1f0273/" class="sidebar-link">ã€npmçš„ä½¿ç”¨ã€‘</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/1f0273/#åŒ…å’Œnpm" class="sidebar-link">åŒ…å’Œnpm</a></li><li class="sidebar-sub-header level2"><a href="/pages/1f0273/#npm-çš„å¸¸ç”¨å‘½ä»¤" class="sidebar-link">NPM çš„å¸¸ç”¨å‘½ä»¤</a></li><li class="sidebar-sub-header level2"><a href="/pages/1f0273/#é…ç½®-npm-é•œåƒæº" class="sidebar-link">é…ç½® npm é•œåƒæº</a></li><li class="sidebar-sub-header level2"><a href="/pages/1f0273/#ä»€ä¹ˆæ˜¯-npm-è„šæœ¬" class="sidebar-link">ä»€ä¹ˆæ˜¯ npm è„šæœ¬</a></li><li class="sidebar-sub-header level2"><a href="/pages/1f0273/#pnpm" class="sidebar-link">pnpm</a></li><li class="sidebar-sub-header level2"><a href="/pages/1f0273/#npmå‘½ä»¤æ€»ç»“" class="sidebar-link">npmå‘½ä»¤æ€»ç»“</a></li><li class="sidebar-sub-header level2"><a href="/pages/1f0273/#ä½¿ç”¨-nodemon-è‡ªåŠ¨é‡å¯æœåŠ¡" class="sidebar-link">ä½¿ç”¨ nodemon è‡ªåŠ¨é‡å¯æœåŠ¡</a></li></ul></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="é¦–é¡µ" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><span data-v-06225672>å‰ç«¯æŠ€æœ¯</span></li><li data-v-06225672><span data-v-06225672>node.js</span></li></ul> <div class="info" data-v-06225672><div title="ä½œè€…" class="author iconfont icon-touxiang" data-v-06225672><a href="https://www.aismy.top" target="_blank" title="ä½œè€…" class="beLink" data-v-06225672>Aismy</a></div> <div title="åˆ›å»ºæ—¶é—´" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-05-11</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">ç›®å½•</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">06 ã€nodejså†…ç½®æ¨¡å—ï¼ˆä¸­ï¼‰ã€‘<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="_06-ã€nodejså†…ç½®æ¨¡å—-ä¸­-ã€‘"><a href="#_06-ã€nodejså†…ç½®æ¨¡å—-ä¸­-ã€‘" class="header-anchor">#</a> 06 ã€nodejså†…ç½®æ¨¡å—ï¼ˆä¸­ï¼‰ã€‘</h1> <h2 id="_1-è·¯åŠ²å¤„ç†æ¨¡å—-path"><a href="#_1-è·¯åŠ²å¤„ç†æ¨¡å—-path" class="header-anchor">#</a> 1.è·¯åŠ²å¤„ç†æ¨¡å— path</h2> <h3 id="_1-1-æ¨¡å—æ¦‚è§ˆ"><a href="#_1-1-æ¨¡å—æ¦‚è§ˆ" class="header-anchor">#</a> 1.1 æ¨¡å—æ¦‚è§ˆ</h3> <p>åœ¨nodejsä¸­ï¼Œpathæ˜¯ä¸ªä½¿ç”¨é¢‘ç‡å¾ˆé«˜ï¼Œä½†å´è®©äººåˆçˆ±åˆæ¨çš„æ¨¡å—ã€‚éƒ¨åˆ†å› ä¸ºæ–‡æ¡£è¯´çš„ä¸å¤Ÿæ¸…æ™°ï¼Œéƒ¨åˆ†å› ä¸ºæ¥å£çš„å¹³å°å·®å¼‚æ€§ã€‚</p> <p>å°†pathçš„æ¥å£æŒ‰ç…§ç”¨é€”å½’ç±»ï¼Œä»”ç»†ç¢ç£¨ç¢ç£¨ï¼Œä¹Ÿå°±æ²¡é‚£ä¹ˆè´¹è§£äº†ã€‚</p> <h3 id="_1-2-è·å–è·¯å¾„-æ–‡ä»¶å-æ‰©å±•å"><a href="#_1-2-è·å–è·¯å¾„-æ–‡ä»¶å-æ‰©å±•å" class="header-anchor">#</a> 1.2 è·å–è·¯å¾„/æ–‡ä»¶å/æ‰©å±•å</h3> <ul><li>è·å–è·¯å¾„ï¼špath.dirname(filepath)</li> <li>è·å–æ–‡ä»¶åï¼špath.basename(filepath)</li> <li>è·å–æ‰©å±•åï¼špath.extname(filepath)</li></ul> <h4 id="_1-2-1-è·å–æ‰€åœ¨è·¯å¾„"><a href="#_1-2-1-è·å–æ‰€åœ¨è·¯å¾„" class="header-anchor">#</a> 1.2.1 è·å–æ‰€åœ¨è·¯å¾„</h4> <p>ä¾‹å­å¦‚ä¸‹ï¼š</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> filepath <span class="token operator">=</span> <span class="token string">'/tmp/demo/js/test.js'</span><span class="token punctuation">;</span>

<span class="token comment">// è¾“å‡ºï¼š/tmp/demo/js</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">dirname</span><span class="token punctuation">(</span>filepath<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="_1-2-2-è·å–æ–‡ä»¶å"><a href="#_1-2-2-è·å–æ–‡ä»¶å" class="header-anchor">#</a> 1.2.2 è·å–æ–‡ä»¶å</h4> <p>ä¸¥æ ¼æ„ä¹‰ä¸Šæ¥è¯´ï¼Œpath.basename(filepath) åªæ˜¯è¾“å‡ºè·¯å¾„çš„æœ€åä¸€éƒ¨åˆ†ï¼Œå¹¶ä¸ä¼šåˆ¤æ–­æ˜¯å¦æ–‡ä»¶åã€‚</p> <p>ä½†å¤§éƒ¨åˆ†æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥ä½œä¸ºç®€æ˜“çš„â€œè·å–æ–‡ä»¶åâ€œçš„æ–¹æ³•ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// è¾“å‡ºï¼štest.js</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span><span class="token string">'/tmp/demo/js/test.js'</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// è¾“å‡ºï¼štest</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span><span class="token string">'/tmp/demo/js/test/'</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// è¾“å‡ºï¼štest</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span><span class="token string">'/tmp/demo/js/test'</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>å¦‚æœåªæƒ³è·å–æ–‡ä»¶åï¼Œå•ä¸åŒ…æ‹¬æ–‡ä»¶æ‰©å±•å‘¢ï¼Ÿå¯ä»¥ç”¨ä¸Šç¬¬äºŒä¸ªå‚æ•°ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// è¾“å‡ºï¼štest</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span><span class="token string">'/tmp/demo/js/test.js'</span><span class="token punctuation">,</span> <span class="token string">'.js'</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="_1-2-3-è·å–æ–‡ä»¶æ‰©å±•å"><a href="#_1-2-3-è·å–æ–‡ä»¶æ‰©å±•å" class="header-anchor">#</a> 1.2.3 è·å–æ–‡ä»¶æ‰©å±•å</h4> <p>ç®€å•çš„ä¾‹å­å¦‚ä¸‹ï¼š</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> filepath <span class="token operator">=</span> <span class="token string">'/tmp/demo/js/test.js'</span><span class="token punctuation">;</span>

<span class="token comment">// è¾“å‡ºï¼š.js</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span>filepath<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>æ›´è¯¦ç»†çš„è§„åˆ™æ˜¯å¦‚ä¸‹ï¼šï¼ˆå‡è®¾ path.basename(filepath) === B ï¼‰</p> <ul><li>ä»Bçš„æœ€åä¸€ä¸ª<code>.</code>å¼€å§‹æˆªå–ï¼Œç›´åˆ°æœ€åä¸€ä¸ªå­—ç¬¦ã€‚</li> <li>å¦‚æœBä¸­ä¸å­˜åœ¨<code>.</code>ï¼Œæˆ–è€…Bçš„ç¬¬ä¸€ä¸ªå­—ç¬¦å°±æ˜¯<code>.</code>ï¼Œé‚£ä¹ˆè¿”å›ç©ºå­—ç¬¦ä¸²ã€‚</li></ul> <p>ç›´æ¥çœ‹<a href="https://nodejs.org/api/path.html#path_path_extname_path" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>çš„ä¾‹å­</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span><span class="token string">'index.html'</span><span class="token punctuation">)</span>
<span class="token comment">// returns '.html'</span>

path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span><span class="token string">'index.coffee.md'</span><span class="token punctuation">)</span>
<span class="token comment">// returns '.md'</span>

path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span><span class="token string">'index.'</span><span class="token punctuation">)</span>
<span class="token comment">// returns '.'</span>

path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span><span class="token string">'index'</span><span class="token punctuation">)</span>
<span class="token comment">// returns ''</span>

path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span><span class="token string">'.index'</span><span class="token punctuation">)</span>
<span class="token comment">// returns ''</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_1-3-è·¯å¾„ç»„åˆ"><a href="#_1-3-è·¯å¾„ç»„åˆ" class="header-anchor">#</a> 1.3 è·¯å¾„ç»„åˆ</h3> <ul><li>path.join([...paths])</li> <li>path.resolve([...paths])</li></ul> <h4 id="_1-3-1-path-resolve-ç”Ÿæˆå®Œæˆçš„ç»å¯¹è·¯å¾„"><a href="#_1-3-1-path-resolve-ç”Ÿæˆå®Œæˆçš„ç»å¯¹è·¯å¾„" class="header-anchor">#</a> 1.3.1 path.resolve() ç”Ÿæˆå®Œæˆçš„ç»å¯¹è·¯å¾„</h4> <p>è¯­æ³•æ ¼å¼ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>myPaths<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>è§£é‡Šï¼š</p> <ul><li>å°†è·¯å¾„æˆ–è·¯å¾„ç‰‡æ®µçš„åºåˆ—è§£æä¸ºç»å¯¹è·¯å¾„ã€‚</li> <li>è¿”å›çš„è·¯å¾„æ˜¯<strong>ä»å³å¾€å·¦</strong>å¤„ç†ï¼Œåé¢çš„æ¯ä¸ª myPath è¢«ä¾æ¬¡è§£æï¼Œç›´åˆ°æ„é€ å‡ºä¸€ä¸ªå®Œæ•´çš„ç»å¯¹è·¯å¾„ã€‚</li></ul> <blockquote><p>ä½ å¯ä»¥æƒ³è±¡ç°åœ¨ä½ åœ¨shellä¸‹é¢ï¼Œä»å·¦åˆ°å³è¿è¡Œä¸€é<code>cd path</code>å‘½ä»¤ï¼Œæœ€ç»ˆè·å–çš„ç»å¯¹è·¯å¾„/æ–‡ä»¶åï¼Œå°±æ˜¯è¿™ä¸ªæ¥å£æ‰€è¿”å›çš„ç»“æœäº†ã€‚</p></blockquote> <p>ä»£ç ä¸¾ä¾‹ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'/foo1/foo2'</span><span class="token punctuation">,</span> <span class="token string">'dselegent'</span><span class="token punctuation">,</span> <span class="token string">'foo3'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> result1 <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token operator">...</span>arr1<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‰“å°ç»“æœï¼š/foo1/foo2/dselegent/foo3</span>

<span class="token keyword">let</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'/foo1/foo2'</span><span class="token punctuation">,</span> <span class="token string">'/dselegent'</span><span class="token punctuation">,</span> <span class="token string">'foo3'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> result2 <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token operator">...</span>arr2<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‰“å°ç»“æœï¼š/dselegent/foo3</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// å‡è®¾å½“å‰å·¥ä½œè·¯å¾„æ˜¯ /Users/a/Documents/git-code/nodejs-learning-guide/examples/2016.11.08-node-path</span>

<span class="token comment">// è¾“å‡º /Users/a/Documents/git-code/nodejs-learning-guide/examples/2016.11.08-node-path</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>

<span class="token comment">// è¾“å‡º /Users/a/Documents/git-code/nodejs-learning-guide/examples/2016.11.08-node-path</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>

<span class="token comment">// è¾“å‡º /foo/bar/baz</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'/foo/bar'</span><span class="token punctuation">,</span> <span class="token string">'./baz'</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// è¾“å‡º /foo/bar/baz</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'/foo/bar'</span><span class="token punctuation">,</span> <span class="token string">'./baz/'</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// è¾“å‡º /tmp/file</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'/foo/bar'</span><span class="token punctuation">,</span> <span class="token string">'/tmp/file/'</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// è¾“å‡º /Users/a/Documents/git-code/nodejs-learning-guide/examples/2016.11.08-node-path/www/js/mod.js</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'www'</span><span class="token punctuation">,</span> <span class="token string">'js/upload'</span><span class="token punctuation">,</span> <span class="token string">'../mod.js'</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h4 id="_1-3-2-path-join-å°†å¤šä¸ªè·¯å¾„è¿›è¡Œæ‹¼æ¥"><a href="#_1-3-2-path-join-å°†å¤šä¸ªè·¯å¾„è¿›è¡Œæ‹¼æ¥" class="header-anchor">#</a> 1.3.2 path.join() å°†å¤šä¸ªè·¯å¾„è¿›è¡Œæ‹¼æ¥</h4> <p>å¦‚æœæ˜¯æˆ‘ä»¬æ‰‹åŠ¨æ‹¼æ¥è·¯å¾„ï¼Œå®¹æ˜“å‡ºé”™ã€‚è¿™ä¸ªæ—¶å€™ï¼Œå¯ä»¥åˆ©ç”¨ path.join() æ–¹æ³•å°†è·¯å¾„è¿›è¡Œæ‹¼æ¥ã€‚</p> <p>è¯­æ³•æ ¼å¼ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>paths<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>è§£é‡Šï¼šä½¿ç”¨å¹³å°ç‰¹å®šçš„åˆ†éš”ç¬¦ä½œä¸ºå®šç•Œç¬¦å°†æ‰€æœ‰ç»™å®šçš„ path ç‰‡æ®µè¿æ¥åœ¨ä¸€èµ·ï¼Œç„¶åè§„èŒƒåŒ–ç”Ÿæˆçš„è·¯å¾„ã€‚</p> <p>ä»£ç ä¸¾ä¾‹ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> result1 <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./app.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¿”å›ï¼š/Users/smyhvae/dselegent/app.js</span>

<span class="token keyword">const</span> result2 <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'/foo1'</span><span class="token punctuation">,</span> <span class="token string">'foo2'</span><span class="token punctuation">,</span> <span class="token string">'./foo3'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¿”å›ï¼š/foo1/foo2/foo3</span>

<span class="token keyword">const</span> result3 <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'/foo1'</span><span class="token punctuation">,</span> <span class="token string">'foo2'</span><span class="token punctuation">,</span> <span class="token string">'/foo3'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result3<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¿”å›ï¼š/foo1/foo2/foo3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="_1-3-3-path-resolve-å’Œ-path-join-åŒºåˆ«"><a href="#_1-3-3-path-resolve-å’Œ-path-join-åŒºåˆ«" class="header-anchor">#</a> 1.3.3 path.resolve å’Œ path.join åŒºåˆ«</h4> <p>path.resolve å’Œ path.join éƒ½æ˜¯å±äº path æ ¸å¿ƒæ¨¡å—ä¸‹çš„æ–¹æ³•ï¼Œç”¨æ¥æ‹¼æ¥è·¯å¾„ã€‚</p> <p>éƒ½å¯ä»¥æ‹¼æ¥æˆä¸€ä¸ªå®Œæ•´è·¯å¾„.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> dirname <span class="token operator">=</span> <span class="token string">'/User/Desktop'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> basename <span class="token operator">=</span> <span class="token string">'abc.txt'</span><span class="token punctuation">;</span>

path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>dirname<span class="token punctuation">,</span> basename<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// /User/Desktop/abc.txt</span>

path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>dirname<span class="token punctuation">,</span> basename<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// /User/Desktop/abc.txt</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>å¦‚æœ dirname æ˜¯ä»¥ ./ ã€../ã€ä¸åŠ  / å¼€å¤´çš„è¯ï¼Œé‚£ä¹ˆ resolve ä¼šæ‰¾åˆ°ç£ç›˜ä¸‹çš„æ ¹ç›®å½•</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token keyword">var</span> dirname <span class="token operator">=</span> <span class="token string">'../User/Desktop'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> basename <span class="token operator">=</span> <span class="token string">'abc.txt'</span><span class="token punctuation">;</span>
 
path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>dirname<span class="token punctuation">,</span> basename<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ../User/Desktop/abc.txt</span>
 
path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>dirname<span class="token punctuation">,</span> basename<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// /Users/Desktop/node/User/Desktop/abc.txt</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>å¦‚æœ basename æ˜¯ä»¥ / å¼€å¤´çš„ï¼Œé‚£ä¹ˆ resolve å°±ä¼šç›´æ¥è¿”å› basename</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token keyword">var</span> dirname <span class="token operator">=</span> <span class="token string">'/User/Desktop'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> basename <span class="token operator">=</span> <span class="token string">'/abc.txt'</span><span class="token punctuation">;</span>
 
path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>dirname<span class="token punctuation">,</span> basename<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// /User/Desktop/abc.txt</span>
 
path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>dirname<span class="token punctuation">,</span> basename<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// /abc.txt</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_1-4-å‡ ä¸ªå¸¸è§è·¯å¾„"><a href="#_1-4-å‡ ä¸ªå¸¸è§è·¯å¾„" class="header-anchor">#</a> 1.4 å‡ ä¸ªå¸¸è§è·¯å¾„</h3> <ul><li><code>__dirname</code>ï¼šè¿™æ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œè¡¨ç¤ºï¼šå½“å‰æ‰§è¡Œæ–‡ä»¶æ‰€åœ¨<strong>å®Œæ•´ç›®å½•</strong>ã€‚</li> <li><code>__filename</code>ï¼šè¿™æ˜¯ä¸€ä¸ªå¸¸é‡ã€‚è¡¨ç¤ºï¼šå½“å‰æ‰§è¡Œæ–‡ä»¶çš„<strong>å®Œæ•´ç›®å½• + æ–‡ä»¶å</strong>ã€‚</li> <li><code>process.cwd</code>ï¼šè·å–å½“å‰æ‰§è¡Œ Nodeå‘½ä»¤ æ—¶çš„ç›®å½•åã€‚</li></ul> <p>ä»£ç ä¸¾ä¾‹ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>__filename<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>è¿è¡Œç»“æœï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">node</span> app.js

/Users/smyhvae/dselegent
/Users/smyhvae/dselegent/app.js
/Users/smyhvae/dselegent
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_2-æœ¬åœ°æ–‡ä»¶æ“ä½œæ¨¡å—-fs"><a href="#_2-æœ¬åœ°æ–‡ä»¶æ“ä½œæ¨¡å—-fs" class="header-anchor">#</a> 2.æœ¬åœ°æ–‡ä»¶æ“ä½œæ¨¡å— fs</h2> <blockquote><h3 id="node-js-ä¸­çš„åŒæ­¥å’Œå¼‚æ­¥çš„åŒºåˆ«"><a href="#node-js-ä¸­çš„åŒæ­¥å’Œå¼‚æ­¥çš„åŒºåˆ«" class="header-anchor">#</a> Node.js ä¸­çš„åŒæ­¥å’Œå¼‚æ­¥çš„åŒºåˆ«</h3> <p>fsæ¨¡å—å¯¹æ–‡ä»¶çš„å‡ ä¹æ‰€æœ‰æ“ä½œéƒ½æœ‰åŒæ­¥å’Œå¼‚æ­¥ä¸¤ç§å½¢å¼ã€‚ä¾‹å¦‚ï¼šreadFile() å’Œ readFileSync()ã€‚</p> <p>åŒºåˆ«ï¼š</p> <ul><li>åŒæ­¥è°ƒç”¨ä¼šé˜»å¡ä»£ç çš„æ‰§è¡Œï¼Œå¼‚æ­¥åˆ™ä¸ä¼šã€‚</li> <li>å¼‚æ­¥è°ƒç”¨ä¼šå°† è¯»å–ä»»åŠ¡ ä¸‹è¾¾åˆ°ä»»åŠ¡é˜Ÿåˆ—ï¼Œç›´åˆ°ä»»åŠ¡æ‰§è¡Œå®Œæˆæ‰ä¼šå›è°ƒã€‚</li> <li>å¼‚å¸¸å¤„ç†æ–¹é¢ï¼šåŒæ­¥å¿…é¡»ä½¿ç”¨ try catch æ–¹å¼ï¼Œå¼‚æ­¥å¯ä»¥é€šè¿‡å›è°ƒå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚ã€é‡è¦ã€‘</li></ul></blockquote> <h3 id="_2-1-æ–‡ä»¶è¯»å–"><a href="#_2-1-æ–‡ä»¶è¯»å–" class="header-anchor">#</a> 2.1 æ–‡ä»¶è¯»å–</h3> <p><strong>åŒæ­¥è¯»å–</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> data<span class="token punctuation">;</span>

<span class="token keyword">try</span><span class="token punctuation">{</span>
    data <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'./fileForRead.txt'</span><span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æ–‡ä»¶å†…å®¹: '</span> <span class="token operator">+</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'è¯»å–æ–‡ä»¶å‡ºé”™: '</span> <span class="token operator">+</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>è¾“å‡ºå¦‚ä¸‹ï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>/usr/local/bin/node readFileSync.js
æ–‡ä»¶å†…å®¹: hello world
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>å¼‚æ­¥è¯»å–</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./fileForRead.txt'</span><span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'è¯»å–æ–‡ä»¶å‡ºé”™: '</span> <span class="token operator">+</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æ–‡ä»¶å†…å®¹: '</span> <span class="token operator">+</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>è¾“å‡ºå¦‚ä¸‹</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>/usr/local/bin/node readFile.js
æ–‡ä»¶å†…å®¹: hello world
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p><strong>fs/promises ä» Node.js 14 å¼€å§‹å¯ç”¨</strong>
ä» Node.js 14 å¼€å§‹ï¼Œfs æ¨¡å—æä¾›äº†ä¸¤ç§ä½¿ç”¨åŸºäº promises çš„æ–‡ä»¶ç³»ç»Ÿçš„æ–¹æ³•ã€‚è¿™äº› promises å¯ä»¥é€šè¿‡ <code>require('fs').promises</code> æˆ– <code>require('fs/promises')</code>è·å¾—ã€‚</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> readFile <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'fs/promises'</span><span class="token punctuation">;</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> contents <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">readFile</span><span class="token punctuation">(</span>filePath<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">encoding</span><span class="token operator">:</span> <span class="token string">'utf8'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>contents<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_2-2-æ–‡ä»¶å†™å…¥"><a href="#_2-2-æ–‡ä»¶å†™å…¥" class="header-anchor">#</a> 2.2 æ–‡ä»¶å†™å…¥</h3> <p>å¤‡æ³¨ï¼šä»¥ä¸‹ä»£ç ï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºæ–‡ä»¶ï¼›å¦‚æœæ–‡ä»¶å­˜åœ¨ï¼Œåˆ™è¦†ç›–æ–‡ä»¶å†…å®¹ï¼›</p> <p><strong>å¼‚æ­¥å†™å…¥</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">'./fileForWrite.txt'</span><span class="token punctuation">,</span> <span class="token string">'hello world'</span><span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æ–‡ä»¶å†™å…¥æˆåŠŸ'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>åŒæ­¥å†™å…¥</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">try</span><span class="token punctuation">{</span>
    fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span><span class="token string">'./fileForWrite1.txt'</span><span class="token punctuation">,</span> <span class="token string">'hello world'</span><span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æ–‡ä»¶å†™å…¥æˆåŠŸ'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">throw</span> err<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>promises</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> writeFile <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'fs/promises'</span><span class="token punctuation">;</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> contents <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">'message.txt'</span><span class="token punctuation">,</span> <span class="token string">'hello world'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">encoding</span><span class="token operator">:</span> <span class="token string">'utf8'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>contents<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// When a request is aborted - err is an AbortError</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_2-3-æ–‡ä»¶æ˜¯å¦å­˜åœ¨"><a href="#_2-3-æ–‡ä»¶æ˜¯å¦å­˜åœ¨" class="header-anchor">#</a> 2.3 æ–‡ä»¶æ˜¯å¦å­˜åœ¨</h3> <p><code>fs.exists()</code>å·²ç»æ˜¯<code>deprecated</code>çŠ¶æ€ï¼Œç°åœ¨å¯ä»¥é€šè¿‡ä¸‹é¢ä»£ç åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨ã€‚</p> <p><strong>å¼‚æ­¥æœ¬</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>

<span class="token comment">//æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨äºå½“å‰ç›®å½•ä¸­</span>
fs<span class="token punctuation">.</span><span class="token function">access</span><span class="token punctuation">(</span><span class="token string">'package.json'</span><span class="token punctuation">,</span> fs<span class="token punctuation">.</span>constants<span class="token punctuation">.</span><span class="token constant">F_OK</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'package.jsonä¸å­˜åœ¨äºå½“å‰ç›®å½•ä¸­'</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'package.jsonå­˜åœ¨äºå½“å‰ç›®å½•ä¸­'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

fs<span class="token punctuation">.</span><span class="token function">access</span><span class="token punctuation">(</span><span class="token string">'index.js'</span><span class="token punctuation">,</span> fs<span class="token punctuation">.</span>constants<span class="token punctuation">.</span><span class="token constant">F_OK</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'index.jsä¸å­˜åœ¨äºå½“å‰ç›®å½•ä¸­'</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'index.jså­˜åœ¨äºå½“å‰ç›®å½•ä¸­'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><code>fs.access()</code>é™¤äº†åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼ˆé»˜è®¤æ¨¡å¼ï¼‰ï¼Œè¿˜å¯ä»¥ç”¨æ¥åˆ¤æ–­æ–‡ä»¶çš„æƒé™ã€‚</p> <p>å¤‡å¿˜ï¼š<code>fs.constants.F_OK</code>ç­‰å¸¸é‡æ— æ³•è·å–ï¼ˆnode v6.1ï¼Œmac 10.11.4ä¸‹ï¼Œ<code>fs.constants</code>æ˜¯<code>undefined</code>ï¼‰</p> <p><strong>åŒæ­¥</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> accessSync<span class="token punctuation">,</span> constants <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'fs'</span><span class="token punctuation">;</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token function">accessSync</span><span class="token punctuation">(</span><span class="token string">'etc/passwd'</span><span class="token punctuation">,</span> constants<span class="token punctuation">.</span><span class="token constant">R_OK</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'can read'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'no access!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>promises</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> access<span class="token punctuation">,</span> constants <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'node:fs/promises'</span><span class="token punctuation">;</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">access</span><span class="token punctuation">(</span><span class="token string">'/etc/passwd'</span><span class="token punctuation">,</span> constants<span class="token punctuation">.</span><span class="token constant">R_OK</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'can access'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'cannot access'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_2-4-åˆ é™¤æ–‡ä»¶"><a href="#_2-4-åˆ é™¤æ–‡ä»¶" class="header-anchor">#</a> 2.4 åˆ é™¤æ–‡ä»¶</h3> <p><strong>å¼‚æ­¥ç‰ˆæœ¬</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

fs<span class="token punctuation">.</span><span class="token function">unlink</span><span class="token punctuation">(</span><span class="token string">'./fileForUnlink.txt'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æ–‡ä»¶åˆ é™¤æˆåŠŸ'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>åŒæ­¥ç‰ˆæœ¬</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> unlinkSync <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'fs'</span><span class="token punctuation">;</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token function">unlinkSync</span><span class="token punctuation">(</span><span class="token string">'/tmp/hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'successfully deleted /tmp/hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// handle the error</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>promises</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> unlink <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'fs/promises'</span><span class="token punctuation">;</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">unlink</span><span class="token punctuation">(</span><span class="token string">'/tmp/hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'successfully deleted /tmp/hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// handle the error</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_2-5-åˆ›å»ºç›®å½•"><a href="#_2-5-åˆ›å»ºç›®å½•" class="header-anchor">#</a> 2.5 åˆ›å»ºç›®å½•</h3> <p><strong>å¼‚æ­¥ç‰ˆæœ¬</strong>ï¼ˆå¦‚æœç›®å½•å·²å­˜åœ¨ï¼Œä¼šæŠ¥é”™ï¼‰</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// fs.mkdir(path[, mode], callback)</span>
<span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

fs<span class="token punctuation">.</span><span class="token function">mkdir</span><span class="token punctuation">(</span><span class="token string">'sub'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'åˆ›å»ºç›®å½•æˆåŠŸ'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>åŒæ­¥ç‰ˆæœ¬</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// fs.mkdirSync(path[, mode])</span>
<span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">try</span><span class="token punctuation">{</span>
    fs<span class="token punctuation">.</span><span class="token function">mkdirSync</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'åˆ›å»ºç›®å½•æˆåŠŸ'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">throw</span> e<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>promises</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> mkdir <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'fs/promises'</span><span class="token punctuation">;</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> createDir <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">mkdir</span><span class="token punctuation">(</span>projectFolder<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">recursive</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">created </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>createDir<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_2-6-éå†ç›®å½•"><a href="#_2-6-éå†ç›®å½•" class="header-anchor">#</a> 2.6 éå†ç›®å½•</h3> <p>åŒæ­¥ç‰ˆæœ¬ï¼Œæ³¨æ„ï¼š<code>fs.readdirSync()</code>åªä¼šè¯»ä¸€å±‚ï¼Œæ‰€ä»¥éœ€è¦åˆ¤æ–­æ–‡ä»¶ç±»å‹æ˜¯å¦ç›®å½•ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿›è¡Œé€’å½’éå†ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// fs.readdirSync(path[, options])</span>

<span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> <span class="token function-variable function">getFilesInDir</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">dir</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token keyword">var</span> results <span class="token operator">=</span> <span class="token punctuation">[</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>dir<span class="token punctuation">)</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> files <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readdirSync</span><span class="token punctuation">(</span>dir<span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    files<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

        file <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>dir<span class="token punctuation">,</span> file<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">var</span> stats <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">statSync</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>stats<span class="token punctuation">.</span><span class="token function">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            results<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>stats<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            results <span class="token operator">=</span> results<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span> <span class="token function">getFilesInDir</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> results<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> files <span class="token operator">=</span> <span class="token function">getFilesInDir</span><span class="token punctuation">(</span><span class="token string">'../'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>files<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h3 id="_2-7-è¯»å–ç›®å½•"><a href="#_2-7-è¯»å–ç›®å½•" class="header-anchor">#</a> 2.7 è¯»å–ç›®å½•</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> readdir <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'fs/promises'</span><span class="token punctuation">;</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> files <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">readdir</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> file <span class="token keyword">of</span> files<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_2-8-åˆ é™¤ç›®å½•"><a href="#_2-8-åˆ é™¤ç›®å½•" class="header-anchor">#</a> 2.8 åˆ é™¤ç›®å½•</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// åˆ é™¤ç›®å½•(å‰ææ²¡æœ‰æ–‡ä»¶åœ¨é‡Œé¢)</span>
fs<span class="token punctuation">.</span><span class="token function">rmdir</span><span class="token punctuation">(</span><span class="token string">'./avatar'</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err <span class="token operator">&amp;&amp;</span> err<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token string">'ENOENT'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ç›®å½•ä¸å­˜åœ¨'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_2-9-åˆ é™¤æ•´ä¸ªç›®å½•"><a href="#_2-9-åˆ é™¤æ•´ä¸ªç›®å½•" class="header-anchor">#</a> 2.9 åˆ é™¤æ•´ä¸ªç›®å½•</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//1</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span>
fs<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token string">&quot;./avatar&quot;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">// console.log(data)</span>
    data<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        fs<span class="token punctuation">.</span><span class="token function">unlinkSync</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./avatar/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    fs<span class="token punctuation">.</span><span class="token function">rmdir</span><span class="token punctuation">(</span><span class="token string">&quot;./avatar&quot;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//2</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>
fs<span class="token punctuation">.</span><span class="token function">readdir</span><span class="token punctuation">(</span><span class="token string">&quot;./avatar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    data<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">unlink</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./avatar/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>
    fs<span class="token punctuation">.</span><span class="token function">rmdir</span><span class="token punctuation">(</span><span class="token string">&quot;./avatar&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//3</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>promises<span class="token punctuation">;</span>
fs<span class="token punctuation">.</span><span class="token function">readdir</span><span class="token punctuation">(</span><span class="token string">'./image2'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> fs<span class="token punctuation">.</span><span class="token function">unlink</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./image2/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> fs<span class="token punctuation">.</span><span class="token function">rmdir</span><span class="token punctuation">(</span><span class="token string">'./image2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h3 id="_2-10-æ–‡ä»¶é‡å‘½å"><a href="#_2-10-æ–‡ä»¶é‡å‘½å" class="header-anchor">#</a> 2.10 æ–‡ä»¶é‡å‘½å</h3> <p><strong>å¼‚æ­¥ç‰ˆæœ¬</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// fs.rename(oldPath, newPath, callback)</span>
<span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

fs<span class="token punctuation">.</span><span class="token function">rename</span><span class="token punctuation">(</span><span class="token string">'./hello'</span><span class="token punctuation">,</span> <span class="token string">'./world'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'é‡å‘½åæˆåŠŸ'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>åŒæ­¥ç‰ˆæœ¬</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// fs.renameSync(oldPath, newPath)</span>
<span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

fs<span class="token punctuation">.</span><span class="token function">renameSync</span><span class="token punctuation">(</span><span class="token string">'./world'</span><span class="token punctuation">,</span> <span class="token string">'./hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>promises</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> rename <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'fs/promises'</span><span class="token punctuation">;</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">rename</span><span class="token punctuation">(</span><span class="token string">'./world'</span><span class="token punctuation">,</span> <span class="token string">'./hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">rename</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_2-11-è·å–æ–‡ä»¶çŠ¶æ€"><a href="#_2-11-è·å–æ–‡ä»¶çŠ¶æ€" class="header-anchor">#</a> 2.11 è·å–æ–‡ä»¶çŠ¶æ€</h3> <p>1.å¼‚æ­¥ï¼šfs.stat(path,callback):
pathæ˜¯ä¸€ä¸ªè¡¨ç¤ºè·¯å¾„çš„å­—ç¬¦ä¸²,callbackæ¥æ”¶ä¸¤ä¸ªå‚æ•°(err,stats),å…¶ä¸­statså°±æ˜¯fs.statsçš„ä¸€ä¸ªå®ä¾‹ï¼›</p> <p>2.åŒæ­¥ï¼šfs.statSync(path)
åªæ¥æ”¶ä¸€ä¸ªpathå˜é‡ï¼Œfs.statSync(path)å…¶å®æ˜¯ä¸€ä¸ªfs.statsçš„ä¸€ä¸ªå®ä¾‹ï¼›</p> <p>æ–¹æ³•</p> <ul><li>stats.isFile() -- æ˜¯å¦æ–‡ä»¶</li> <li>stats.isDirectory() -- æ˜¯å¦ç›®å½•</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Node.js program to demonstrate the </span>
<span class="token comment">// fs.statSync() method </span>
  
<span class="token comment">// Import the filesystem module </span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  
<span class="token comment">// Getting information for a file </span>
statsObj <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">statSync</span><span class="token punctuation">(</span><span class="token string">&quot;test_file.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>statsObj<span class="token punctuation">)</span><span class="token punctuation">;</span>  
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Path is file:&quot;</span><span class="token punctuation">,</span> statsObj<span class="token punctuation">.</span><span class="token function">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Path is directory:&quot;</span><span class="token punctuation">,</span> statsObj<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  
<span class="token comment">// Getting information for a directory </span>
statsObj <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">statSync</span><span class="token punctuation">(</span><span class="token string">&quot;test_directory&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>statsObj<span class="token punctuation">)</span><span class="token punctuation">;</span> 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Path is file:&quot;</span><span class="token punctuation">,</span> statsObj<span class="token punctuation">.</span><span class="token function">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Path is directory:&quot;</span><span class="token punctuation">,</span> statsObj<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>è¾“å‡ºï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>Stats <span class="token punctuation">{</span>
  <span class="token literal-property property">dev</span><span class="token operator">:</span><span class="token number">3229478529</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span><span class="token number">33206</span><span class="token punctuation">,</span>
  <span class="token literal-property property">nlink</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token literal-property property">uid</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token literal-property property">gid</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token literal-property property">rdev</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token literal-property property">blksize</span><span class="token operator">:</span><span class="token number">4096</span><span class="token punctuation">,</span>
  <span class="token literal-property property">ino</span><span class="token operator">:</span><span class="token number">1970324837039946</span><span class="token punctuation">,</span>
  <span class="token literal-property property">size</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token literal-property property">blocks</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token literal-property property">atimeMs</span><span class="token operator">:</span><span class="token number">1582306776282</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mtimeMs</span><span class="token operator">:</span><span class="token number">1582482953967</span><span class="token punctuation">,</span>
  <span class="token literal-property property">ctimeMs</span><span class="token operator">:</span><span class="token number">1582482953968.2532</span><span class="token punctuation">,</span>
  <span class="token literal-property property">birthtimeMs</span><span class="token operator">:</span><span class="token number">1582306776282.142</span><span class="token punctuation">,</span>
  <span class="token literal-property property">atime</span><span class="token operator">:</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span>21T17<span class="token operator">:</span><span class="token number">39</span><span class="token operator">:</span><span class="token number">36</span><span class="token punctuation">.</span>282Z<span class="token punctuation">,</span>
  <span class="token literal-property property">mtime</span><span class="token operator">:</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span>23T18<span class="token operator">:</span><span class="token number">35</span><span class="token operator">:</span><span class="token number">53</span><span class="token punctuation">.</span>967Z<span class="token punctuation">,</span>
  <span class="token literal-property property">ctime</span><span class="token operator">:</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span>23T18<span class="token operator">:</span><span class="token number">35</span><span class="token operator">:</span><span class="token number">53</span><span class="token punctuation">.</span>968Z<span class="token punctuation">,</span>
  <span class="token literal-property property">birthtime</span><span class="token operator">:</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span>21T17<span class="token operator">:</span><span class="token number">39</span><span class="token operator">:</span><span class="token number">36</span><span class="token punctuation">.</span>282Z
<span class="token punctuation">}</span>
Path is file<span class="token operator">:</span><span class="token boolean">true</span>
Path is directory<span class="token operator">:</span><span class="token boolean">false</span>
Stats <span class="token punctuation">{</span>
  <span class="token literal-property property">dev</span><span class="token operator">:</span><span class="token number">3229478529</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span><span class="token number">16822</span><span class="token punctuation">,</span>
  <span class="token literal-property property">nlink</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token literal-property property">uid</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token literal-property property">gid</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token literal-property property">rdev</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token literal-property property">blksize</span><span class="token operator">:</span><span class="token number">4096</span><span class="token punctuation">,</span>
  <span class="token literal-property property">ino</span><span class="token operator">:</span><span class="token number">562949953486669</span><span class="token punctuation">,</span>
  <span class="token literal-property property">size</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token literal-property property">blocks</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token literal-property property">atimeMs</span><span class="token operator">:</span><span class="token number">1582482965037.8445</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mtimeMs</span><span class="token operator">:</span><span class="token number">1581074249467.7114</span><span class="token punctuation">,</span>
  <span class="token literal-property property">ctimeMs</span><span class="token operator">:</span><span class="token number">1582482964979.8303</span><span class="token punctuation">,</span>
  <span class="token literal-property property">birthtimeMs</span><span class="token operator">:</span><span class="token number">1582306776288.1958</span><span class="token punctuation">,</span>
  <span class="token literal-property property">atime</span><span class="token operator">:</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span>23T18<span class="token operator">:</span><span class="token number">36</span><span class="token operator">:</span><span class="token number">05</span><span class="token punctuation">.</span>038Z<span class="token punctuation">,</span>
  <span class="token literal-property property">mtime</span><span class="token operator">:</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span>07T11<span class="token operator">:</span><span class="token number">17</span><span class="token operator">:</span><span class="token number">29</span><span class="token punctuation">.</span>468Z<span class="token punctuation">,</span>
  <span class="token literal-property property">ctime</span><span class="token operator">:</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span>23T18<span class="token operator">:</span><span class="token number">36</span><span class="token operator">:</span><span class="token number">04</span><span class="token punctuation">.</span>980Z<span class="token punctuation">,</span>
  <span class="token literal-property property">birthtime</span><span class="token operator">:</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span>21T17<span class="token operator">:</span><span class="token number">39</span><span class="token operator">:</span><span class="token number">36</span><span class="token punctuation">.</span>288Z
<span class="token punctuation">}</span>
Path is file<span class="token operator">:</span><span class="token boolean">false</span>
Path is directory<span class="token operator">:</span><span class="token boolean">true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><h3 id="_2-12-è¿½åŠ æ–‡ä»¶å†…å®¹"><a href="#_2-12-è¿½åŠ æ–‡ä»¶å†…å®¹" class="header-anchor">#</a> 2.12 è¿½åŠ æ–‡ä»¶å†…å®¹</h3> <blockquote><p>fs.appendFile(file, data[, options], callback)</p></blockquote> <ul><li>fileï¼šå¯ä»¥æ˜¯æ–‡ä»¶è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯æ–‡ä»¶å¥æŸ„ã€‚ï¼ˆè¿˜å¯ä»¥æ˜¯bufferï¼Ÿï¼‰</li> <li>dataï¼šè¦è¿½åŠ çš„å†…å®¹ã€‚stringæˆ–è€…bufferã€‚</li> <li>options
<ul><li>encodingï¼šç¼–ç ï¼Œé»˜è®¤æ˜¯<code>utf8</code></li> <li>modeï¼šé»˜è®¤æ˜¯<code>0o666</code></li> <li>flagï¼šé»˜è®¤æ˜¯<code>a</code></li></ul></li></ul> <p>æ³¨æ„ï¼šå¦‚æœ<code>file</code>æ˜¯æ–‡ä»¶å¥æŸ„ï¼Œé‚£ä¹ˆ</p> <ul><li>å¼€å§‹è¿½åŠ æ•°æ®å‰ï¼Œfileéœ€è¦å·²ç»æ‰“å¼€ã€‚</li> <li>fileéœ€è¦æ‰‹åŠ¨å…³é—­ã€‚</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

fs<span class="token punctuation">.</span><span class="token function">appendFile</span><span class="token punctuation">(</span><span class="token string">'./extra/fileForAppend.txt'</span><span class="token punctuation">,</span> <span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'appendæˆåŠŸ'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_3-äº‹ä»¶æœºåˆ¶æ¨¡å—-events"><a href="#_3-äº‹ä»¶æœºåˆ¶æ¨¡å—-events" class="header-anchor">#</a> 3.äº‹ä»¶æœºåˆ¶æ¨¡å— events</h2> <p>Node.js æœ‰å¤šä¸ªå†…ç½®çš„äº‹ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¼•å…¥ events æ¨¡å—ï¼Œå¹¶é€šè¿‡å®ä¾‹åŒ– EventEmitter ç±»æ¥ç»‘å®šå’Œç›‘å¬äº‹ä»¶ï¼Œå¦‚ä¸‹å®ä¾‹ï¼š</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// å¼•å…¥ events æ¨¡å—</span>
<span class="token keyword">var</span> EventEmitter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'events'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// åˆ›å»º eventEmitter å¯¹è±¡</span>
<span class="token keyword">var</span> event <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventEmitter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>ä»¥ä¸‹ç¨‹åºç»‘å®šäº‹ä»¶å¤„ç†ç¨‹åºï¼š</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ç»‘å®šäº‹ä»¶åŠäº‹ä»¶çš„å¤„ç†ç¨‹åº</span>
eventEmitter<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'eventName'</span><span class="token punctuation">,</span> eventHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ç¨‹åºè§¦å‘äº‹ä»¶ï¼š</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// è§¦å‘äº‹ä»¶</span>
eventEmitter<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'eventName'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>EventEmitter</code>çš„æ¯ä¸ªäº‹ä»¶ç”±ä¸€ä¸ªäº‹ä»¶åå’Œè‹¥å¹²ä¸ªå‚æ•°ç»„æˆï¼Œäº‹ä»¶åæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé€šå¸¸è¡¨è¾¾ä¸€å®šçš„è¯­ä¹‰ã€‚å¯¹äºæ¯ä¸ªäº‹ä»¶ï¼Œ<code>EventEmitter</code>æ”¯æŒ è‹¥å¹²ä¸ªäº‹ä»¶ç›‘å¬å™¨ã€‚</p> <p>å½“äº‹ä»¶è§¦å‘æ—¶ï¼Œæ³¨å†Œåˆ°è¿™ä¸ªäº‹ä»¶çš„äº‹ä»¶ç›‘å¬å™¨è¢«ä¾æ¬¡è°ƒç”¨ï¼Œäº‹ä»¶å‚æ•°ä½œä¸ºå›è°ƒå‡½æ•°å‚æ•°ä¼ é€’ã€‚</p> <p>è®©æˆ‘ä»¬ä»¥ä¸‹é¢çš„ä¾‹å­è§£é‡Šè¿™ä¸ªè¿‡ç¨‹ï¼š</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// å¼•å…¥ events æ¨¡å—</span>
<span class="token keyword">var</span> EventEmitter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'events'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// åˆ›å»º eventEmitter å¯¹è±¡</span>
<span class="token keyword">var</span> event <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventEmitter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
event<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'someEvent'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">arg1<span class="token punctuation">,</span> arg2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'listener1'</span><span class="token punctuation">,</span> arg1<span class="token punctuation">,</span> arg2<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
event<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'someEvent'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">arg1<span class="token punctuation">,</span> arg2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'listener2'</span><span class="token punctuation">,</span> arg1<span class="token punctuation">,</span> arg2<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
event<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'someEvent'</span><span class="token punctuation">,</span> <span class="token string">'arg1 å‚æ•°'</span><span class="token punctuation">,</span> <span class="token string">'arg2 å‚æ•°'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>æ‰§è¡Œä»¥ä¸Šä»£ç ï¼Œè¿è¡Œçš„ç»“æœå¦‚ä¸‹ï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">node</span> event.js 
listener1 arg1 å‚æ•° arg2 å‚æ•°
listener2 arg1 å‚æ•° arg2 å‚æ•°
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ä»¥ä¸Šä¾‹å­ä¸­ï¼Œevent ä¸ºäº‹ä»¶ someEvent æ³¨å†Œäº†ä¸¤ä¸ªäº‹ä»¶ç›‘å¬å™¨ï¼Œç„¶åè§¦å‘äº† someEvent äº‹ä»¶ã€‚</p> <p>è¿è¡Œç»“æœä¸­å¯ä»¥çœ‹åˆ°ä¸¤ä¸ªäº‹ä»¶ç›‘å¬å™¨å›è°ƒå‡½æ•°è¢«å…ˆåè°ƒç”¨ã€‚ è¿™å°±æ˜¯<code>EventEmitter</code>æœ€ç®€å•çš„ç”¨æ³•ã€‚</p> <p><code>EventEmitter</code>æä¾›äº†å¤šä¸ªå±æ€§ï¼Œå¦‚ <strong>on</strong> å’Œ <strong>emit</strong>ã€‚<strong>on</strong> å‡½æ•°ç”¨äºç»‘å®šäº‹ä»¶å‡½æ•°ï¼Œ<strong>emit</strong> å±æ€§ç”¨äºè§¦å‘ä¸€ä¸ªäº‹ä»¶</p></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/Aismy/aismy.github.io/edit/master/docs/05.å‰ç«¯æŠ€æœ¯/01.node.js/06 ã€nodejså†…ç½®æ¨¡å—ï¼ˆä¸­ï¼‰ã€‘.md" target="_blank" rel="noopener noreferrer">åœ¨çº¿ç¼–è¾‘æ­¤æ–‡ç« </a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <!----></div> <div class="page-nav-wapper"><!----> <!----></div></div> <!----></main></div> <div class="footer"><div class="icons"><a href="mailto:752704491@qq.com" title="å‘é‚®ä»¶" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/Aismy" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="æœ¬ç«™ä¸»é¢˜">Vdoing</a> 
    | Copyright Â© 2022-2023
    <span>Aismy | MIT License</span></div> <div class="buttons"><div title="è¿”å›é¡¶éƒ¨" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="å»è¯„è®º" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="ä¸»é¢˜æ¨¡å¼" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          è·Ÿéšç³»ç»Ÿ
        </li><li class="iconfont icon-rijianmoshi">
          æµ…è‰²æ¨¡å¼
        </li><li class="iconfont icon-yejianmoshi">
          æ·±è‰²æ¨¡å¼
        </li><li class="iconfont icon-yuedu">
          é˜…è¯»æ¨¡å¼
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.b738e2cf.js" defer></script><script src="/assets/js/2.ffb45a81.js" defer></script><script src="/assets/js/38.e84bf93e.js" defer></script>
  </body>
</html>
