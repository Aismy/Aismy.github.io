<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>05 ã€nodejså†…ç½®æ¨¡å—ï¼ˆä¸Šï¼‰ã€‘ | Aismy&#39;Docs</title>
    <meta name="generator" content="VuePress 1.9.2">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="Aismy&#39;Docs">
    <meta name="keywords" content="vuepress,theme,blog,vdoing">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.906cd319.css" as="style"><link rel="preload" href="/assets/js/app.b738e2cf.js" as="script"><link rel="preload" href="/assets/js/2.ffb45a81.js" as="script"><link rel="preload" href="/assets/js/37.a549e9e3.js" as="script"><link rel="prefetch" href="/assets/js/10.c2e0087a.js"><link rel="prefetch" href="/assets/js/11.515afe89.js"><link rel="prefetch" href="/assets/js/12.fab2a176.js"><link rel="prefetch" href="/assets/js/13.001935e7.js"><link rel="prefetch" href="/assets/js/14.b80dbf2e.js"><link rel="prefetch" href="/assets/js/15.1b1059f6.js"><link rel="prefetch" href="/assets/js/16.fcd1537c.js"><link rel="prefetch" href="/assets/js/17.9df6cc33.js"><link rel="prefetch" href="/assets/js/18.bd3b4e60.js"><link rel="prefetch" href="/assets/js/19.c0b3ce9a.js"><link rel="prefetch" href="/assets/js/20.546547fb.js"><link rel="prefetch" href="/assets/js/21.0692e109.js"><link rel="prefetch" href="/assets/js/22.941054f1.js"><link rel="prefetch" href="/assets/js/23.6a79feac.js"><link rel="prefetch" href="/assets/js/24.d7b40265.js"><link rel="prefetch" href="/assets/js/25.2f068444.js"><link rel="prefetch" href="/assets/js/26.39e773a6.js"><link rel="prefetch" href="/assets/js/27.0cc11d71.js"><link rel="prefetch" href="/assets/js/28.6e0bab80.js"><link rel="prefetch" href="/assets/js/29.aa305b1a.js"><link rel="prefetch" href="/assets/js/3.166f9e48.js"><link rel="prefetch" href="/assets/js/30.a9437cbd.js"><link rel="prefetch" href="/assets/js/31.d2300f1b.js"><link rel="prefetch" href="/assets/js/32.30060633.js"><link rel="prefetch" href="/assets/js/33.ddd9f9e8.js"><link rel="prefetch" href="/assets/js/34.102c62c1.js"><link rel="prefetch" href="/assets/js/35.da833d69.js"><link rel="prefetch" href="/assets/js/36.b4b83ef9.js"><link rel="prefetch" href="/assets/js/38.e84bf93e.js"><link rel="prefetch" href="/assets/js/39.145b375f.js"><link rel="prefetch" href="/assets/js/4.2988106a.js"><link rel="prefetch" href="/assets/js/40.246cd152.js"><link rel="prefetch" href="/assets/js/41.530026b3.js"><link rel="prefetch" href="/assets/js/42.24a60b39.js"><link rel="prefetch" href="/assets/js/43.902a7b0b.js"><link rel="prefetch" href="/assets/js/44.4f8c78f2.js"><link rel="prefetch" href="/assets/js/5.58eac4fd.js"><link rel="prefetch" href="/assets/js/6.d50e78bb.js"><link rel="prefetch" href="/assets/js/7.977fe42a.js"><link rel="prefetch" href="/assets/js/8.289b9caf.js"><link rel="prefetch" href="/assets/js/9.6a3fba9d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.906cd319.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="ç›®å½•" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="Aismy'Docs" class="logo"> <span class="site-name can-hide">Aismy'Docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><a href="https://www.aismy.top" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ğŸ“•åšå®¢
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸµJava SE" class="dropdown-title"><a href="/pages/389d93/" class="link-title">ğŸµJava SE</a> <span class="title" style="display:none;">ğŸµJava SE</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/389d93/" class="nav-link">JavaåŸºç¡€</a></li><li class="dropdown-item"><!----> <a href="/pages/aab896/" class="nav-link">é›†åˆ</a></li><li class="dropdown-item"><!----> <a href="/pages/d2a30d/" class="nav-link">IOæµ</a></li><li class="dropdown-item"><!----> <a href="/pages/780f7d/" class="nav-link">æ³¨è§£å’Œåå°„</a></li><li class="dropdown-item"><!----> <a href="/pages/8d2bfc/" class="nav-link">å¹¶å‘ç¼–ç¨‹</a></li><li class="dropdown-item"><!----> <a href="/pages/e9d599/" class="nav-link">JVM</a></li><li class="dropdown-item"><!----> <a href="/pages/467393/" class="nav-link">æ–°ç‰¹æ€§</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸŒ´æ•°æ®åº“" class="dropdown-title"><a href="/pages/142be7/" class="link-title">ğŸŒ´æ•°æ®åº“</a> <span class="title" style="display:none;">ğŸŒ´æ•°æ®åº“</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/142be7/" class="nav-link">Mysql</a></li><li class="dropdown-item"><!----> <a href="/pages/1ce2e2/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/pages/62a615/" class="nav-link">ElasticSearch</a></li></ul></div></div><div class="nav-item"><a href="/pages/1b02d4/" class="nav-link">ğŸš€åç«¯æ¡†æ¶</a></div><div class="nav-item"><a href="/pages/1fe252/" class="nav-link">ğŸš€å‰ç«¯æŠ€æœ¯</a></div><div class="nav-item"><a href="/pages/83c955/" class="nav-link">ğŸ› ï¸å¼€å‘å·¥å…·</a></div> <a href="https://github.com/Aismy/aismy.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><a href="https://www.aismy.top" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ğŸ“•åšå®¢
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸµJava SE" class="dropdown-title"><a href="/pages/389d93/" class="link-title">ğŸµJava SE</a> <span class="title" style="display:none;">ğŸµJava SE</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/389d93/" class="nav-link">JavaåŸºç¡€</a></li><li class="dropdown-item"><!----> <a href="/pages/aab896/" class="nav-link">é›†åˆ</a></li><li class="dropdown-item"><!----> <a href="/pages/d2a30d/" class="nav-link">IOæµ</a></li><li class="dropdown-item"><!----> <a href="/pages/780f7d/" class="nav-link">æ³¨è§£å’Œåå°„</a></li><li class="dropdown-item"><!----> <a href="/pages/8d2bfc/" class="nav-link">å¹¶å‘ç¼–ç¨‹</a></li><li class="dropdown-item"><!----> <a href="/pages/e9d599/" class="nav-link">JVM</a></li><li class="dropdown-item"><!----> <a href="/pages/467393/" class="nav-link">æ–°ç‰¹æ€§</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸŒ´æ•°æ®åº“" class="dropdown-title"><a href="/pages/142be7/" class="link-title">ğŸŒ´æ•°æ®åº“</a> <span class="title" style="display:none;">ğŸŒ´æ•°æ®åº“</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/142be7/" class="nav-link">Mysql</a></li><li class="dropdown-item"><!----> <a href="/pages/1ce2e2/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/pages/62a615/" class="nav-link">ElasticSearch</a></li></ul></div></div><div class="nav-item"><a href="/pages/1b02d4/" class="nav-link">ğŸš€åç«¯æ¡†æ¶</a></div><div class="nav-item"><a href="/pages/1fe252/" class="nav-link">ğŸš€å‰ç«¯æŠ€æœ¯</a></div><div class="nav-item"><a href="/pages/83c955/" class="nav-link">ğŸ› ï¸å¼€å‘å·¥å…·</a></div> <a href="https://github.com/Aismy/aismy.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>node.js</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/1fe252/" class="sidebar-link">ã€nodejsç®€ä»‹ã€‘</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/1fe252/#node-jsæ˜¯ä»€ä¹ˆ" class="sidebar-link">Node.jsæ˜¯ä»€ä¹ˆï¼Ÿ</a></li><li class="sidebar-sub-header level2"><a href="/pages/1fe252/#node-js-çš„åº”ç”¨" class="sidebar-link">Node.js çš„åº”ç”¨</a></li><li class="sidebar-sub-header level2"><a href="/pages/1fe252/#node-js-çš„ç‰¹ç‚¹" class="sidebar-link">Node.js çš„ç‰¹ç‚¹</a></li><li class="sidebar-sub-header level2"><a href="/pages/1fe252/#ä½¿ç”¨-node-js-æ—¶çš„åŠ£åŠ¿" class="sidebar-link">ä½¿ç”¨ Node.js æ—¶çš„åŠ£åŠ¿</a></li></ul></li><li><a href="/pages/ad57db/" class="sidebar-link">ã€nodejså¼€å‘ç¯å¢ƒå®‰è£…ã€‘</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/ad57db/#ç‰ˆæœ¬ä»‹ç»" class="sidebar-link">ç‰ˆæœ¬ä»‹ç»</a></li><li class="sidebar-sub-header level2"><a href="/pages/ad57db/#node-js-è¿è¡Œç¯å¢ƒé…ç½®-é€šè¿‡-node-js-å®‰è£…åŒ…-ä¸æ¨è" class="sidebar-link">Node.js è¿è¡Œç¯å¢ƒé…ç½®ï¼šé€šè¿‡ Node.js å®‰è£…åŒ…ï¼ˆä¸æ¨èï¼‰</a></li><li class="sidebar-sub-header level2"><a href="/pages/ad57db/#node-js-è¿è¡Œç¯å¢ƒå®‰è£…-é€šè¿‡-nvm-æ¨è" class="sidebar-link">Node.js è¿è¡Œç¯å¢ƒå®‰è£…ï¼šé€šè¿‡ NVMï¼ˆæ¨èï¼‰</a></li><li class="sidebar-sub-header level2"><a href="/pages/ad57db/#nvm-çš„å¸¸ç”¨å‘½ä»¤" class="sidebar-link">NVM çš„å¸¸ç”¨å‘½ä»¤</a></li><li class="sidebar-sub-header level2"><a href="/pages/ad57db/#node-js-çš„å¸¸ç”¨å‘½ä»¤" class="sidebar-link">Node.js çš„å¸¸ç”¨å‘½ä»¤</a></li></ul></li><li><a href="/pages/1f0273/" class="sidebar-link">ã€npmçš„ä½¿ç”¨ã€‘</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/1f0273/#åŒ…å’Œnpm" class="sidebar-link">åŒ…å’Œnpm</a></li><li class="sidebar-sub-header level2"><a href="/pages/1f0273/#npm-çš„å¸¸ç”¨å‘½ä»¤" class="sidebar-link">NPM çš„å¸¸ç”¨å‘½ä»¤</a></li><li class="sidebar-sub-header level2"><a href="/pages/1f0273/#é…ç½®-npm-é•œåƒæº" class="sidebar-link">é…ç½® npm é•œåƒæº</a></li><li class="sidebar-sub-header level2"><a href="/pages/1f0273/#ä»€ä¹ˆæ˜¯-npm-è„šæœ¬" class="sidebar-link">ä»€ä¹ˆæ˜¯ npm è„šæœ¬</a></li><li class="sidebar-sub-header level2"><a href="/pages/1f0273/#pnpm" class="sidebar-link">pnpm</a></li><li class="sidebar-sub-header level2"><a href="/pages/1f0273/#npmå‘½ä»¤æ€»ç»“" class="sidebar-link">npmå‘½ä»¤æ€»ç»“</a></li><li class="sidebar-sub-header level2"><a href="/pages/1f0273/#ä½¿ç”¨-nodemon-è‡ªåŠ¨é‡å¯æœåŠ¡" class="sidebar-link">ä½¿ç”¨ nodemon è‡ªåŠ¨é‡å¯æœåŠ¡</a></li></ul></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="é¦–é¡µ" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><span data-v-06225672>å‰ç«¯æŠ€æœ¯</span></li><li data-v-06225672><span data-v-06225672>node.js</span></li></ul> <div class="info" data-v-06225672><div title="ä½œè€…" class="author iconfont icon-touxiang" data-v-06225672><a href="https://www.aismy.top" target="_blank" title="ä½œè€…" class="beLink" data-v-06225672>Aismy</a></div> <div title="åˆ›å»ºæ—¶é—´" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-05-11</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">ç›®å½•</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">05 ã€nodejså†…ç½®æ¨¡å—ï¼ˆä¸Šï¼‰ã€‘<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="_05-ã€nodejså†…ç½®æ¨¡å—-ä¸Š-ã€‘"><a href="#_05-ã€nodejså†…ç½®æ¨¡å—-ä¸Š-ã€‘" class="header-anchor">#</a> 05 ã€nodejså†…ç½®æ¨¡å—ï¼ˆä¸Šï¼‰ã€‘</h1> <h2 id="nodejs-çš„å®˜æ–¹apiæ–‡æ¡£"><a href="#nodejs-çš„å®˜æ–¹apiæ–‡æ¡£" class="header-anchor">#</a> nodejs çš„å®˜æ–¹APIæ–‡æ¡£</h2> <ul><li>Node.js çš„APIæ–‡æ¡£ï¼ˆè‹±æ–‡ï¼‰ï¼š https://nodejs.org/docs/latest-v8.x/api/index.html</li> <li>Node.js çš„APIæ–‡æ¡£ï¼ˆä¸­æ–‡ï¼‰ï¼šhttp://nodejs.cn/api/</li></ul> <p>å…³äº Node.js çš„å†…ç½®æ¨¡å—å’Œå¸¸è§APIï¼Œå¯ä»¥çœ‹å®˜æ–¹æ–‡æ¡£ã€‚</p> <p>æŸ¥é˜…æ–‡æ¡£æ—¶ï¼Œç¨³å®šæŒ‡æ•°å¦‚ä¸‹ï¼š</p> <ul><li>çº¢è‰²ï¼šåºŸå¼ƒã€‚</li> <li>æ©™è‰²ï¼šå®éªŒã€‚è¡¨ç¤ºå½“å‰ç‰ˆæœ¬å¯ç”¨ï¼Œå…¶ä»–ç‰ˆæœ¬ä¸ç¡®å®šã€‚ä¹Ÿè®¸ä¸å‘ä¸‹å…¼å®¹ï¼Œå»ºè®®ä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨è¯¥ç‰¹æ€§ã€‚</li> <li>ç»¿è‰²ï¼šç¨³å®šã€‚ä¸ npm ç”Ÿæ€ç³»ç»Ÿçš„å…¼å®¹æ€§æ˜¯æœ€é«˜çš„ä¼˜å…ˆçº§ã€‚</li></ul> <h2 id="nodejs-ä¸­æ¨¡å—çš„åˆ†ç±»"><a href="#nodejs-ä¸­æ¨¡å—çš„åˆ†ç±»" class="header-anchor">#</a> nodejs ä¸­æ¨¡å—çš„åˆ†ç±»</h2> <p>Node.js åº”ç”¨ç”±æ¨¡å—ç»„æˆï¼Œé‡‡ç”¨ CommonJS æ¨¡å—è§„èŒƒã€‚Node.jsä¸­çš„æ¨¡å—åˆ†ä¸ºä¸‰ç§ï¼š</p> <ul><li>å†…ç½®æ¨¡å—</li> <li>ç¬¬ä¸‰æ–¹æ¨¡å—</li> <li>è‡ªå®šä¹‰æ¨¡å—</li></ul> <p>ä¸‹é¢ç®€å•ä»‹ç»ä¸€ä¸‹ã€‚</p> <h3 id="å†…ç½®æ¨¡å—"><a href="#å†…ç½®æ¨¡å—" class="header-anchor">#</a> å†…ç½®æ¨¡å—</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> process <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'process'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>version<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'../'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>requireæ–¹æ³•ç”¨äºåŠ è½½æ¨¡å—ã€‚</p> <p>å¸¸è§çš„å†…ç½®æ¨¡å—åŒ…æ‹¬ï¼š</p> <ul><li>FSï¼šæ–‡ä»¶ç³»ç»Ÿæ¨¡å—</li> <li>pathï¼šè·¯å¾„æ¨¡å—</li> <li>OSï¼šæ“ä½œç³»ç»Ÿç›¸å…³</li> <li>netï¼šç½‘ç»œç›¸å…³</li> <li>http</li> <li>...</li></ul> <p>ä½ å¯èƒ½ä¼šæœ‰ç–‘é—®ï¼šNode.js è¿™ä¹ˆç‰›å—ï¼Ÿè¿˜èƒ½ç›´æ¥å’Œæ“ä½œç³»ç»Ÿåšäº¤äº’ï¼Ÿ</p> <p>å¸¦ç€è¿™ä¸ªç–‘é—®ï¼Œæˆ‘ä»¬ä¸å¦¨ç®€å•çœ‹çœ‹ Node.js çš„æºç ï¼Œä»¥ os æ¨¡å—ä¸¾ä¾‹ï¼š</p> <ul><li>æ‰“å¼€osæ¨¡å—çš„æºç ï¼šhttps://github.com/nodejs/node/blob/master/lib/os.jsï¼Œç¿»åˆ°æœ€åº•éƒ¨ï¼Œæ‰¾åˆ° <code>cpus</code>è¿™ä¸ªæ–¹æ³•</li> <li>è¿›è€Œæ‰¾åˆ° <code>getCPUs()</code></li> <li>internalBinding('os')ï¼šé€šè¿‡ internalBinding å¯ä»¥è°ƒç”¨ç³»ç»Ÿåº•å±‚çš„æ–¹æ³•ã€‚internalBinding ä¸»è¦æ˜¯ JS è™šæ‹Ÿæœºåœ¨åšçš„äº‹æƒ…ã€‚</li> <li><code>internalBinding('os')</code> çš„å®ç°ï¼Œåœ¨ https://github.com/nodejs/node/blob/master/src/node_os.cc é‡Œï¼Œé‡Œé¢éƒ½æ˜¯ C++ çš„ä»£ç ã€‚æ¯”å¦‚æœ‰ä¸€ä¸ª<code>getCPUs</code>æ–¹æ³•ã€‚</li></ul> <p>ç°åœ¨ä½ çŸ¥é“äº†ï¼ŒJSæœ¬èº«æ˜¯æ²¡æœ‰èƒ½åŠ›è·å–åº•å±‚ç³»ç»Ÿèµ„æºçš„ï¼Œè¿™ä¸€åˆ‡éƒ½æ˜¯ JSè™šæ‹Ÿæœºåœ¨å’Œåº•å±‚åšäº¤äº’ï¼Œç„¶åé€šè¿‡ JS çš„è¡¨ç°å½¢å¼ï¼Œæš´éœ²ç»™åº”ç”¨å±‚ã€‚</p> <p>å¦å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šåº“ï¼Œæ˜¯ç›´æ¥ä½¿ç”¨C/++ç¼–å†™çš„ï¼Œé€šè¿‡ç¼–è¯‘ä¹‹åï¼Œå†æä¾›ç»™ JS åº”ç”¨å±‚è°ƒç”¨ï¼Œæˆ–è€…ç›´æ¥æä¾›ç»™ Node.jså±‚ä½¿ç”¨ã€‚</p> <p><strong>æ‰€æœ‰çš„ç¼–ç¨‹è¯­è¨€åº•å±‚éƒ½ä¼šå›å½’C/C++</strong>ï¼Œç”šè‡³æ˜¯æ±‡ç¼–è¯­è¨€ã€‚</p> <h3 id="require-åŠ è½½ç¬¬ä¸‰æ–¹åŒ…çš„æœºåˆ¶"><a href="#require-åŠ è½½ç¬¬ä¸‰æ–¹åŒ…çš„æœºåˆ¶" class="header-anchor">#</a> require åŠ è½½ç¬¬ä¸‰æ–¹åŒ…çš„æœºåˆ¶</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>require åŠ è½½ç¬¬ä¸‰æ–¹åŒ…çš„æœºåˆ¶ï¼š</p> <p>ï¼ˆ1ï¼‰ç¬¬ä¸‰æ–¹åŒ…å®‰è£…å¥½åï¼Œè¿™ä¸ªåŒ…ä¸€èˆ¬ä¼šå­˜æ”¾åœ¨å½“å‰é¡¹ç›®çš„ node_modules æ–‡ä»¶å¤¹ä¸­ã€‚æˆ‘ä»¬æ‰¾åˆ°è¿™ä¸ªåŒ…çš„ package.json æ–‡ä»¶ï¼Œå¹¶ä¸”æ‰¾åˆ°é‡Œé¢çš„mainå±æ€§å¯¹åº”çš„å…¥å£æ¨¡å—ï¼Œè¿™ä¸ªå…¥å£æ¨¡å—å°±æ˜¯è¿™ä¸ªåŒ…çš„å…¥å£æ–‡ä»¶ã€‚</p> <p>ï¼ˆ2ï¼‰å¦‚æœç¬¬ä¸‰æ–¹åŒ…ä¸­æ²¡æœ‰æ‰¾åˆ°package.jsonæ–‡ä»¶ï¼Œæˆ–è€…package.jsonæ–‡ä»¶ä¸­æ²¡æœ‰mainå±æ€§ï¼Œåˆ™é»˜è®¤åŠ è½½ç¬¬ä¸‰æ–¹åŒ…ä¸­çš„index.jsæ–‡ä»¶ã€‚</p> <p>ï¼ˆ3ï¼‰å¦‚æœåœ¨ node_modules æ–‡ä»¶å¤¹ä¸­æ²¡æœ‰æ‰¾åˆ°è¿™ä¸ªåŒ…ï¼Œæˆ–è€…ä»¥ä¸Šæ‰€æœ‰æƒ…å†µéƒ½æ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™ä¼šå‘ä¸Šä¸€çº§çˆ¶çº§ç›®å½•ä¸‹æŸ¥æ‰¾node_modulesæ–‡ä»¶å¤¹ï¼ŒæŸ¥æ‰¾è§„åˆ™å¦‚ä¸Šä¸€è‡´ã€‚</p> <p>ï¼ˆ4ï¼‰å¦‚æœä¸€ç›´æ‰¾åˆ°è¯¥æ¨¡å—çš„ç£ç›˜æ ¹è·¯å¾„éƒ½æ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™ä¼šæŠ¥é”™ï¼šcan not find module xxxã€‚</p> <h3 id="è‡ªå®šä¹‰æ¨¡å—-module"><a href="#è‡ªå®šä¹‰æ¨¡å—-module" class="header-anchor">#</a> è‡ªå®šä¹‰æ¨¡å—ï¼ˆmoduleï¼‰</h3> <p>æ¯ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œæœ‰è‡ªå·±çš„ä½œç”¨åŸŸã€‚åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œé¢å®šä¹‰çš„å˜é‡ã€å‡½æ•°ã€ç±»ï¼Œéƒ½æ˜¯ç§æœ‰çš„ï¼Œå¯¹å…¶ä»–æ–‡ä»¶ä¸å¯è§ã€‚</p> <p>ä¸¾ä¾‹ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> example <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./example.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>example<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>example<span class="token punctuation">.</span><span class="token function">addX</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 6</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="ç½‘ç»œæœåŠ¡-http"><a href="#ç½‘ç»œæœåŠ¡-http" class="header-anchor">#</a> ç½‘ç»œæœåŠ¡ http</h2> <h3 id="httpæ¨¡å—æ¦‚è§ˆ"><a href="#httpæ¨¡å—æ¦‚è§ˆ" class="header-anchor">#</a> httpæ¨¡å—æ¦‚è§ˆ</h3> <p>å¤§å¤šæ•°nodejså¼€å‘è€…éƒ½æ˜¯å†²ç€å¼€å‘web serverçš„ç›®çš„é€‰æ‹©äº†nodejsã€‚æ­£å¦‚å®˜ç½‘æ‰€å±•ç¤ºçš„ï¼Œå€ŸåŠ©httpæ¨¡å—ï¼Œå¯ä»¥å‡ è¡Œä»£ç å°±æå®šä¸€ä¸ªè¶…è¿·ä½ çš„web serverã€‚</p> <p>åœ¨nodejsä¸­ï¼Œ<code>http</code>å¯ä»¥è¯´æ˜¯æœ€æ ¸å¿ƒçš„æ¨¡å—ï¼ŒåŒæ—¶ä¹Ÿæ˜¯æ¯”è¾ƒå¤æ‚çš„ä¸€ä¸ªæ¨¡å—ã€‚ä¸Šæ‰‹å¾ˆç®€å•ï¼Œä½†ä¸€æ—¦æ·±å…¥å­¦ä¹ ï¼Œä¸å°‘åˆå­¦è€…å°±ä¼šè§‰å¾—å¤´ç–¼ï¼Œä¸çŸ¥ä»ä½•å…¥æ‰‹ã€‚</p> <p>æœ¬æ–‡å…ˆä»ä¸€ä¸ªç®€å•çš„ä¾‹å­å‡ºå‘ï¼Œå¼•å‡º<code>http</code>æ¨¡å—æœ€æ ¸å¿ƒçš„å››ä¸ªå®ä¾‹ã€‚çœ‹å®Œæœ¬æ–‡ï¼Œåº”è¯¥å°±èƒ½å¤Ÿå¯¹httpæ¨¡å—æœ‰ä¸ªæ•´ä½“çš„è®¤è¯†ã€‚</p> <h3 id="ä¸€ä¸ªç®€å•çš„ä¾‹å­"><a href="#ä¸€ä¸ªç®€å•çš„ä¾‹å­" class="header-anchor">#</a> ä¸€ä¸ªç®€å•çš„ä¾‹å­</h3> <p>åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†1ä¸ªwebæœåŠ¡å™¨ã€1ä¸ªhttpå®¢æˆ·ç«¯</p> <ul><li>æœåŠ¡å™¨serverï¼šæ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå¹¶å°†å®¢æˆ·ç«¯è¯·æ±‚çš„åœ°å€è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</li> <li>å®¢æˆ·ç«¯clientï¼šå‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œå¹¶å°†æœåŠ¡å™¨è¿”å›çš„å†…å®¹æ‰“å°åˆ°æ§åˆ¶å°ã€‚</li></ul> <p>ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼Œåªæœ‰å‡ è¡Œï¼Œä½†åŒ…å«äº†ä¸å°‘ä¿¡æ¯é‡ã€‚ä¸‹ä¸€å°èŠ‚ä¼šè¿›è¡Œç®€å•ä»‹ç»ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// http server ä¾‹å­</span>
<span class="token keyword">var</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">serverReq<span class="token punctuation">,</span> serverRes</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> url <span class="token operator">=</span> serverReq<span class="token punctuation">.</span>url<span class="token punctuation">;</span>
    serverRes<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span> <span class="token string">'æ‚¨è®¿é—®çš„åœ°å€æ˜¯ï¼š'</span> <span class="token operator">+</span> url <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// http client ä¾‹å­</span>
<span class="token keyword">var</span> client <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'http://127.0.0.1:3000'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">clientRes</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    clientRes<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>stdout<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="ä¾‹å­è§£é‡Š"><a href="#ä¾‹å­è§£é‡Š" class="header-anchor">#</a> ä¾‹å­è§£é‡Š</h3> <p>åœ¨ä¸Šé¢è¿™ä¸ªç®€å•çš„ä¾‹å­é‡Œï¼Œæ¶‰åŠäº†4ä¸ªå®ä¾‹ã€‚å¤§éƒ¨åˆ†æ—¶å€™ï¼ŒserverReqã€serverRes æ‰æ˜¯ä¸»è§’ã€‚</p> <ul><li>serverï¼šhttp.Serverå®ä¾‹ï¼Œç”¨æ¥æä¾›æœåŠ¡ï¼Œå¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚</li> <li>clientï¼šhttp.ClientRequeså®ä¾‹ï¼Œç”¨æ¥å‘æœåŠ¡ç«¯å‘èµ·è¯·æ±‚ã€‚</li> <li>serverReq/clientResï¼šå…¶å®éƒ½æ˜¯ http.IncomingMessageå®ä¾‹ã€‚serverReq ç”¨æ¥è·å–å®¢æˆ·ç«¯è¯·æ±‚çš„ç›¸å…³ä¿¡æ¯ï¼Œå¦‚request headerï¼›è€ŒclientResç”¨æ¥è·å–æœåŠ¡ç«¯è¿”å›çš„ç›¸å…³ä¿¡æ¯ï¼Œæ¯”å¦‚response headerã€‚</li> <li>serverResï¼šhttp.ServerResponseå®ä¾‹</li></ul> <h3 id="å…³äºhttp-incomingmessageã€http-serverresponse"><a href="#å…³äºhttp-incomingmessageã€http-serverresponse" class="header-anchor">#</a> å…³äºhttp.IncomingMessageã€http.ServerResponse</h3> <p>å…ˆè®²ä¸‹ http.ServerResponse å®ä¾‹ã€‚ä½œç”¨å¾ˆæ˜ç¡®ï¼ŒæœåŠ¡ç«¯é€šè¿‡http.ServerResponse å®ä¾‹ï¼Œæ¥ä¸ªè¯·æ±‚æ–¹å‘é€æ•°æ®ã€‚åŒ…æ‹¬å‘é€å“åº”è¡¨å¤´ï¼Œå‘é€å“åº”ä¸»ä½“ç­‰ã€‚</p> <p>æ¥ä¸‹æ¥æ˜¯ http.IncomingMessage å®ä¾‹ï¼Œç”±äºåœ¨ serverã€client éƒ½å‡ºç°äº†ï¼Œåˆå­¦è€…éš¾å…æœ‰ç‚¹è¿·èŒ«ã€‚å®ƒçš„ä½œç”¨æ˜¯</p> <p>åœ¨serverç«¯ï¼šè·å–è¯·æ±‚å‘é€æ–¹çš„ä¿¡æ¯ï¼Œæ¯”å¦‚è¯·æ±‚æ–¹æ³•ã€è·¯å¾„ã€ä¼ é€’çš„æ•°æ®ç­‰ã€‚ åœ¨clientç«¯ï¼šè·å– server ç«¯å‘é€è¿‡æ¥çš„ä¿¡æ¯ï¼Œæ¯”å¦‚è¯·æ±‚æ–¹æ³•ã€è·¯å¾„ã€ä¼ é€’çš„æ•°æ®ç­‰ã€‚</p> <p>http.IncomingMessageå®ä¾‹ æœ‰ä¸‰ä¸ªå±æ€§éœ€è¦æ³¨æ„ï¼šmethodã€statusCodeã€statusMessageã€‚</p> <ul><li>methodï¼šåªåœ¨ server ç«¯çš„å®ä¾‹æœ‰ï¼ˆä¹Ÿå°±æ˜¯ serverReq.methodï¼‰</li> <li>statusCode/statusMessageï¼šåªåœ¨ client ç«¯ çš„å®ä¾‹æœ‰ï¼ˆä¹Ÿå°±æ˜¯ clientRes.methodï¼‰</li></ul> <h2 id="ç½‘ç»œæœåŠ¡-http-res"><a href="#ç½‘ç»œæœåŠ¡-http-res" class="header-anchor">#</a> ç½‘ç»œæœåŠ¡ http res</h2> <h3 id="æ¦‚è§ˆ"><a href="#æ¦‚è§ˆ" class="header-anchor">#</a> æ¦‚è§ˆ</h3> <p>httpæ¨¡å—å››å‰‘å®¢ä¹‹ä¸€çš„<code>res</code>ï¼Œåº”è¯¥éƒ½ä¸é™Œç”Ÿäº†ã€‚ä¸€ä¸ªwebæœåŠ¡ç¨‹åºï¼Œæ¥å—åˆ°æ¥è‡ªå®¢æˆ·ç«¯çš„httpè¯·æ±‚åï¼Œå‘å®¢æˆ·ç«¯è¿”å›æ­£ç¡®çš„å“åº”å†…å®¹ï¼Œè¿™å°±æ˜¯<code>res</code>çš„èŒè´£ã€‚</p> <p>è¿”å›çš„å†…å®¹åŒ…æ‹¬ï¼šçŠ¶æ€ä»£ç /çŠ¶æ€æè¿°ä¿¡æ¯ã€å“åº”å¤´éƒ¨ã€å“åº”ä¸»ä½“ã€‚ä¸‹æ–‡ä¼šä¸¾å‡ ä¸ªç®€å•çš„ä¾‹å­ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'ok'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="ä¾‹å­"><a href="#ä¾‹å­" class="header-anchor">#</a> ä¾‹å­</h3> <p>åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åŒæ—¶è®¾ç½®äº† çŠ¶æ€ä»£ç /çŠ¶æ€æè¿°ä¿¡æ¯ã€å“åº”å¤´éƒ¨ã€å“åº”ä¸»ä½“ï¼Œå°±æ˜¯è¿™ä¹ˆç®€å•ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// è®¾ç½®çŠ¶æ€ç ã€çŠ¶æ€æè¿°ä¿¡æ¯ã€å“åº”ä¸»ä½“</span>
<span class="token keyword">var</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token string">'ok'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token string-property property">'Content-Type'</span><span class="token operator">:</span> <span class="token string">'text/plain'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="è®¾ç½®çŠ¶æ€ä»£ç ã€çŠ¶æ€æè¿°ä¿¡æ¯"><a href="#è®¾ç½®çŠ¶æ€ä»£ç ã€çŠ¶æ€æè¿°ä¿¡æ¯" class="header-anchor">#</a> è®¾ç½®çŠ¶æ€ä»£ç ã€çŠ¶æ€æè¿°ä¿¡æ¯</h3> <p><code>res</code>æä¾›äº† res.writeHead()ã€res.statusCode/res.statusMessage æ¥å®ç°è¿™ä¸ªç›®çš„ã€‚</p> <p>ä¸¾ä¾‹ï¼Œå¦‚æœæƒ³è¦è®¾ç½® 200/ok ï¼Œå¯ä»¥</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token string">'ok'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ä¹Ÿå¯ä»¥</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>res<span class="token punctuation">.</span>statusCode <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
res<span class="token punctuation">.</span>statusMessage <span class="token operator">=</span> <span class="token string">'ok'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ä¸¤è€…å·®ä¸å¤šï¼Œå·®å¼‚ç‚¹åœ¨äº</p> <ol><li>res.writeHead() å¯ä»¥æä¾›é¢å¤–çš„åŠŸèƒ½ï¼Œæ¯”å¦‚è®¾ç½®å“åº”å¤´éƒ¨ã€‚</li> <li>å½“å“åº”å¤´éƒ¨å‘é€å‡ºå»åï¼Œres.statusCode/res.statusMessage ä¼šè¢«è®¾ç½®æˆå·²å‘é€å‡ºå»çš„ çŠ¶æ€ä»£ç /çŠ¶æ€æè¿°ä¿¡æ¯ã€‚</li></ol> <h3 id="è®¾ç½®å“åº”å¤´éƒ¨"><a href="#è®¾ç½®å“åº”å¤´éƒ¨" class="header-anchor">#</a> è®¾ç½®å“åº”å¤´éƒ¨</h3> <p><code>res</code>æä¾›äº† res.writeHead()ã€response.setHeader() æ¥å®ç°å“åº”å¤´éƒ¨çš„è®¾ç½®ã€‚</p> <p>ä¸¾ä¾‹ï¼Œæ¯”å¦‚æƒ³æŠŠ <code>Content-Type</code> è®¾ç½®ä¸º <code>text-plain</code>ï¼Œé‚£ä¹ˆå¯ä»¥</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// æ–¹æ³•ä¸€</span>
res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token string">'ok'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token string-property property">'Content-Type'</span><span class="token operator">:</span> <span class="token string">'text-plain'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// æ–¹æ³•äºŒ</span>
res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token string">'text-plain'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>ä¸¤è€…çš„å·®å¼‚ç‚¹åœ¨å“ªé‡Œå‘¢ï¼Ÿ</p> <ol><li>res.writeHead() ä¸å•å•æ˜¯è®¾ç½®headerã€‚</li> <li>å·²ç»é€šè¿‡ res.setHeader() è®¾ç½®äº†headerï¼Œå½“é€šè¿‡ res.writeHead() è®¾ç½®åŒåheaderï¼Œres.writeHead() çš„è®¾ç½®ä¼šè¦†ç›–ä¹‹å‰çš„è®¾ç½®ã€‚</li></ol> <p>å…³äºç¬¬2ç‚¹å·®å¼‚ï¼Œè¿™é‡Œä¸¾ä¸ªä¾‹å­ã€‚ä¸‹é¢ä»£ç ï¼Œæœ€ç»ˆçš„ <code>Content-Type</code> ä¸º <code>text/plain</code>ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token string">'text/html'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token string">'ok'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token string-property property">'Content-Type'</span><span class="token operator">:</span> <span class="token string">'text/plain'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>è€Œä¸‹é¢çš„ä¾‹å­ï¼Œåˆ™ç›´æ¥æŠ¥é”™ã€‚æŠ¥é”™ä¿¡æ¯ä¸º <code>Error: Can't set headers after they are sent.</code>ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    
    res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token string">'ok'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token string-property property">'Content-Type'</span><span class="token operator">:</span> <span class="token string">'text/plain'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token string">'text/html'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="å…¶ä»–å“åº”å¤´éƒ¨æ“ä½œ"><a href="#å…¶ä»–å“åº”å¤´éƒ¨æ“ä½œ" class="header-anchor">#</a> å…¶ä»–å“åº”å¤´éƒ¨æ“ä½œ</h3> <p>å¢ã€åˆ ã€æ”¹ã€æŸ¥ æ˜¯é…å¥—çš„ã€‚ä¸‹é¢åˆ†åˆ«ä¸¾ä¾‹è¯´æ˜ä¸‹ï¼Œä¾‹å­å¤ªç®€å•å°±ç›´æ¥ä¸Šä»£ç äº†ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// å¢</span>
res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token string">'text/plain'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// åˆ </span>
res<span class="token punctuation">.</span><span class="token function">removeHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// æ”¹</span>
res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token string">'text/plain'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token string">'text/html'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// è¦†ç›–</span>

<span class="token comment">// æŸ¥</span>
res<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">'content-type'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>å…¶ä¸­ç•¥æ˜¾ä¸åŒçš„æ˜¯ res.getHeader(name)ï¼Œname ç”¨çš„æ˜¯å°å†™ï¼Œè¿”å›å€¼æ²¡åšç‰¹æ®Šå¤„ç†ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token string">'TEXT/HTML'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> res<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">'content-type'</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// TEXT/HTML</span>

res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token string">'text/plain'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> res<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">'content-type'</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// text/plain</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>æ­¤å¤–ï¼Œè¿˜æœ‰ä¸é‚£ä¹ˆå¸¸ç”¨çš„ï¼š</p> <ul><li>res.headersSentï¼šheaderæ˜¯å¦å·²ç»å‘é€ï¼›</li> <li>res.sendDateï¼šé»˜è®¤ä¸ºtrueã€‚ä½†ä¸ºtrueæ—¶ï¼Œä¼šåœ¨response headeré‡Œè‡ªåŠ¨è®¾ç½®Dateé¦–éƒ¨ã€‚</li></ul> <h3 id="è®¾ç½®å“åº”ä¸»ä½“"><a href="#è®¾ç½®å“åº”ä¸»ä½“" class="header-anchor">#</a> è®¾ç½®å“åº”ä¸»ä½“</h3> <p>ä¸»è¦ç”¨åˆ° res.write() ä»¥åŠ res.end() ä¸¤ä¸ªæ–¹æ³•ã€‚</p> <p>res.write() APIçš„ä¿¡æ¯é‡ç•¥å¤§ï¼Œå»ºè®®çœ‹ä¸‹<a href="https://nodejs.org/api/http.html#http_response_write_chunk_encoding_callback" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚</p> <h4 id="response-write-chunk-encoding-callback"><a href="#response-write-chunk-encoding-callback" class="header-anchor">#</a> response.write(chunk[, encoding][, callback])</h4> <ul><li>chunkï¼šå“åº”ä¸»ä½“çš„å†…å®¹ï¼Œå¯ä»¥æ˜¯stringï¼Œä¹Ÿå¯ä»¥æ˜¯bufferã€‚å½“ä¸ºstringæ—¶ï¼Œencodingå‚æ•°ç”¨æ¥æŒ‡æ˜ç¼–ç æ–¹å¼ã€‚ï¼ˆé»˜è®¤æ˜¯utf8ï¼‰</li> <li>encodingï¼šç¼–ç æ–¹å¼ï¼Œé»˜è®¤æ˜¯ utf8ã€‚</li> <li>callbackï¼šå½“å“åº”ä½“flushedæ—¶è§¦å‘ã€‚ï¼ˆTODO è¿™é‡Œæƒ³ä¸‹æ›´å¥½çš„è§£é‡Šã€‚ã€‚ã€‚ï¼‰</li></ul> <p>ä½¿ç”¨ä¸Šæ²¡ä»€ä¹ˆéš¾åº¦ï¼Œåªæ˜¯æœ‰äº›æ³¨æ„äº‹é¡¹ï¼š</p> <ol><li>å¦‚æœ res.write() è¢«è°ƒç”¨æ—¶ï¼Œ res.writeHead() è¿˜æ²¡è¢«è°ƒç”¨è¿‡ï¼Œé‚£ä¹ˆï¼Œå°±ä¼šæŠŠheader flushå‡ºå»ã€‚</li> <li>res.write() å¯ä»¥è¢«è°ƒç”¨å¤šæ¬¡ã€‚</li> <li>å½“ res.write(chunk) ç¬¬ä¸€æ¬¡è¢«è°ƒç”¨æ—¶ï¼Œnode ä¼šå°† header ä¿¡æ¯ ä»¥åŠ chunk å‘é€åˆ°å®¢æˆ·ç«¯ã€‚ç¬¬äºŒæ¬¡è°ƒç”¨ res.write(chunk) ï¼Œnode ä¼šè®¤ä¸ºä½ æ˜¯è¦streaming dataï¼ˆWTFï¼Œè¯¥æ€ä¹ˆç¿»è¯‘ï¼‰ã€‚ã€‚ã€‚</li></ol> <blockquote><p>Returns true if the entire data was flushed successfully to the kernel buffer. Returns false if all or part of the data was queued in user memory. 'drain' will be emitted when the buffer is free again.</p></blockquote> <h4 id="response-end-data-encoding-callback"><a href="#response-end-data-encoding-callback" class="header-anchor">#</a> response.end([data][, encoding][, callback])</h4> <p>æŒæ¡äº† res.write() çš„è¯ï¼Œres.end() å°±å¾ˆç®€å•äº†ã€‚res.end() çš„ç”¨å¤„æ˜¯å‘Šè¯‰nodejsï¼Œheaderã€bodyéƒ½ç»™ä½ äº†ï¼Œè¿™æ¬¡å“åº”å°±åˆ°è¿™é‡Œå§ã€‚</p> <p>æœ‰ç‚¹åƒä¸ªè¯­æ³•ç³–ï¼Œå¯ä»¥çœ‹æˆä¸‹é¢ä¸¤ä¸ªè°ƒç”¨çš„ç»„åˆã€‚è‡³äºcallbackï¼Œå½“å“åº”ä¼ é€’ç»“æŸåè§¦å‘ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>res<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> encoding<span class="token punctuation">)</span><span class="token punctuation">;</span>
res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="è¶…æ—¶å¤„ç†"><a href="#è¶…æ—¶å¤„ç†" class="header-anchor">#</a> è¶…æ—¶å¤„ç†</h3> <p>æ¥å£ï¼šresponse.setTimeout(msecs, callback)</p> <p>å…³äº timeout äº‹ä»¶çš„è¯´æ˜ï¼ŒåŒæ ·æ˜¯è¨€ç®€æ„èµ…ï¼ˆWTFï¼‰ï¼Œè¯å°‘ä¿¡æ¯é‡å¤§ï¼Œæœ€å¥½æ¥ä¸ªdemo TODO</p> <blockquote><p>If no 'timeout' listener is added to the request, the response, or the server, then sockets are destroyed when they time out. If you assign a handler on the request, the response, or the server's 'timeout' events, then it is your responsibility to handle timed out sockets.</p></blockquote> <h3 id="äº‹ä»¶-close-finish"><a href="#äº‹ä»¶-close-finish" class="header-anchor">#</a> äº‹ä»¶ close/finish</h3> <ul><li>closeï¼šresponse.end() è¢«è°ƒç”¨å‰ï¼Œè¿æ¥å°±æ–­å¼€äº†ã€‚æ­¤æ—¶ä¼šè§¦å‘è¿™ä¸ªäº‹ä»¶ã€‚</li> <li>finishï¼šå“åº”headerã€bodyéƒ½å·²ç»å‘é€å‡ºå»ï¼ˆäº¤ç»™æ“ä½œç³»ç»Ÿï¼Œæ’é˜Ÿç­‰å€™ä¼ è¾“ï¼‰ï¼Œä½†å®¢æˆ·ç«¯æ˜¯å¦å®é™…æ”¶åˆ°æ•°æ®ä¸ºæ­¢ã€‚ï¼ˆè¿™ä¸ªäº‹ä»¶åï¼Œres ä¸Šå°±ä¸ä¼šå†æœ‰å…¶ä»–äº‹ä»¶è§¦å‘ï¼‰</li></ul> <h3 id="å…¶ä»–ä¸å¸¸ç”¨å±æ€§-æ–¹æ³•"><a href="#å…¶ä»–ä¸å¸¸ç”¨å±æ€§-æ–¹æ³•" class="header-anchor">#</a> å…¶ä»–ä¸å¸¸ç”¨å±æ€§/æ–¹æ³•</h3> <ul><li>response.finishedï¼šä¸€å¼€å§‹æ˜¯falseï¼Œå“åº”ç»“æŸåï¼Œè®¾ç½®ä¸ºtrueã€‚</li> <li>response.sendDateï¼šé»˜è®¤æ˜¯trueã€‚æ˜¯å¦è‡ªåŠ¨è®¾ç½®Dateå¤´éƒ¨ã€‚ï¼ˆæŒ‰HTTPåè®®æ˜¯å¿…é¡»è¦çš„ï¼Œé™¤éæ˜¯è°ƒè¯•ç”¨ï¼Œä¸ç„¶ä¸è¦è®¾ç½®ä¸ºfalseï¼‰</li> <li>response.headersSentï¼šåªè¯»å±æ€§ã€‚å“åº”å¤´éƒ¨æ˜¯å¦å·²å‘é€ã€‚</li> <li>response.writeContinue()ï¼šå‘é€ HTTP/1.1 100 Continue æ¶ˆæ¯ç»™å®¢æˆ·ç«¯ï¼Œæç¤ºè¯´æœåŠ¡ç«¯æ„¿æ„æ¥å—å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œè¯·ç»§ç»­å‘é€è¯·æ±‚æ­£æ–‡ï¼ˆbody)ã€‚ï¼ˆTODO åšä¸ªdemoå•¥çš„æ˜¯å¤§å¤§çš„å¥½ï¼‰</li></ul> <h2 id="ç½‘ç»œæœåŠ¡-http-req"><a href="#ç½‘ç»œæœåŠ¡-http-req" class="header-anchor">#</a> ç½‘ç»œæœåŠ¡ http req</h2> <h3 id="æ¦‚è§ˆ-2"><a href="#æ¦‚è§ˆ-2" class="header-anchor">#</a> æ¦‚è§ˆ</h3> <p>æœ¬æ–‡çš„é‡ç‚¹ä¼šæ”¾åœ¨<code>req</code>è¿™ä¸ªå¯¹è±¡ä¸Šã€‚å‰é¢å·²ç»æåˆ°ï¼Œå®ƒå…¶å®æ˜¯http.IncomingMessageå®ä¾‹ï¼Œåœ¨æœåŠ¡ç«¯ã€å®¢æˆ·ç«¯ä½œç”¨ç•¥å¾®æœ‰å·®å¼‚</p> <ul><li>æœåŠ¡ç«¯å¤„ï¼šè·å–è¯·æ±‚æ–¹çš„ç›¸å…³ä¿¡æ¯ï¼Œå¦‚request headerç­‰ã€‚</li> <li>å®¢æˆ·ç«¯å¤„ï¼šè·å–å“åº”æ–¹è¿”å›çš„ç›¸å…³ä¿¡æ¯ï¼Œå¦‚statusCodeç­‰ã€‚</li></ul> <p>æœåŠ¡ç«¯ä¾‹å­ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// ä¸‹é¢çš„ req</span>
<span class="token keyword">var</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>headers<span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'ok'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>å®¢æˆ·ç«¯ä¾‹å­</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// ä¸‹é¢çš„res</span>
<span class="token keyword">var</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
http<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'http://127.0.0.1:3000'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>statusCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="å±æ€§-æ–¹æ³•-äº‹ä»¶-åˆ†ç±»"><a href="#å±æ€§-æ–¹æ³•-äº‹ä»¶-åˆ†ç±»" class="header-anchor">#</a> å±æ€§/æ–¹æ³•/äº‹ä»¶ åˆ†ç±»</h3> <p>http.IncomingMessageçš„å±æ€§/æ–¹æ³•/äº‹ä»¶ ä¸æ˜¯ç‰¹åˆ«å¤šï¼ŒæŒ‰ç…§æ˜¯å¦å®¢æˆ·ç«¯/æœåŠ¡ç«¯ ç‰¹æœ‰çš„ï¼Œä¸‹é¢è¿›è¡Œç®€å•å½’ç±»ã€‚å¯ä»¥çœ‹åˆ°</p> <ul><li>æœåŠ¡ç«¯å¤„ç‰¹æœ‰ï¼šurl</li> <li>å®¢æˆ·ç«¯å¤„ç‰¹æœ‰ï¼šstatusCodeã€statusMessage</li></ul> <table><thead><tr><th style="text-align:left;">ç±»å‹</th> <th style="text-align:center;">åç§°</th> <th style="text-align:center;">æœåŠ¡ç«¯</th> <th style="text-align:center;">å®¢æˆ·ç«¯</th></tr></thead> <tbody><tr><td style="text-align:left;">äº‹ä»¶</td> <td style="text-align:center;">aborted</td> <td style="text-align:center;">âœ“</td> <td style="text-align:center;">âœ“</td></tr> <tr><td style="text-align:left;">äº‹ä»¶</td> <td style="text-align:center;">close</td> <td style="text-align:center;">âœ“</td> <td style="text-align:center;">âœ“</td></tr> <tr><td style="text-align:left;">å±æ€§</td> <td style="text-align:center;">headers</td> <td style="text-align:center;">âœ“</td> <td style="text-align:center;">âœ“</td></tr> <tr><td style="text-align:left;">å±æ€§</td> <td style="text-align:center;">rawHeaders</td> <td style="text-align:center;">âœ“</td> <td style="text-align:center;">âœ“</td></tr> <tr><td style="text-align:left;">å±æ€§</td> <td style="text-align:center;">statusCode</td> <td style="text-align:center;">âœ•</td> <td style="text-align:center;">âœ“</td></tr> <tr><td style="text-align:left;">å±æ€§</td> <td style="text-align:center;">statusMessage</td> <td style="text-align:center;">âœ•</td> <td style="text-align:center;">âœ“</td></tr> <tr><td style="text-align:left;">å±æ€§</td> <td style="text-align:center;">httpVersion</td> <td style="text-align:center;">âœ“</td> <td style="text-align:center;">âœ“</td></tr> <tr><td style="text-align:left;">å±æ€§</td> <td style="text-align:center;">url</td> <td style="text-align:center;">âœ“</td> <td style="text-align:center;">âœ•</td></tr> <tr><td style="text-align:left;">å±æ€§</td> <td style="text-align:center;">socket</td> <td style="text-align:center;">âœ“</td> <td style="text-align:center;">âœ“</td></tr> <tr><td style="text-align:left;">æ–¹æ³•</td> <td style="text-align:center;">.destroy()</td> <td style="text-align:center;">âœ“</td> <td style="text-align:center;">âœ“</td></tr> <tr><td style="text-align:left;">æ–¹æ³•</td> <td style="text-align:center;">.setTimeout()</td> <td style="text-align:center;">âœ“</td> <td style="text-align:center;">âœ“</td></tr></tbody></table> <h3 id="æœåŠ¡ç«¯çš„ä¾‹å­"><a href="#æœåŠ¡ç«¯çš„ä¾‹å­" class="header-anchor">#</a> æœåŠ¡ç«¯çš„ä¾‹å­</h3> <h4 id="ä¾‹å­ä¸€-è·å–httpversion-method-url"><a href="#ä¾‹å­ä¸€-è·å–httpversion-method-url" class="header-anchor">#</a> ä¾‹å­ä¸€ï¼šè·å–httpVersion/method/url</h4> <p>ä¸‹é¢æ˜¯ä¸€ä¸ªå…¸å‹çš„HTTPè¯·æ±‚æŠ¥æ–‡ï¼Œé‡Œé¢æœ€é‡è¦çš„å†…å®¹åŒ…æ‹¬ï¼šHTTPç‰ˆæœ¬ã€è¯·æ±‚æ–¹æ³•ã€è¯·æ±‚åœ°å€ã€è¯·æ±‚å¤´éƒ¨ã€‚</p> <div class="language-http line-numbers-mode"><pre class="language-http"><code><span class="token request-line"><span class="token method property">GET</span> <span class="token request-target url">/hello</span> <span class="token http-version property">HTTP/1.1</span></span>
<span class="token header"><span class="token header-name keyword">Host</span><span class="token punctuation">:</span> <span class="token header-value">127.0.0.1:3000</span></span>
<span class="token header"><span class="token header-name keyword">Connection</span><span class="token punctuation">:</span> <span class="token header-value">keep-alive</span></span>
<span class="token header"><span class="token header-name keyword">Cache-Control</span><span class="token punctuation">:</span> <span class="token header-value">no-cache</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>é‚£ä¹ˆï¼Œå¦‚ä½•è·å–ä¸Šé¢æåˆ°çš„ä¿¡æ¯å‘¢ï¼Ÿå¾ˆç®€å•ï¼Œç›´æ¥ä¸Šä»£ç </p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// getClientInfo.js</span>
<span class="token keyword">var</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">'1ã€å®¢æˆ·ç«¯è¯·æ±‚urlï¼š'</span> <span class="token operator">+</span> req<span class="token punctuation">.</span>url <span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">'2ã€httpç‰ˆæœ¬ï¼š'</span> <span class="token operator">+</span> req<span class="token punctuation">.</span>httpVersion <span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">'3ã€httpè¯·æ±‚æ–¹æ³•ï¼š'</span> <span class="token operator">+</span> req<span class="token punctuation">.</span>method <span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">'4ã€httpè¯·æ±‚å¤´éƒ¨'</span> <span class="token operator">+</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>headers<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'ok'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>æ•ˆæœå¦‚ä¸‹ï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">1</span>ã€å®¢æˆ·ç«¯è¯·æ±‚urlï¼š/hello
<span class="token number">2</span>ã€httpç‰ˆæœ¬ï¼š1.1
<span class="token number">3</span>ã€httpè¯·æ±‚æ–¹æ³•ï¼šGET
<span class="token number">4</span>ã€http headersï¼š<span class="token punctuation">{</span><span class="token string">&quot;host&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;127.0.0.1:3000&quot;</span>,<span class="token string">&quot;connection&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;keep-alive&quot;</span>,<span class="token string">&quot;cache-control&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;no-cache&quot;</span>,&quot;user-age
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="ä¾‹å­äºŒ-è·å–getè¯·æ±‚å‚æ•°"><a href="#ä¾‹å­äºŒ-è·å–getè¯·æ±‚å‚æ•°" class="header-anchor">#</a> ä¾‹å­äºŒï¼šè·å–getè¯·æ±‚å‚æ•°</h4> <p>æœåŠ¡ç«¯ä»£ç å¦‚ä¸‹ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// getClientGetQuery.js</span>
<span class="token keyword">var</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'url'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> querystring <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'querystring'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> urlObj <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> query <span class="token operator">=</span> urlObj<span class="token punctuation">.</span>query<span class="token punctuation">;</span>
    <span class="token keyword">var</span> queryObj <span class="token operator">=</span> querystring<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>queryObj<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'ok'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>è®¿é—®åœ°å€ http://127.0.0.1:3000/hello?nick=chyingp&amp;hello=world</p> <p>æœåŠ¡ç«¯è¾“å‡ºå¦‚ä¸‹</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">{</span><span class="token string">&quot;nick&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;chyingp&quot;</span>,<span class="token string">&quot;hello&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;world&quot;</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="ä¾‹å­ä¸‰-è·å–postè¯·æ±‚å‚æ•°"><a href="#ä¾‹å­ä¸‰-è·å–postè¯·æ±‚å‚æ•°" class="header-anchor">#</a> ä¾‹å­ä¸‰ï¼šè·å–postè¯·æ±‚å‚æ•°</h4> <p>æœåŠ¡ç«¯ä»£ç å¦‚ä¸‹</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// getClientPostBody.js</span>
<span class="token keyword">var</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'url'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> querystring <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'querystring'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    
    <span class="token keyword">var</span> body <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>  
    req<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">thunk</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        body <span class="token operator">+=</span> thunk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    req<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">'post body is: '</span> <span class="token operator">+</span> body <span class="token punctuation">)</span><span class="token punctuation">;</span>
        res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'ok'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>é€šè¿‡curlæ„é€ postè¯·æ±‚ï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-d</span> <span class="token string">'nick=casper&amp;hello=world'</span> http://127.0.0.1:3000
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>æœåŠ¡ç«¯æ‰“å°å¦‚ä¸‹ï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>post body is: <span class="token assign-left variable">nick</span><span class="token operator">=</span>casper<span class="token operator">&amp;</span><span class="token assign-left variable">hello</span><span class="token operator">=</span>world
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>å¤‡æ³¨ï¼špostè¯·æ±‚ä¸­ï¼Œä¸åŒçš„<code>Content-type</code>ï¼Œpost bodyæœ‰ä¸å°å·®å¼‚ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥ç ”ç©¶ä¸‹ã€‚</p> <p>æœ¬ä¾‹ä¸­çš„postè¯·æ±‚ï¼ŒHTTPæŠ¥æ–‡å¤§æ¦‚å¦‚ä¸‹</p> <div class="language-http line-numbers-mode"><pre class="language-http"><code><span class="token request-line"><span class="token method property">POST</span> <span class="token request-target url">/</span> <span class="token http-version property">HTTP/1.1</span></span>
<span class="token header"><span class="token header-name keyword">Host</span><span class="token punctuation">:</span> <span class="token header-value">127.0.0.1:3000</span></span>
<span class="token header"><span class="token header-name keyword">Content-Type</span><span class="token punctuation">:</span> <span class="token header-value">application/x-www-form-urlencoded</span></span>
<span class="token header"><span class="token header-name keyword">Cache-Control</span><span class="token punctuation">:</span> <span class="token header-value">no-cache</span></span>

nick=casper&amp;hello=world
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="ç½‘ç»œæœåŠ¡-https"><a href="#ç½‘ç»œæœåŠ¡-https" class="header-anchor">#</a> ç½‘ç»œæœåŠ¡ https</h2> <h3 id="æ¨¡å—æ¦‚è§ˆ"><a href="#æ¨¡å—æ¦‚è§ˆ" class="header-anchor">#</a> æ¨¡å—æ¦‚è§ˆ</h3> <p>è¿™ä¸ªæ¨¡å—çš„é‡è¦æ€§ï¼ŒåŸºæœ¬ä¸ç”¨å¼ºè°ƒäº†ã€‚åœ¨ç½‘ç»œå®‰å…¨é—®é¢˜æ—¥ç›Šä¸¥å³»çš„ä»Šå¤©ï¼Œç½‘ç«™é‡‡ç”¨HTTPSæ˜¯ä¸ªå¿…ç„¶çš„è¶‹åŠ¿ã€‚</p> <p>åœ¨nodejsä¸­ï¼Œæä¾›äº† https è¿™ä¸ªæ¨¡å—æ¥å®Œæˆ HTTPS ç›¸å…³åŠŸèƒ½ã€‚ä»å®˜æ–¹æ–‡æ¡£æ¥çœ‹ï¼Œè·Ÿ http æ¨¡å—ç”¨æ³•éå¸¸ç›¸ä¼¼ã€‚</p> <p>æœ¬æ–‡ä¸»è¦åŒ…å«ä¸¤éƒ¨åˆ†ï¼š</p> <ol><li>é€šè¿‡å®¢æˆ·ç«¯ã€æœåŠ¡ç«¯çš„ä¾‹å­ï¼Œå¯¹httpsæ¨¡å—è¿›è¡Œå…¥é—¨è®²è§£ã€‚</li> <li>å¦‚ä½•è®¿é—®å®‰å…¨è¯ä¹¦ä¸å—ä¿¡ä»»çš„ç½‘ç«™ã€‚ï¼ˆä»¥ 12306 ä¸ºä¾‹å­ï¼‰</li></ol> <p>ç¯‡å¹…æ‰€é™ï¼Œæœ¬æ–‡æ— æ³•å¯¹ HTTPSåè®® åŠ ç›¸å…³æŠ€æœ¯ä½“ç³» åšè¿‡å¤šè®²è§£ï¼Œæœ‰é—®é¢˜æ¬¢è¿ç•™è¨€äº¤æµã€‚</p> <h3 id="å®¢æˆ·ç«¯ä¾‹å­"><a href="#å®¢æˆ·ç«¯ä¾‹å­" class="header-anchor">#</a> å®¢æˆ·ç«¯ä¾‹å­</h3> <p>è·Ÿhttpæ¨¡å—çš„ç”¨æ³•éå¸¸åƒï¼Œåªä¸è¿‡è¯·æ±‚çš„åœ°å€æ˜¯httpsåè®®çš„è€Œå·²ï¼Œä»£ç å¦‚ä¸‹ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> https <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'https'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

https<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'https://www.baidu.com'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'status code: '</span> <span class="token operator">+</span> res<span class="token punctuation">.</span>statusCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'headers: '</span> <span class="token operator">+</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>headers<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    res<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        process<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="æœåŠ¡ç«¯ä¾‹å­"><a href="#æœåŠ¡ç«¯ä¾‹å­" class="header-anchor">#</a> æœåŠ¡ç«¯ä¾‹å­</h3> <p>å¯¹å¤–æä¾›HTTPSæœåŠ¡ï¼Œéœ€è¦æœ‰HTTPSè¯ä¹¦ã€‚å¦‚æœä½ å·²ç»æœ‰äº†HTTPSè¯ä¹¦ï¼Œé‚£ä¹ˆå¯ä»¥è·³è¿‡è¯ä¹¦ç”Ÿæˆçš„ç¯èŠ‚ã€‚å¦‚æœæ²¡æœ‰ï¼Œå¯ä»¥å‚è€ƒå¦‚ä¸‹æ­¥éª¤</p> <h4 id="ç”Ÿæˆè¯ä¹¦"><a href="#ç”Ÿæˆè¯ä¹¦" class="header-anchor">#</a> ç”Ÿæˆè¯ä¹¦</h4> <p><strong>1.åˆ›å»ºä¸ªç›®å½•å­˜æ”¾è¯ä¹¦ã€‚</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">mkdir</span> cert
<span class="token builtin class-name">cd</span> cert
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>2.ç”Ÿæˆç§é’¥ã€‚</strong></p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>openssl genrsa -out chyingp-key.pem 2048
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>3.ç”Ÿæˆè¯ä¹¦ç­¾åè¯·æ±‚ï¼ˆcsræ˜¯ Certificate Signing Requestçš„æ„æ€ï¼‰ã€‚</strong></p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>openssl req -new \
  -sha256
  -key chyingp-key.key.pem \
  -out chyingp-csr.pem \
  -subj &quot;/C=CN/ST=Guandong/L=Shenzhen/O=YH Inc/CN=www.chyingp.com&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>4.ç”Ÿæˆè¯ä¹¦ã€‚</strong></p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>openssl x509 \
  -req -in chyingp-csr.pem \
  -signkey chyingp-key.pem \
  -out chyingp-cert.pem
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="httpsæœåŠ¡ç«¯"><a href="#httpsæœåŠ¡ç«¯" class="header-anchor">#</a> HTTPSæœåŠ¡ç«¯</h4> <p>ä»£ç å¦‚ä¸‹ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> https <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'https'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">key</span><span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'./cert/chyingp-key.pem'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// ç§é’¥</span>
    <span class="token literal-property property">cert</span><span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'./cert/chyingp-cert.pem'</span><span class="token punctuation">)</span> <span class="token comment">// è¯ä¹¦</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> server <span class="token operator">=</span> https<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span>options<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'è¿™æ˜¯æ¥è‡ªHTTPSæœåŠ¡å™¨çš„è¿”å›'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>ç”±äºæˆ‘å¹¶æ²¡æœ‰ www.chyingp.com è¿™ä¸ªåŸŸåï¼Œäºæ˜¯å…ˆé…ç½®æœ¬åœ°host</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>127.0.0.1 www.chyingp.com
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>å¯åŠ¨æœåŠ¡ï¼Œå¹¶åœ¨æµè§ˆå™¨é‡Œè®¿é—® <a href="http://www.chyingp.com:3000/" target="_blank" rel="noopener noreferrer">http://www.chyingp.com:3000<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚æ³¨æ„ï¼Œæµè§ˆå™¨ä¼šæç¤ºä½ è¯ä¹¦ä¸å¯é ï¼Œç‚¹å‡» ä¿¡ä»»å¹¶ç»§ç»­è®¿é—® å°±è¡Œäº†ã€‚</p> <h2 id="url-æ¥å£-ä»£æ›¿å†…ç½®æ¨¡å—urlä½¿ç”¨"><a href="#url-æ¥å£-ä»£æ›¿å†…ç½®æ¨¡å—urlä½¿ç”¨" class="header-anchor">#</a> URL æ¥å£(ä»£æ›¿å†…ç½®æ¨¡å—urlä½¿ç”¨)</h2> <blockquote><p>nodejså†…ç½®æ¨¡å—<code>url</code>æœ‰äº›æ–¹æ³•è¦è¢«åºŸå¼ƒï¼Œæˆ‘ä»¬ä½¿ç”¨<code>URLç±»</code>ä»£æ›¿</p></blockquote> <p>æµè§ˆå™¨åŸç”Ÿæä¾›<code>URL()</code>æ¥å£ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œç”¨æ¥æ„é€ ã€è§£æå’Œç¼–ç  URLã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œé€šè¿‡<code>window.URL</code>å¯ä»¥æ‹¿åˆ°è¿™ä¸ªæ„é€ å‡½æ•°ã€‚</p> <h3 id="_7-1-å¯¹æ¯”urlæ¨¡å—å’Œurlç±»"><a href="#_7-1-å¯¹æ¯”urlæ¨¡å—å’Œurlç±»" class="header-anchor">#</a> 7.1 å¯¹æ¯”<code>urlæ¨¡å—</code>å’ŒURLç±»</h3> <table><thead><tr><th>å±æ€§</th> <th>urlæ¨¡å—</th> <th>URLç±»</th></tr></thead> <tbody><tr><td>protocol</td> <td><code>âœ…</code></td> <td><code>âœ…</code></td></tr> <tr><td>host</td> <td><code>âœ…</code></td> <td><code>âœ…</code></td></tr> <tr><td>port</td> <td><code>âœ…</code></td> <td><code>âœ…</code></td></tr> <tr><td>hostname</td> <td><code>âœ…</code></td> <td><code>âœ…</code></td></tr> <tr><td>search</td> <td><code>âœ…</code></td> <td><code>âœ…</code></td></tr> <tr><td>query</td> <td><code>âœ…</code></td> <td><code>-</code></td></tr> <tr><td>path</td> <td><code>âœ…</code></td> <td><code>-</code></td></tr> <tr><td>pathname</td> <td><code>âœ…</code></td> <td><code>âœ…</code></td></tr> <tr><td>href</td> <td><code>âœ…</code></td> <td><code>âœ…</code></td></tr> <tr><td>hash</td> <td><code>âœ…</code></td> <td><code>âœ…</code></td></tr> <tr><td>origin</td> <td>-</td> <td><code>âœ…</code></td></tr></tbody></table> <p>å¯ä»¥çœ‹å‡ºæ¥ï¼Œåªæœ‰ä¸‰ä¸ªå­—æ®µä¸åŒï¼Œåˆ†åˆ«æ˜¯<code>query</code>,<code>path</code>,<code>origin</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>æ‰“å°ä¸¤ä¸ªå¯¹è±¡çš„è¾“å‡º

<span class="token comment">// urlæ¨¡å—ï¼Œurl.parse('link')</span>
<span class="token punctuation">{</span>
  <span class="token literal-property property">protocol</span><span class="token operator">:</span> <span class="token string">'https:'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">slashes</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">auth</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">'m.shop.com'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  <span class="token literal-property property">hostname</span><span class="token operator">:</span> <span class="token string">'m.shop.com'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">hash</span><span class="token operator">:</span> <span class="token string">'#detail'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">search</span><span class="token operator">:</span> <span class="token string">'?id=4433&amp;name=%E6%9D%8E%E5%A4%87&amp;directCompanyId=&amp;mobile=18951431099'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token string">'id=4433&amp;name=%E6%9D%8E%E5%A4%87&amp;directCompanyId=&amp;mobile=18951431099'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">pathname</span><span class="token operator">:</span> <span class="token string">'/home/share'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/home/share?id=4433&amp;name=%E6%9D%8E%E5%A4%87&amp;directCompanyId=&amp;mobile=18951431099'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">href</span><span class="token operator">:</span> <span class="token string">'https://m.shop.com/home/share?id=4433&amp;name=%E6%9D%8E%E5%A4%87&amp;directCompanyId=&amp;mobile=18951431099#detail'</span>
<span class="token punctuation">}</span>
<span class="token comment">// new URL()</span>
<span class="token punctuation">{</span>
  <span class="token literal-property property">href</span><span class="token operator">:</span> <span class="token string">'https://m.shop.com/home/share?id=4433&amp;name=%E6%9D%8E%E5%A4%87&amp;directCompanyId=&amp;mobile=18951431099#detail'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">origin</span><span class="token operator">:</span> <span class="token string">'https://m.shop.com'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">protocol</span><span class="token operator">:</span> <span class="token string">'https:'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
  <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
  <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">'m.shop.com'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">hostname</span><span class="token operator">:</span> <span class="token string">'m.shop.com'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
  <span class="token literal-property property">pathname</span><span class="token operator">:</span> <span class="token string">'/home/share'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">search</span><span class="token operator">:</span> <span class="token string">'?id=4433&amp;name=%E6%9D%8E%E5%A4%87&amp;directCompanyId=&amp;mobile=18951431099'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">searchParams</span><span class="token operator">:</span> URLSearchParams <span class="token punctuation">{</span>
    <span class="token string">'id'</span> <span class="token operator">=&gt;</span> <span class="token string">'4433'</span><span class="token punctuation">,</span>
    <span class="token string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string">'æå¤‡'</span><span class="token punctuation">,</span>
    <span class="token string">'directCompanyId'</span> <span class="token operator">=&gt;</span> <span class="token string">''</span><span class="token punctuation">,</span>
    <span class="token string">'mobile'</span> <span class="token operator">=&gt;</span> <span class="token string">'18951431099'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">hash</span><span class="token operator">:</span> <span class="token string">'#detail'</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><h3 id="æ„é€ å‡½æ•°"><a href="#æ„é€ å‡½æ•°" class="header-anchor">#</a> æ„é€ å‡½æ•°</h3> <p><code>URL()</code>ä½œä¸ºæ„é€ å‡½æ•°ï¼Œå¯ä»¥ç”Ÿæˆ URL å®ä¾‹ã€‚å®ƒæ¥å—ä¸€ä¸ªè¡¨ç¤º URL çš„å­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ã€‚å¦‚æœå‚æ•°ä¸æ˜¯åˆæ³•çš„ URLï¼Œä¼šæŠ¥é”™ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">'http://www.example.com/index.html'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
url<span class="token punctuation">.</span>href
<span class="token comment">// &quot;http://www.example.com/index.html&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ä¸Šé¢ç¤ºä¾‹ç”Ÿæˆäº†ä¸€ä¸ª URL å®ä¾‹ï¼Œç”¨æ¥ä»£è¡¨æŒ‡å®šçš„ç½‘å€ã€‚</p> <p>é™¤äº†å­—ç¬¦ä¸²ï¼Œ<code>URL()</code>çš„å‚æ•°ä¹Ÿå¯ä»¥æ˜¯å¦ä¸€ä¸ª URL å®ä¾‹ã€‚è¿™æ—¶ï¼Œ<code>URL()</code>ä¼šè‡ªåŠ¨è¯»å–è¯¥å®ä¾‹çš„<code>href</code>å±æ€§ï¼Œä½œä¸ºå®é™…å‚æ•°ã€‚</p> <p>å¦‚æœ URL å­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªç›¸å¯¹è·¯å¾„ï¼Œé‚£ä¹ˆéœ€è¦è¡¨ç¤ºç»å¯¹è·¯å¾„çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œä½œä¸ºè®¡ç®—åŸºå‡†ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> url1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">'index.html'</span><span class="token punctuation">,</span> <span class="token string">'http://example.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
url1<span class="token punctuation">.</span>href
<span class="token comment">// &quot;http://example.com/index.html&quot;</span>

<span class="token keyword">var</span> url2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">'page2.html'</span><span class="token punctuation">,</span> <span class="token string">'http://example.com/page1.html'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
url2<span class="token punctuation">.</span>href
<span class="token comment">// &quot;http://example.com/page2.html&quot;</span>

<span class="token keyword">var</span> url3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">'..'</span><span class="token punctuation">,</span> <span class="token string">'http://example.com/a/b.html'</span><span class="token punctuation">)</span>
url3<span class="token punctuation">.</span>href
<span class="token comment">// &quot;http://example.com/&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œè¿”å›çš„ URL å®ä¾‹çš„è·¯å¾„éƒ½æ˜¯åœ¨ç¬¬äºŒä¸ªå‚æ•°çš„åŸºç¡€ä¸Šï¼Œåˆ‡æ¢åˆ°ç¬¬ä¸€ä¸ªå‚æ•°å¾—åˆ°çš„ã€‚æœ€åä¸€ä¸ªä¾‹å­é‡Œé¢ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯<code>..</code>ï¼Œè¡¨ç¤ºä¸Šå±‚è·¯å¾„ã€‚</p> <h3 id="å®ä¾‹å±æ€§"><a href="#å®ä¾‹å±æ€§" class="header-anchor">#</a> å®ä¾‹å±æ€§</h3> <p>URL å®ä¾‹çš„å±æ€§ä¸<code>Location</code>å¯¹è±¡çš„å±æ€§åŸºæœ¬ä¸€è‡´ï¼Œè¿”å›å½“å‰ URL çš„ä¿¡æ¯ã€‚</p> <ul><li>URL.hrefï¼šè¿”å›æ•´ä¸ª URL</li> <li>URL.protocolï¼šè¿”å›åè®®ï¼Œä»¥å†’å·<code>:</code>ç»“å°¾</li> <li>URL.hostnameï¼šè¿”å›åŸŸå</li> <li>URL.hostï¼šè¿”å›åŸŸåä¸ç«¯å£ï¼ŒåŒ…å«<code>:</code>å·ï¼Œé»˜è®¤çš„80å’Œ443ç«¯å£ä¼šçœç•¥</li> <li>URL.portï¼šè¿”å›ç«¯å£</li> <li>URL.originï¼šè¿”å›åè®®ã€åŸŸåå’Œç«¯å£</li> <li>URL.pathnameï¼šè¿”å›è·¯å¾„ï¼Œä»¥æ–œæ <code>/</code>å¼€å¤´</li> <li>URL.searchï¼šè¿”å›æŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œä»¥é—®å·<code>?</code>å¼€å¤´</li> <li>URL.searchParamsï¼šè¿”å›ä¸€ä¸ª<code>URLSearchParams</code>å®ä¾‹ï¼Œè¯¥å±æ€§æ˜¯<code>Location</code>å¯¹è±¡æ²¡æœ‰çš„</li> <li>URL.hashï¼šè¿”å›ç‰‡æ®µè¯†åˆ«ç¬¦ï¼Œä»¥äº•å·<code>#</code>å¼€å¤´</li> <li>URL.passwordï¼šè¿”å›åŸŸåå‰é¢çš„å¯†ç </li> <li>URL.usernameï¼šè¿”å›åŸŸåå‰é¢çš„ç”¨æˆ·å</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">'http://user:passwd@www.example.com:4097/path/a.html?x=111#part1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

url<span class="token punctuation">.</span>href
<span class="token comment">// &quot;http://user:passwd@www.example.com:4097/path/a.html?x=111#part1&quot;</span>
url<span class="token punctuation">.</span>protocol
<span class="token comment">// &quot;http:&quot;</span>
url<span class="token punctuation">.</span>hostname
<span class="token comment">// &quot;www.example.com&quot;</span>
url<span class="token punctuation">.</span>host
<span class="token comment">// &quot;www.example.com:4097&quot;</span>
url<span class="token punctuation">.</span>port
<span class="token comment">// &quot;4097&quot;</span>
url<span class="token punctuation">.</span>origin
<span class="token comment">// &quot;http://www.example.com:4097&quot;</span>
url<span class="token punctuation">.</span>pathname
<span class="token comment">// &quot;/path/a.html&quot;</span>
url<span class="token punctuation">.</span>search
<span class="token comment">// &quot;?x=111&quot;</span>
url<span class="token punctuation">.</span>searchParams
<span class="token comment">// URLSearchParams {}</span>
url<span class="token punctuation">.</span>hash
<span class="token comment">// &quot;#part1&quot;</span>
url<span class="token punctuation">.</span>password
<span class="token comment">// &quot;passwd&quot;</span>
url<span class="token punctuation">.</span>username
<span class="token comment">// &quot;user&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>è¿™äº›å±æ€§é‡Œé¢ï¼Œåªæœ‰<code>origin</code>å±æ€§æ˜¯åªè¯»çš„ï¼Œå…¶ä»–å±æ€§éƒ½å¯å†™ï¼Œå¹¶ä¸”ä¼šç«‹å³ç”Ÿæ•ˆã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">'http://example.com/index.html#part1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

url<span class="token punctuation">.</span>pathname <span class="token operator">=</span> <span class="token string">'index2.html'</span><span class="token punctuation">;</span>
url<span class="token punctuation">.</span>href <span class="token comment">// &quot;http://example.com/index2.html#part1&quot;</span>

url<span class="token punctuation">.</span>hash <span class="token operator">=</span> <span class="token string">'#part2'</span><span class="token punctuation">;</span>
url<span class="token punctuation">.</span>href <span class="token comment">// &quot;http://example.com/index2.html#part2&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ”¹å˜ URL å®ä¾‹çš„<code>pathname</code>å±æ€§å’Œ<code>hash</code>å±æ€§ï¼Œéƒ½ä¼šå®æ—¶åæ˜ åœ¨ URL å®ä¾‹å½“ä¸­ã€‚</p> <h2 id="urlsearchparams-å¯¹è±¡-ä»£æ›¿å†…ç½®æ¨¡å—querystringä½¿ç”¨"><a href="#urlsearchparams-å¯¹è±¡-ä»£æ›¿å†…ç½®æ¨¡å—querystringä½¿ç”¨" class="header-anchor">#</a> URLSearchParams å¯¹è±¡(ä»£æ›¿å†…ç½®æ¨¡å—querystringä½¿ç”¨)</h2> <blockquote><ol><li><p>nodejså†…ç½®æ¨¡å—<code>querystring</code>æœ‰äº›æ–¹æ³•è¦è¢«åºŸå¼ƒï¼Œæˆ‘ä»¬ä½¿ç”¨<code>URLSearchParams API</code>æ„é€ ä»£æ›¿</p></li> <li><p>å¦‚æœä½ çš„nodejsç‰ˆæœ¬å¤§äº18ï¼Œå¯ä»¥ä½¿ç”¨<code>const querystring= require('node:querystring')</code>
``querystring<code>æ¯”</code>URLSearchParams<code>æ€§èƒ½æ›´é«˜ï¼Œä½†ä¸æ˜¯ æ ‡å‡†åŒ–çš„ APIã€‚ä½¿ç”¨</code>URLSearchParams`å½“æ€§èƒ½ä¸é‡è¦æˆ– å½“éœ€è¦ä¸æµè§ˆå™¨ä»£ç å…¼å®¹æ—¶ã€‚</p></li> <li><p>è¿˜å¯ä»¥å®‰è£…<code>qs</code>æ¨¡å—ï¼Œä½¿ç”¨æ–¹å¼å’Œ<code>querystring</code>ä¸€æ ·</p></li></ol></blockquote> <h3 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="header-anchor">#</a> æ¦‚è¿°</h3> <p><code>URLSearchParams</code>å¯¹è±¡æ˜¯æµè§ˆå™¨çš„åŸç”Ÿå¯¹è±¡ï¼Œç”¨æ¥æ„é€ ã€è§£æå’Œå¤„ç† URL çš„æŸ¥è¯¢å­—ç¬¦ä¸²ï¼ˆå³ URL é—®å·åé¢çš„éƒ¨åˆ†ï¼‰ã€‚</p> <p>å®ƒæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå¯ä»¥ç”Ÿæˆå®ä¾‹ã€‚å‚æ•°å¯ä»¥ä¸ºæŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œèµ·é¦–çš„é—®å·<code>?</code>æœ‰æ²¡æœ‰éƒ½è¡Œï¼Œä¹Ÿå¯ä»¥æ˜¯å¯¹åº”æŸ¥è¯¢å­—ç¬¦ä¸²çš„æ•°ç»„æˆ–å¯¹è±¡ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// æ–¹æ³•ä¸€ï¼šä¼ å…¥å­—ç¬¦ä¸²</span>
<span class="token keyword">var</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span><span class="token string">'?foo=1&amp;bar=2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ç­‰åŒäº</span>
<span class="token keyword">var</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>location<span class="token punctuation">.</span>search<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// æ–¹æ³•äºŒï¼šä¼ å…¥æ•°ç»„</span>
<span class="token keyword">var</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// æ–¹æ³•ä¸‰ï¼šä¼ å…¥å¯¹è±¡</span>
<span class="token keyword">var</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">'foo'</span> <span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">,</span> <span class="token string-property property">'bar'</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><code>URLSearchParams</code>ä¼šå¯¹æŸ¥è¯¢å­—ç¬¦ä¸²è‡ªåŠ¨ç¼–ç ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">'foo'</span><span class="token operator">:</span> <span class="token string">'ä½ å¥½'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
params<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;foo=%E4%BD%A0%E5%A5%BD&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>foo</code>çš„å€¼æ˜¯æ±‰å­—ï¼Œ<code>URLSearchParams</code>å¯¹å…¶è‡ªåŠ¨è¿›è¡Œ URL ç¼–ç ã€‚</p> <p>æµè§ˆå™¨å‘æœåŠ¡å™¨å‘é€è¡¨å•æ•°æ®æ—¶ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨<code>URLSearchParams</code>å®ä¾‹ä½œä¸ºè¡¨å•æ•°æ®ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">bar</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'https://example.com/api'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">body</span><span class="token operator">:</span> params
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>fetch</code>å‘½ä»¤å‘æœåŠ¡å™¨å‘é€å‘½ä»¤æ—¶ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨<code>URLSearchParams</code>å®ä¾‹ã€‚</p> <p><code>URLSearchParams</code>å¯ä»¥ä¸<code>URL()</code>æ¥å£ç»“åˆä½¿ç”¨ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>location<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> foo <span class="token operator">=</span> url<span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">'somedefault'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼ŒURL å®ä¾‹çš„<code>searchParams</code>å±æ€§å°±æ˜¯ä¸€ä¸ª<code>URLSearchParams</code>å®ä¾‹ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨<code>URLSearchParams</code>æ¥å£çš„<code>get</code>æ–¹æ³•ã€‚</p> <p><code>URLSearchParams</code>å®ä¾‹æœ‰éå†å™¨æ¥å£ï¼Œå¯ä»¥ç”¨<code>for...of</code>å¾ªç¯éå†ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">'foo'</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">,</span> <span class="token string-property property">'bar'</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> p <span class="token keyword">of</span> params<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">': '</span> <span class="token operator">+</span> p<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// foo: 1</span>
<span class="token comment">// bar: 2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><code>URLSearchParams</code>æ²¡æœ‰å®ä¾‹å±æ€§ï¼Œåªæœ‰å®ä¾‹æ–¹æ³•ã€‚</p> <h3 id="urlsearchparams-tostring"><a href="#urlsearchparams-tostring" class="header-anchor">#</a> URLSearchParams.toString()</h3> <p><code>toString</code>æ–¹æ³•è¿”å›å®ä¾‹çš„å­—ç¬¦ä¸²å½¢å¼ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">'https://example.com?foo=1&amp;bar=2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span>url<span class="token punctuation">.</span>search<span class="token punctuation">)</span><span class="token punctuation">;</span>

params<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;foo=1&amp;bar=2'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>é‚£ä¹ˆéœ€è¦å­—ç¬¦ä¸²çš„åœºåˆï¼Œä¼šè‡ªåŠ¨è°ƒç”¨<code>toString</code>æ–¹æ³•ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">version</span><span class="token operator">:</span> <span class="token number">2.0</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span> location<span class="token punctuation">.</span>pathname <span class="token operator">+</span> <span class="token string">'?'</span> <span class="token operator">+</span> params<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>location.href</code>èµ‹å€¼æ—¶ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨<code>params</code>å¯¹è±¡ã€‚è¿™æ—¶å°±ä¼šè‡ªåŠ¨è°ƒç”¨<code>toString</code>æ–¹æ³•ã€‚</p> <h3 id="urlsearchparams-has"><a href="#urlsearchparams-has" class="header-anchor">#</a> URLSearchParams.has()</h3> <p><code>has()</code>æ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæŸ¥è¯¢å­—ç¬¦ä¸²æ˜¯å¦åŒ…å«æŒ‡å®šçš„é”®åã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">'foo'</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">,</span> <span class="token string-property property">'bar'</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
params<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
params<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token string">'baz'</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="urlsearchparams-get-urlsearchparams-getall"><a href="#urlsearchparams-get-urlsearchparams-getall" class="header-anchor">#</a> URLSearchParams.get()ï¼ŒURLSearchParams.getAll()</h3> <p><code>get()</code>æ–¹æ³•ç”¨æ¥è¯»å–æŸ¥è¯¢å­—ç¬¦ä¸²é‡Œé¢çš„æŒ‡å®šé”®ã€‚å®ƒæ¥å—é”®åä½œä¸ºå‚æ•°ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span><span class="token string">'?foo=1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
params<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span> <span class="token comment">// &quot;1&quot;</span>
params<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span> <span class="token comment">// null</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ä¸¤ä¸ªåœ°æ–¹éœ€è¦æ³¨æ„ã€‚ç¬¬ä¸€ï¼Œå®ƒè¿”å›çš„æ˜¯å­—ç¬¦ä¸²ï¼Œå¦‚æœåŸå§‹å€¼æ˜¯æ•°å€¼ï¼Œéœ€è¦è½¬ä¸€ä¸‹ç±»å‹ï¼›ç¬¬äºŒï¼Œå¦‚æœæŒ‡å®šçš„é”®åä¸å­˜åœ¨ï¼Œè¿”å›å€¼æ˜¯<code>null</code>ã€‚</p> <p>å¦‚æœæœ‰å¤šä¸ªçš„åŒåé”®ï¼Œ<code>get</code>è¿”å›ä½ç½®æœ€å‰é¢çš„é‚£ä¸ªé”®å€¼ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span><span class="token string">'?foo=3&amp;foo=2&amp;foo=1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
params<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span> <span class="token comment">// &quot;3&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼ŒæŸ¥è¯¢å­—ç¬¦ä¸²æœ‰ä¸‰ä¸ª<code>foo</code>é”®ï¼Œ<code>get</code>æ–¹æ³•è¿”å›æœ€å‰é¢çš„é”®å€¼<code>3</code>ã€‚</p> <p><code>getAll()</code>æ–¹æ³•è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯æŒ‡å®šé”®çš„æ‰€æœ‰é”®å€¼ã€‚å®ƒæ¥å—é”®åä½œä¸ºå‚æ•°ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span><span class="token string">'?foo=1&amp;foo=2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
params<span class="token punctuation">.</span><span class="token function">getAll</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span> <span class="token comment">// [&quot;1&quot;, &quot;2&quot;]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼ŒæŸ¥è¯¢å­—ç¬¦ä¸²æœ‰ä¸¤ä¸ª<code>foo</code>é”®ï¼Œ<code>getAll</code>è¿”å›çš„æ•°ç»„å°±æœ‰ä¸¤ä¸ªæˆå‘˜ã€‚</p> <h3 id="urlsearchparams-keys-urlsearchparams-values-urlsearchparams-entries"><a href="#urlsearchparams-keys-urlsearchparams-values-urlsearchparams-entries" class="header-anchor">#</a> URLSearchParams.keys()ï¼ŒURLSearchParams.values()ï¼ŒURLSearchParams.entries()</h3> <p>è¿™ä¸‰ä¸ªæ–¹æ³•éƒ½è¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œä¾›<code>for...of</code>å¾ªç¯éå†ã€‚å®ƒä»¬çš„åŒºåˆ«åœ¨äºï¼Œ<code>keys</code>æ–¹æ³•è¿”å›çš„æ˜¯é”®åçš„éå†å™¨ï¼Œ<code>values</code>æ–¹æ³•è¿”å›çš„æ˜¯é”®å€¼çš„éå†å™¨ï¼Œ<code>entries</code>è¿”å›çš„æ˜¯é”®å€¼å¯¹çš„éå†å™¨ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span><span class="token string">'a=1&amp;b=2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> p <span class="token keyword">of</span> params<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// a</span>
<span class="token comment">// b</span>

<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> p <span class="token keyword">of</span> params<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 1</span>
<span class="token comment">// 2</span>

<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> p <span class="token keyword">of</span> params<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// [&quot;a&quot;, &quot;1&quot;]</span>
<span class="token comment">// [&quot;b&quot;, &quot;2&quot;]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>å¦‚æœç›´æ¥å¯¹<code>URLSearchParams</code>è¿›è¡Œéå†ï¼Œå…¶å®å†…éƒ¨è°ƒç”¨çš„å°±æ˜¯<code>entries</code>æ¥å£ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> p <span class="token keyword">of</span> params<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">// ç­‰åŒäº</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> p <span class="token keyword">of</span> params<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="qsæ¨¡å—"><a href="#qsæ¨¡å—" class="header-anchor">#</a> qsæ¨¡å—</h2> <p>qsæ˜¯ä¸€ä¸ªnpmä»“åº“æ‰€ç®¡ç†çš„åŒ…,å¯é€šè¿‡npm install qså‘½ä»¤è¿›è¡Œå®‰è£….</p> <ol><li>qs.parse()å°†URLè§£ææˆå¯¹è±¡çš„å½¢å¼</li> <li>qs.stringify()å°†å¯¹è±¡ åºåˆ—åŒ–æˆURLçš„å½¢å¼ï¼Œä»¥&amp;è¿›è¡Œæ‹¼æ¥</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> qs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'qs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token number">1</span><span class="token punctuation">.</span>qs<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">&quot;username='admin'&amp;password='123456'&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>qs<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// Object { username: &quot;admin&quot;, password: &quot;123456&quot; }</span>

<span class="token number">2</span><span class="token punctuation">.</span>qs<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> qs<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">'admin'</span><span class="token punctuation">,</span> <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">'123456'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// username=admin&amp;password=123456</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>qs<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">)</span> å’Œ<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>æœ‰ä»€ä¹ˆåŒºåˆ«<span class="token operator">?</span>

<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'hehe'</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
qs<span class="token punctuation">.</span>stringifyåºåˆ—åŒ–ç»“æœå¦‚
name<span class="token operator">=</span>hehe<span class="token operator">&amp;</span>age<span class="token operator">=</span><span class="token number">10</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
è€Œ<span class="token constant">JSON</span><span class="token punctuation">.</span>stringifyåºåˆ—åŒ–ç»“æœå¦‚ä¸‹ï¼š
<span class="token string">&quot;{&quot;</span>a<span class="token string">&quot;:&quot;</span>hehe<span class="token string">&quot;,&quot;</span>age<span class="token string">&quot;:10}&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/Aismy/aismy.github.io/edit/master/docs/05.å‰ç«¯æŠ€æœ¯/01.node.js/05 ã€nodejså†…ç½®æ¨¡å—ï¼ˆä¸Šï¼‰ã€‘.md" target="_blank" rel="noopener noreferrer">åœ¨çº¿ç¼–è¾‘æ­¤æ–‡ç« </a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <!----></div> <div class="page-nav-wapper"><!----> <!----></div></div> <!----></main></div> <div class="footer"><div class="icons"><a href="mailto:752704491@qq.com" title="å‘é‚®ä»¶" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/Aismy" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="æœ¬ç«™ä¸»é¢˜">Vdoing</a> 
    | Copyright Â© 2022-2023
    <span>Aismy | MIT License</span></div> <div class="buttons"><div title="è¿”å›é¡¶éƒ¨" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="å»è¯„è®º" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="ä¸»é¢˜æ¨¡å¼" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          è·Ÿéšç³»ç»Ÿ
        </li><li class="iconfont icon-rijianmoshi">
          æµ…è‰²æ¨¡å¼
        </li><li class="iconfont icon-yejianmoshi">
          æ·±è‰²æ¨¡å¼
        </li><li class="iconfont icon-yuedu">
          é˜…è¯»æ¨¡å¼
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.b738e2cf.js" defer></script><script src="/assets/js/2.ffb45a81.js" defer></script><script src="/assets/js/37.a549e9e3.js" defer></script>
  </body>
</html>
