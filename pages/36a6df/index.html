<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>SpringCloud | Aismy&#39;Docs</title>
    <meta name="generator" content="VuePress 1.9.2">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="Aismy&#39;Docs">
    <meta name="keywords" content="vuepress,theme,blog,vdoing">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.906cd319.css" as="style"><link rel="preload" href="/assets/js/app.b738e2cf.js" as="script"><link rel="preload" href="/assets/js/2.ffb45a81.js" as="script"><link rel="preload" href="/assets/js/29.aa305b1a.js" as="script"><link rel="prefetch" href="/assets/js/10.c2e0087a.js"><link rel="prefetch" href="/assets/js/11.515afe89.js"><link rel="prefetch" href="/assets/js/12.fab2a176.js"><link rel="prefetch" href="/assets/js/13.001935e7.js"><link rel="prefetch" href="/assets/js/14.b80dbf2e.js"><link rel="prefetch" href="/assets/js/15.1b1059f6.js"><link rel="prefetch" href="/assets/js/16.fcd1537c.js"><link rel="prefetch" href="/assets/js/17.9df6cc33.js"><link rel="prefetch" href="/assets/js/18.bd3b4e60.js"><link rel="prefetch" href="/assets/js/19.c0b3ce9a.js"><link rel="prefetch" href="/assets/js/20.546547fb.js"><link rel="prefetch" href="/assets/js/21.0692e109.js"><link rel="prefetch" href="/assets/js/22.941054f1.js"><link rel="prefetch" href="/assets/js/23.6a79feac.js"><link rel="prefetch" href="/assets/js/24.d7b40265.js"><link rel="prefetch" href="/assets/js/25.2f068444.js"><link rel="prefetch" href="/assets/js/26.39e773a6.js"><link rel="prefetch" href="/assets/js/27.0cc11d71.js"><link rel="prefetch" href="/assets/js/28.6e0bab80.js"><link rel="prefetch" href="/assets/js/3.166f9e48.js"><link rel="prefetch" href="/assets/js/30.a9437cbd.js"><link rel="prefetch" href="/assets/js/31.d2300f1b.js"><link rel="prefetch" href="/assets/js/32.30060633.js"><link rel="prefetch" href="/assets/js/33.ddd9f9e8.js"><link rel="prefetch" href="/assets/js/34.102c62c1.js"><link rel="prefetch" href="/assets/js/35.da833d69.js"><link rel="prefetch" href="/assets/js/36.b4b83ef9.js"><link rel="prefetch" href="/assets/js/37.a549e9e3.js"><link rel="prefetch" href="/assets/js/38.e84bf93e.js"><link rel="prefetch" href="/assets/js/39.145b375f.js"><link rel="prefetch" href="/assets/js/4.2988106a.js"><link rel="prefetch" href="/assets/js/40.246cd152.js"><link rel="prefetch" href="/assets/js/41.530026b3.js"><link rel="prefetch" href="/assets/js/42.24a60b39.js"><link rel="prefetch" href="/assets/js/43.902a7b0b.js"><link rel="prefetch" href="/assets/js/44.4f8c78f2.js"><link rel="prefetch" href="/assets/js/5.58eac4fd.js"><link rel="prefetch" href="/assets/js/6.d50e78bb.js"><link rel="prefetch" href="/assets/js/7.977fe42a.js"><link rel="prefetch" href="/assets/js/8.289b9caf.js"><link rel="prefetch" href="/assets/js/9.6a3fba9d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.906cd319.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="ç›®å½•" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="Aismy'Docs" class="logo"> <span class="site-name can-hide">Aismy'Docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><a href="https://www.aismy.top" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ğŸ“•åšå®¢
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸµJava SE" class="dropdown-title"><a href="/pages/389d93/" class="link-title">ğŸµJava SE</a> <span class="title" style="display:none;">ğŸµJava SE</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/389d93/" class="nav-link">JavaåŸºç¡€</a></li><li class="dropdown-item"><!----> <a href="/pages/aab896/" class="nav-link">é›†åˆ</a></li><li class="dropdown-item"><!----> <a href="/pages/d2a30d/" class="nav-link">IOæµ</a></li><li class="dropdown-item"><!----> <a href="/pages/780f7d/" class="nav-link">æ³¨è§£å’Œåå°„</a></li><li class="dropdown-item"><!----> <a href="/pages/8d2bfc/" class="nav-link">å¹¶å‘ç¼–ç¨‹</a></li><li class="dropdown-item"><!----> <a href="/pages/e9d599/" class="nav-link">JVM</a></li><li class="dropdown-item"><!----> <a href="/pages/467393/" class="nav-link">æ–°ç‰¹æ€§</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸŒ´æ•°æ®åº“" class="dropdown-title"><a href="/pages/142be7/" class="link-title">ğŸŒ´æ•°æ®åº“</a> <span class="title" style="display:none;">ğŸŒ´æ•°æ®åº“</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/142be7/" class="nav-link">Mysql</a></li><li class="dropdown-item"><!----> <a href="/pages/1ce2e2/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/pages/62a615/" class="nav-link">ElasticSearch</a></li></ul></div></div><div class="nav-item"><a href="/pages/1b02d4/" class="nav-link">ğŸš€åç«¯æ¡†æ¶</a></div><div class="nav-item"><a href="/pages/1fe252/" class="nav-link">ğŸš€å‰ç«¯æŠ€æœ¯</a></div><div class="nav-item"><a href="/pages/83c955/" class="nav-link">ğŸ› ï¸å¼€å‘å·¥å…·</a></div> <a href="https://github.com/Aismy/aismy.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><a href="https://www.aismy.top" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ğŸ“•åšå®¢
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸµJava SE" class="dropdown-title"><a href="/pages/389d93/" class="link-title">ğŸµJava SE</a> <span class="title" style="display:none;">ğŸµJava SE</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/389d93/" class="nav-link">JavaåŸºç¡€</a></li><li class="dropdown-item"><!----> <a href="/pages/aab896/" class="nav-link">é›†åˆ</a></li><li class="dropdown-item"><!----> <a href="/pages/d2a30d/" class="nav-link">IOæµ</a></li><li class="dropdown-item"><!----> <a href="/pages/780f7d/" class="nav-link">æ³¨è§£å’Œåå°„</a></li><li class="dropdown-item"><!----> <a href="/pages/8d2bfc/" class="nav-link">å¹¶å‘ç¼–ç¨‹</a></li><li class="dropdown-item"><!----> <a href="/pages/e9d599/" class="nav-link">JVM</a></li><li class="dropdown-item"><!----> <a href="/pages/467393/" class="nav-link">æ–°ç‰¹æ€§</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸŒ´æ•°æ®åº“" class="dropdown-title"><a href="/pages/142be7/" class="link-title">ğŸŒ´æ•°æ®åº“</a> <span class="title" style="display:none;">ğŸŒ´æ•°æ®åº“</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/142be7/" class="nav-link">Mysql</a></li><li class="dropdown-item"><!----> <a href="/pages/1ce2e2/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/pages/62a615/" class="nav-link">ElasticSearch</a></li></ul></div></div><div class="nav-item"><a href="/pages/1b02d4/" class="nav-link">ğŸš€åç«¯æ¡†æ¶</a></div><div class="nav-item"><a href="/pages/1fe252/" class="nav-link">ğŸš€å‰ç«¯æŠ€æœ¯</a></div><div class="nav-item"><a href="/pages/83c955/" class="nav-link">ğŸ› ï¸å¼€å‘å·¥å…·</a></div> <a href="https://github.com/Aismy/aismy.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Spring</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SpringBoot</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>SpringCloud</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/36a6df/" aria-current="page" class="active sidebar-link">SpringCloud</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/36a6df/#springcloudå’Œspringbootç‰ˆæœ¬å¯¹åº”å…³ç³»" class="sidebar-link">SpringCloudå’ŒSpringBootç‰ˆæœ¬å¯¹åº”å…³ç³»</a></li><li class="sidebar-sub-header level2"><a href="/pages/36a6df/#ç›¸å…³ç»„ä»¶" class="sidebar-link">ç›¸å…³ç»„ä»¶</a></li><li class="sidebar-sub-header level2"><a href="/pages/36a6df/#resttemplate" class="sidebar-link">RestTemplate</a></li><li class="sidebar-sub-header level2"><a href="/pages/36a6df/#eurekaåŸºç¡€çŸ¥è¯†" class="sidebar-link">EurekaåŸºç¡€çŸ¥è¯†</a></li><li class="sidebar-sub-header level2"><a href="/pages/36a6df/#å•æœºeurekaæ„å»ºæ­¥éª¤" class="sidebar-link">å•æœºEurekaæ„å»ºæ­¥éª¤</a></li><li class="sidebar-sub-header level2"><a href="/pages/36a6df/#eurekaé›†ç¾¤æ­å»º" class="sidebar-link">Eurekaé›†ç¾¤æ­å»º</a></li><li class="sidebar-sub-header level2"><a href="/pages/36a6df/#æœåŠ¡æä¾›è€…é›†ç¾¤æ­å»º" class="sidebar-link">æœåŠ¡æä¾›è€…é›†ç¾¤æ­å»º</a></li><li class="sidebar-sub-header level2"><a href="/pages/36a6df/#æœåŠ¡å‘ç°discovery" class="sidebar-link">æœåŠ¡å‘ç°Discovery</a></li><li class="sidebar-sub-header level2"><a href="/pages/36a6df/#eurekaè‡ªæˆ‘ä¿æŠ¤" class="sidebar-link">Eurekaè‡ªæˆ‘ä¿æŠ¤</a></li><li class="sidebar-sub-header level2"><a href="/pages/36a6df/#æ³¨å†Œä¸­å¿ƒå¼‚åŒç‚¹" class="sidebar-link">æ³¨å†Œä¸­å¿ƒå¼‚åŒç‚¹</a></li><li class="sidebar-sub-header level2"><a href="/pages/36a6df/#capç†è®º" class="sidebar-link">CAPç†è®º</a></li><li class="sidebar-sub-header level2"><a href="/pages/36a6df/#æœåŠ¡è°ƒç”¨å‡ ç§æ–¹å¼" class="sidebar-link">æœåŠ¡è°ƒç”¨å‡ ç§æ–¹å¼</a></li><li class="sidebar-sub-header level2"><a href="/pages/36a6df/#äºŒã€ribbon-resttemplate" class="sidebar-link">äºŒã€Ribbon+RestTemplate</a></li><li class="sidebar-sub-header level2"><a href="/pages/36a6df/#loadbalancerå’Œribbon" class="sidebar-link">loadbalancerå’ŒRibbon</a></li></ul></li><li><a href="/pages/8c1c55/" class="sidebar-link">SpringCloudAlibaba</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/8c1c55/#_1-0-å­¦ä¹ ç›®æ ‡" class="sidebar-link">1.0.å­¦ä¹ ç›®æ ‡</a></li><li class="sidebar-sub-header level2"><a href="/pages/8c1c55/#_1-1-å•ä½“æ¶æ„" class="sidebar-link">1.1.å•ä½“æ¶æ„</a></li><li class="sidebar-sub-header level2"><a href="/pages/8c1c55/#_1-2-åˆ†å¸ƒå¼æ¶æ„" class="sidebar-link">1.2.åˆ†å¸ƒå¼æ¶æ„</a></li><li class="sidebar-sub-header level2"><a href="/pages/8c1c55/#_1-3-å¾®æœåŠ¡" class="sidebar-link">1.3.å¾®æœåŠ¡</a></li><li class="sidebar-sub-header level2"><a href="/pages/8c1c55/#_1-4-springcloud" class="sidebar-link">1.4.SpringCloud</a></li><li class="sidebar-sub-header level2"><a href="/pages/8c1c55/#_1-5-æ€»ç»“" class="sidebar-link">1.5.æ€»ç»“</a></li><li class="sidebar-sub-header level2"><a href="/pages/8c1c55/#_2-1-æœåŠ¡æ‹†åˆ†åŸåˆ™" class="sidebar-link">2.1.æœåŠ¡æ‹†åˆ†åŸåˆ™</a></li><li class="sidebar-sub-header level2"><a href="/pages/8c1c55/#_2-2-æœåŠ¡æ‹†åˆ†ç¤ºä¾‹" class="sidebar-link">2.2.æœåŠ¡æ‹†åˆ†ç¤ºä¾‹</a></li><li class="sidebar-sub-header level2"><a href="/pages/8c1c55/#_2-3-å®ç°è¿œç¨‹è°ƒç”¨æ¡ˆä¾‹" class="sidebar-link">2.3.å®ç°è¿œç¨‹è°ƒç”¨æ¡ˆä¾‹</a></li><li class="sidebar-sub-header level2"><a href="/pages/8c1c55/#_2-4-æä¾›è€…ä¸æ¶ˆè´¹è€…" class="sidebar-link">2.4.æä¾›è€…ä¸æ¶ˆè´¹è€…</a></li><li class="sidebar-sub-header level2"><a href="/pages/8c1c55/#_3-1-eurekaçš„ç»“æ„å’Œä½œç”¨" class="sidebar-link">3.1.Eurekaçš„ç»“æ„å’Œä½œç”¨</a></li><li class="sidebar-sub-header level2"><a href="/pages/8c1c55/#_3-2-æ­å»ºeureka-server" class="sidebar-link">3.2.æ­å»ºeureka-server</a></li><li class="sidebar-sub-header level2"><a href="/pages/8c1c55/#_3-3-æœåŠ¡æ³¨å†Œ" class="sidebar-link">3.3.æœåŠ¡æ³¨å†Œ</a></li><li class="sidebar-sub-header level2"><a href="/pages/8c1c55/#_3-4-æœåŠ¡å‘ç°" class="sidebar-link">3.4.æœåŠ¡å‘ç°</a></li><li class="sidebar-sub-header level2"><a href="/pages/8c1c55/#_4-1-è´Ÿè½½å‡è¡¡åŸç†" class="sidebar-link">4.1.è´Ÿè½½å‡è¡¡åŸç†</a></li><li class="sidebar-sub-header level2"><a href="/pages/8c1c55/#_4-2-æºç è·Ÿè¸ª" class="sidebar-link">4.2.æºç è·Ÿè¸ª</a></li><li class="sidebar-sub-header level2"><a href="/pages/8c1c55/#_4-3-è´Ÿè½½å‡è¡¡ç­–ç•¥" class="sidebar-link">4.3.è´Ÿè½½å‡è¡¡ç­–ç•¥</a></li><li class="sidebar-sub-header level2"><a href="/pages/8c1c55/#_4-4-é¥¥é¥¿åŠ è½½" class="sidebar-link">4.4.é¥¥é¥¿åŠ è½½</a></li><li class="sidebar-sub-header level2"><a href="/pages/8c1c55/#_5-1-è®¤è¯†å’Œå®‰è£…nacos" class="sidebar-link">5.1.è®¤è¯†å’Œå®‰è£…Nacos</a></li><li class="sidebar-sub-header level2"><a href="/pages/8c1c55/#_5-2-æœåŠ¡æ³¨å†Œåˆ°nacos" class="sidebar-link">5.2.æœåŠ¡æ³¨å†Œåˆ°nacos</a></li><li class="sidebar-sub-header level2"><a href="/pages/8c1c55/#_5-3-æœåŠ¡åˆ†çº§å­˜å‚¨æ¨¡å‹" class="sidebar-link">5.3.æœåŠ¡åˆ†çº§å­˜å‚¨æ¨¡å‹</a></li><li class="sidebar-sub-header level2"><a href="/pages/8c1c55/#_5-4-æƒé‡é…ç½®" class="sidebar-link">5.4.æƒé‡é…ç½®</a></li><li class="sidebar-sub-header level2"><a href="/pages/8c1c55/#_5-5-ç¯å¢ƒéš”ç¦»" class="sidebar-link">5.5.ç¯å¢ƒéš”ç¦»</a></li><li class="sidebar-sub-header level2"><a href="/pages/8c1c55/#_5-6-nacosä¸eurekaçš„åŒºåˆ«" class="sidebar-link">5.6.Nacosä¸Eurekaçš„åŒºåˆ«</a></li><li class="sidebar-sub-header level2"><a href="/pages/8c1c55/#_1-1-ç»Ÿä¸€é…ç½®ç®¡ç†" class="sidebar-link">1.1.ç»Ÿä¸€é…ç½®ç®¡ç†</a></li><li class="sidebar-sub-header level2"><a href="/pages/8c1c55/#_1-2-é…ç½®çƒ­æ›´æ–°" class="sidebar-link">1.2.é…ç½®çƒ­æ›´æ–°</a></li><li class="sidebar-sub-header level2"><a href="/pages/8c1c55/#_1-3-é…ç½®å…±äº«" class="sidebar-link">1.3.é…ç½®å…±äº«</a></li><li class="sidebar-sub-header level2"><a href="/pages/8c1c55/#_1-4-æ­å»ºnacosé›†ç¾¤" class="sidebar-link">1.4.æ­å»ºNacosé›†ç¾¤</a></li><li class="sidebar-sub-header level2"><a href="/pages/8c1c55/#_2-1-feignæ›¿ä»£resttemplate" class="sidebar-link">2.1.Feignæ›¿ä»£RestTemplate</a></li><li class="sidebar-sub-header level2"><a href="/pages/8c1c55/#_2-2-è‡ªå®šä¹‰é…ç½®" class="sidebar-link">2.2.è‡ªå®šä¹‰é…ç½®</a></li><li class="sidebar-sub-header level2"><a href="/pages/8c1c55/#_2-3-feignä½¿ç”¨ä¼˜åŒ–" class="sidebar-link">2.3.Feignä½¿ç”¨ä¼˜åŒ–</a></li><li class="sidebar-sub-header level2"><a href="/pages/8c1c55/#_2-4-æœ€ä½³å®è·µ" class="sidebar-link">2.4.æœ€ä½³å®è·µ</a></li><li class="sidebar-sub-header level2"><a href="/pages/8c1c55/#_3-1-ä¸ºä»€ä¹ˆéœ€è¦ç½‘å…³" class="sidebar-link">3.1.ä¸ºä»€ä¹ˆéœ€è¦ç½‘å…³</a></li><li class="sidebar-sub-header level2"><a href="/pages/8c1c55/#_3-2-gatewayå¿«é€Ÿå…¥é—¨" class="sidebar-link">3.2.gatewayå¿«é€Ÿå…¥é—¨</a></li><li class="sidebar-sub-header level2"><a href="/pages/8c1c55/#_3-3-æ–­è¨€å·¥å‚" class="sidebar-link">3.3.æ–­è¨€å·¥å‚</a></li><li class="sidebar-sub-header level2"><a href="/pages/8c1c55/#_3-4-è¿‡æ»¤å™¨å·¥å‚" class="sidebar-link">3.4.è¿‡æ»¤å™¨å·¥å‚</a></li><li class="sidebar-sub-header level2"><a href="/pages/8c1c55/#_3-5-å…¨å±€è¿‡æ»¤å™¨" class="sidebar-link">3.5.å…¨å±€è¿‡æ»¤å™¨</a></li><li class="sidebar-sub-header level2"><a href="/pages/8c1c55/#_3-6-è·¨åŸŸé—®é¢˜" class="sidebar-link">3.6.è·¨åŸŸé—®é¢˜</a></li></ul></li><li><a href="/pages/5e0b47/" class="sidebar-link">Nacoså®‰è£…æŒ‡å—</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/5e0b47/#_1-1-ä¸‹è½½å®‰è£…åŒ…" class="sidebar-link">1.1.ä¸‹è½½å®‰è£…åŒ…</a></li><li class="sidebar-sub-header level2"><a href="/pages/5e0b47/#_1-2-è§£å‹" class="sidebar-link">1.2.è§£å‹</a></li><li class="sidebar-sub-header level2"><a href="/pages/5e0b47/#_1-3-ç«¯å£é…ç½®" class="sidebar-link">1.3.ç«¯å£é…ç½®</a></li><li class="sidebar-sub-header level2"><a href="/pages/5e0b47/#_1-4-å¯åŠ¨" class="sidebar-link">1.4.å¯åŠ¨</a></li><li class="sidebar-sub-header level2"><a href="/pages/5e0b47/#_1-5-è®¿é—®" class="sidebar-link">1.5.è®¿é—®</a></li><li class="sidebar-sub-header level2"><a href="/pages/5e0b47/#_2-1-å®‰è£…jdk" class="sidebar-link">2.1.å®‰è£…JDK</a></li><li class="sidebar-sub-header level2"><a href="/pages/5e0b47/#_2-2-ä¸Šä¼ å®‰è£…åŒ…" class="sidebar-link">2.2.ä¸Šä¼ å®‰è£…åŒ…</a></li><li class="sidebar-sub-header level2"><a href="/pages/5e0b47/#_2-3-è§£å‹" class="sidebar-link">2.3.è§£å‹</a></li><li class="sidebar-sub-header level2"><a href="/pages/5e0b47/#_2-4-ç«¯å£é…ç½®" class="sidebar-link">2.4.ç«¯å£é…ç½®</a></li><li class="sidebar-sub-header level2"><a href="/pages/5e0b47/#_2-5-å¯åŠ¨" class="sidebar-link">2.5.å¯åŠ¨</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>æŒä¹…å±‚æ¡†æ¶</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="é¦–é¡µ" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><span data-v-06225672>å¼€å‘æ¡†æ¶</span></li><li data-v-06225672><span data-v-06225672>SpringCloud</span></li></ul> <div class="info" data-v-06225672><div title="ä½œè€…" class="author iconfont icon-touxiang" data-v-06225672><a href="https://www.aismy.top" target="_blank" title="ä½œè€…" class="beLink" data-v-06225672>Aismy</a></div> <div title="åˆ›å»ºæ—¶é—´" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-03-10</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">ç›®å½•</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">SpringCloud<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="ä¸€ã€springcloudå…¥é—¨"><a href="#ä¸€ã€springcloudå…¥é—¨" class="header-anchor">#</a> ä¸€ã€springcloudå…¥é—¨</h1> <h2 id="springcloudå’Œspringbootç‰ˆæœ¬å¯¹åº”å…³ç³»"><a href="#springcloudå’Œspringbootç‰ˆæœ¬å¯¹åº”å…³ç³»" class="header-anchor">#</a> SpringCloudå’ŒSpringBootç‰ˆæœ¬å¯¹åº”å…³ç³»</h2> <p><img src="http://img.aismy.top/img/image-20220619103847527.png" alt="image-20220619103847527"></p> <p>æ›´è¯¦ç»†çš„ç‰ˆæœ¬å¯¹åº”æŸ¥çœ‹æ–¹æ³•ï¼šhttps://start.spring.io/actuator/info</p> <h2 id="ç›¸å…³ç»„ä»¶"><a href="#ç›¸å…³ç»„ä»¶" class="header-anchor">#</a> ç›¸å…³ç»„ä»¶</h2> <img src="http://img.aismy.top/img/image-20220619103802059.png" alt="image-20220619103802059"> <h2 id="resttemplate"><a href="#resttemplate" class="header-anchor">#</a> RestTemplate</h2> <p>RestTemplateæä¾›äº†å¤šç§ä¾¿æ·è®¿é—®è¿œç¨‹HttpæœåŠ¡çš„æ–¹æ³•ï¼Œ æ˜¯ä¸€ç§ç®€å•ä¾¿æ·çš„è®¿é—®restfulæœåŠ¡æ¨¡æ¿ç±»ï¼Œæ˜¯<code>Spring</code>æä¾›çš„ç”¨äºè®¿é—®RestæœåŠ¡çš„<code>å®¢æˆ·ç«¯æ¨¡æ¿å·¥å…·é›†</code></p> <p><strong>å®˜ç½‘åœ°å€</strong>
https://docs.spring.io/spring-framework/docs/5.2.2.RELEASE/javadoc-api/org/springframework/web/client/RestTemplate.html</p> <p><strong>ä½¿ç”¨</strong>
ä½¿ç”¨restTemplateè®¿é—®restfulæ¥å£éå¸¸çš„ç®€å•ç²—æš´æ— è„‘ã€‚(url, requestMap, ResponseBean.class)è¿™ä¸‰ä¸ªå‚æ•°åˆ†åˆ«ä»£è¡¨
RESTè¯·æ±‚åœ°å€ã€è¯·æ±‚å‚æ•°ã€HTTPå“åº”è½¬æ¢è¢«è½¬æ¢æˆçš„å¯¹è±¡ç±»å‹ã€‚</p> <p>è¦æƒ³ä½¿ç”¨RestTemplateè°ƒç”¨å…¶ä»–æœåŠ¡ï¼Œåˆ™éœ€å…ˆå°†RestTemplateäº¤ç»™springå®¹å™¨</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ApplicationContextConfig</span>
<span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">RestTemplate</span> <span class="token function">restTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>è°ƒç”¨ç¤ºä¾‹: åœ¨orderæ¨¡å—ä¸­è°ƒç”¨paymentæ¨¡å—ä¸­çš„æœåŠ¡</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderController</span>
<span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token class-name">PaymentSrv_URL</span> <span class="token operator">=</span> <span class="token string">&quot;http://localhost:8001&quot;</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">RestTemplate</span> restTemplate<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/consumer/payment/create&quot;</span><span class="token punctuation">)</span> <span class="token comment">//å®¢æˆ·ç«¯ç”¨æµè§ˆå™¨æ˜¯getè¯·æ±‚ï¼Œä½†æ˜¯åº•å±‚å®è´¨å‘é€postè°ƒç”¨æœåŠ¡ç«¯8001</span>
    <span class="token keyword">public</span> <span class="token class-name">CommonResult</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Payment</span> payment<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> restTemplate<span class="token punctuation">.</span><span class="token function">postForObject</span><span class="token punctuation">(</span><span class="token class-name">PaymentSrv_URL</span> <span class="token operator">+</span> <span class="token string">&quot;/payment/create&quot;</span><span class="token punctuation">,</span>payment<span class="token punctuation">,</span><span class="token class-name">CommonResult</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/consumer/payment/get/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">CommonResult</span> <span class="token function">getPayment</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> restTemplate<span class="token punctuation">.</span><span class="token function">getForObject</span><span class="token punctuation">(</span><span class="token class-name">PaymentSrv_URL</span> <span class="token operator">+</span> <span class="token string">&quot;/payment/get/&quot;</span><span class="token operator">+</span>id<span class="token punctuation">,</span> <span class="token class-name">CommonResult</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h1 id="äºŒã€eurekaæœåŠ¡æ³¨å†Œä¸å‘ç°"><a href="#äºŒã€eurekaæœåŠ¡æ³¨å†Œä¸å‘ç°" class="header-anchor">#</a> äºŒã€EurekaæœåŠ¡æ³¨å†Œä¸å‘ç°</h1> <h2 id="eurekaåŸºç¡€çŸ¥è¯†"><a href="#eurekaåŸºç¡€çŸ¥è¯†" class="header-anchor">#</a> EurekaåŸºç¡€çŸ¥è¯†</h2> <h3 id="ä»€ä¹ˆæ˜¯æœåŠ¡æ²»ç†"><a href="#ä»€ä¹ˆæ˜¯æœåŠ¡æ²»ç†" class="header-anchor">#</a> ä»€ä¹ˆæ˜¯æœåŠ¡æ²»ç†ï¼Ÿ</h3> <blockquote><p>Spring Cloud å°è£…äº† Netflix å…¬å¸å¼€å‘çš„ Eureka æ¨¡å—æ¥å®ç°æœåŠ¡æ²»ç†ï¼Œåœ¨ä¼ ç»Ÿçš„rpcè¿œç¨‹è°ƒç”¨æ¡†æ¶ä¸­ï¼Œç®¡ç†æ¯ä¸ªæœåŠ¡ä¸æœåŠ¡ä¹‹é—´ä¾èµ–å…³ç³»æ¯”è¾ƒå¤æ‚ï¼Œç®¡ç†æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨æœåŠ¡æ²»ç†ï¼Œç®¡ç†æœåŠ¡äºæœåŠ¡ä¹‹é—´ä¾èµ–å…³ç³»ï¼Œå¯ä»¥å®ç°æœåŠ¡è°ƒç”¨ã€è´Ÿè½½å‡è¡¡ã€å®¹é”™ç­‰ï¼Œå®ç°æœåŠ¡å‘ç°ä¸æ³¨å†Œã€‚</p></blockquote> <p>åœ¨ä¸Šé¢ç¤ºä¾‹ä¸­ä½¿ç”¨RestTemplateä¹Ÿå¯ä»¥è°ƒç”¨æœåŠ¡ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦Eurekaå‘¢</p> <blockquote><p>å½“æ¶ˆè´¹è€…å’Œç”Ÿäº§è€…å˜å¤šçš„æ—¶å€™ï¼Œè‹¥æ²¡æœ‰ç»Ÿä¸€ç®¡ç†å„ä¸ªæœåŠ¡ï¼Œåˆ™æœåŠ¡è°ƒç”¨ä¼šå˜å¾—è¶Šæ¥è¶Šç¹çï¼Œè€ŒEurekaå¯ä»¥ä¸ºæˆ‘ä»¬è¿›è¡ŒæœåŠ¡çš„æ²»ç†</p></blockquote> <h3 id="ä»€ä¹ˆæ˜¯æœåŠ¡æ³¨å†Œä¸å‘ç°"><a href="#ä»€ä¹ˆæ˜¯æœåŠ¡æ³¨å†Œä¸å‘ç°" class="header-anchor">#</a> ä»€ä¹ˆæ˜¯æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼Ÿ</h3> <blockquote><p>Eurekaé‡‡ç”¨äº†CSçš„è®¾è®¡æ¶æ„ï¼ŒEureka Server ä½œä¸ºæœåŠ¡æ³¨å†ŒåŠŸèƒ½çš„æœåŠ¡å™¨ï¼Œå®ƒæ˜¯æœåŠ¡æ³¨å†Œä¸­å¿ƒã€‚è€Œç³»ç»Ÿä¸­çš„å…¶ä»–å¾®æœåŠ¡ï¼Œä½¿ç”¨ Eurekaçš„å®¢æˆ·ç«¯è¿æ¥åˆ° Eureka Serverå¹¶ç»´æŒå¿ƒè·³è¿æ¥ã€‚è¿™æ ·ç³»ç»Ÿçš„ç»´æŠ¤äººå‘˜å°±å¯ä»¥é€šè¿‡ Eureka Server æ¥ç›‘æ§ç³»ç»Ÿä¸­å„ä¸ªå¾®æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œã€‚
åœ¨æœåŠ¡æ³¨å†Œä¸å‘ç°ä¸­ï¼Œæœ‰ä¸€ä¸ªæ³¨å†Œä¸­å¿ƒã€‚å½“æœåŠ¡å™¨å¯åŠ¨çš„æ—¶å€™ï¼Œä¼šæŠŠå½“å‰è‡ªå·±æœåŠ¡å™¨çš„ä¿¡æ¯ æ¯”å¦‚ æœåŠ¡åœ°å€é€šè®¯åœ°å€ç­‰ä»¥åˆ«åæ–¹å¼æ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒä¸Šã€‚å¦ä¸€æ–¹ï¼ˆæ¶ˆè´¹è€…|æœåŠ¡æä¾›è€…ï¼‰ï¼Œä»¥è¯¥åˆ«åçš„æ–¹å¼å»æ³¨å†Œä¸­å¿ƒä¸Šè·å–åˆ°å®é™…çš„æœåŠ¡é€šè®¯åœ°å€ï¼Œç„¶åå†å®ç°æœ¬åœ°RPCè°ƒç”¨RPCè¿œç¨‹è°ƒç”¨æ¡†æ¶æ ¸å¿ƒè®¾è®¡æ€æƒ³ï¼šåœ¨äºæ³¨å†Œä¸­å¿ƒï¼Œå› ä¸ºä½¿ç”¨æ³¨å†Œä¸­å¿ƒç®¡ç†æ¯ä¸ªæœåŠ¡ä¸æœåŠ¡ä¹‹é—´çš„ä¸€ä¸ªä¾èµ–å…³ç³»(æœåŠ¡æ²»ç†æ¦‚å¿µ)ã€‚åœ¨ä»»ä½•rpcè¿œç¨‹æ¡†æ¶ä¸­ï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ªæ³¨å†Œä¸­å¿ƒ(å­˜æ”¾æœåŠ¡åœ°å€ç›¸å…³ä¿¡æ¯(æ¥å£åœ°å€))</p></blockquote> <p>ä¸‹å·¦å›¾æ˜¯Eurekaç³»ç»Ÿæ¶æ„ï¼Œå³å›¾æ˜¯Dubboçš„æ¶æ„ï¼Œè¯·å¯¹æ¯”</p> <p><img src="http://img.aismy.top/img/image-20220619105300665.png" alt="image-20220619105300665"></p> <p>ä¸ºäº†é¿å…å•ç‚¹æ•…éšœï¼Œåœ¨å®é™…å¼€å‘ä¸­ï¼Œç”Ÿäº§è€…å’ŒEureka Server å¾€å¾€éƒ½æ˜¯é›†ç¾¤ï¼Œ</p> <h3 id="eurekaä¸¤ä¸ªç»„ä»¶"><a href="#eurekaä¸¤ä¸ªç»„ä»¶" class="header-anchor">#</a> Eurekaä¸¤ä¸ªç»„ä»¶</h3> <p>EurekaåŒ…å«ä¸¤ä¸ªç»„ä»¶ï¼š<code>Eureka Server</code>å’Œ<code>Eureka Client</code></p> <p><strong>Eureka Serveræä¾›æœåŠ¡æ³¨å†ŒæœåŠ¡</strong>
å„ä¸ªå¾®æœåŠ¡èŠ‚ç‚¹é€šè¿‡é…ç½®å¯åŠ¨åï¼Œä¼šåœ¨EurekaServerä¸­è¿›è¡Œæ³¨å†Œï¼Œè¿™æ ·EurekaServerä¸­çš„æœåŠ¡æ³¨å†Œè¡¨ä¸­å°†ä¼šå­˜å‚¨æ‰€æœ‰å¯ç”¨æœåŠ¡èŠ‚ç‚¹çš„ä¿¡æ¯ï¼ŒæœåŠ¡èŠ‚ç‚¹çš„ä¿¡æ¯å¯ä»¥åœ¨ç•Œé¢ä¸­ç›´è§‚çœ‹åˆ°ã€‚</p> <p><strong>EurekaClienté€šè¿‡æ³¨å†Œä¸­å¿ƒè¿›è¡Œè®¿é—®</strong>
æ˜¯ä¸€ä¸ªJavaå®¢æˆ·ç«¯ï¼Œç”¨äºç®€åŒ–Eureka Serverçš„äº¤äº’ï¼Œå®¢æˆ·ç«¯åŒæ—¶ä¹Ÿå…·å¤‡ä¸€ä¸ªå†…ç½®çš„ã€ä½¿ç”¨è½®è¯¢(round-robin)è´Ÿè½½ç®—æ³•çš„è´Ÿè½½å‡è¡¡å™¨ã€‚åœ¨åº”ç”¨å¯åŠ¨åï¼Œå°†ä¼šå‘Eureka Serverå‘é€å¿ƒè·³(é»˜è®¤å‘¨æœŸä¸º30ç§’)ã€‚å¦‚æœEureka Serveråœ¨å¤šä¸ªå¿ƒè·³å‘¨æœŸå†…æ²¡æœ‰æ¥æ”¶åˆ°æŸä¸ªèŠ‚ç‚¹çš„å¿ƒè·³ï¼ŒEurekaServerå°†ä¼šä»æœåŠ¡æ³¨å†Œè¡¨ä¸­æŠŠè¿™ä¸ªæœåŠ¡èŠ‚ç‚¹ç§»é™¤ï¼ˆé»˜è®¤90ç§’ï¼‰</p> <h2 id="å•æœºeurekaæ„å»ºæ­¥éª¤"><a href="#å•æœºeurekaæ„å»ºæ­¥éª¤" class="header-anchor">#</a> å•æœºEurekaæ„å»ºæ­¥éª¤</h2> <h3 id="eurekaserverç«¯æœåŠ¡æ³¨å†Œä¸­å¿ƒ"><a href="#eurekaserverç«¯æœåŠ¡æ³¨å†Œä¸­å¿ƒ" class="header-anchor">#</a> eurekaServerç«¯æœåŠ¡æ³¨å†Œä¸­å¿ƒ</h3> <p><strong>æ·»åŠ pomæ–‡ä»¶</strong></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>ä»¥å‰çš„è€ç‰ˆæœ¬ï¼ˆå½“å‰ä½¿ç”¨2018ï¼‰
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-eureka<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
 
ç°åœ¨æ–°ç‰ˆæœ¬ï¼ˆå½“å‰ä½¿ç”¨2020.2ï¼‰
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-server<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>åœ¨è€ç‰ˆæœ¬ä¸­serverå’Œclientéƒ½æ··åˆåœ¨ä¸€ä¸ªä¾èµ–ä¸­ï¼Œè€Œç›®å‰æ–°ç‰ˆæœ¬å°†serverå’Œclientåˆ†å¼€ï¼Œæ¸…æ™°æ˜äº†ï¼Œæ¨è¿›ä½¿ç”¨æ–°ç‰ˆæœ¬ä¾èµ–</p> <p><strong>æ·»åŠ yml</strong></p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">7001</span>
<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">instance</span><span class="token punctuation">:</span>
    <span class="token key atrule">hostname</span><span class="token punctuation">:</span> localhost <span class="token comment">#eurekaæœåŠ¡ç«¯çš„å®ä¾‹åç§°</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token comment">#falseè¡¨ç¤ºä¸å‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±ã€‚</span>
    <span class="token key atrule">register-with-eureka</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
    <span class="token comment">#falseè¡¨ç¤ºè‡ªå·±ç«¯å°±æ˜¯æ³¨å†Œä¸­å¿ƒï¼Œæˆ‘çš„èŒè´£å°±æ˜¯ç»´æŠ¤æœåŠ¡å®ä¾‹ï¼Œå¹¶ä¸éœ€è¦å»æ£€ç´¢æœåŠ¡</span>
    <span class="token key atrule">fetch-registry</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
    <span class="token comment">#è®¾ç½®ä¸Eureka Serveräº¤äº’çš„åœ°å€æŸ¥è¯¢æœåŠ¡å’Œæ³¨å†ŒæœåŠ¡éƒ½éœ€è¦ä¾èµ–è¿™ä¸ªåœ°å€ã€‚</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//$<span class="token punctuation">{</span>eureka.instance.hostname<span class="token punctuation">}</span><span class="token punctuation">:</span>$<span class="token punctuation">{</span>server.port<span class="token punctuation">}</span>/eureka/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><strong>å¯åŠ¨ç±»æ·»åŠ @EnableEurekaServeræ³¨è§£</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableEurekaServer</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EurekaMain7001</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">EurekaMain7001</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>**æµ‹è¯•ï¼š**æµè§ˆå™¨è¾“å…¥http://localhost:7001/</p> <p><img src="http://img.aismy.top/img/image-20220619110138584.png" alt="image-20220619110138584"></p> <p>å¯è§å½“å‰è¿˜ä¸ºæœ‰æœåŠ¡æ³¨å†Œè¿›æ¥</p> <h3 id="eurekaclientç«¯"><a href="#eurekaclientç«¯" class="header-anchor">#</a> EurekaClientç«¯</h3> <p>å°†å…¶ä»–æœåŠ¡æ³¨å†Œåˆ°EurekaServeä¸­</p> <p><strong>æ·»åŠ pom</strong></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>ä»¥å‰è€ç‰ˆæœ¬ï¼Œåˆ«å†ä½¿ç”¨
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-eureka<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
ç°åœ¨æ–°ç‰ˆæœ¬,å½“å‰ä½¿ç”¨
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>æ·»åŠ yml</strong></p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token comment">#è¡¨ç¤ºæ˜¯å¦å°†è‡ªå·±æ³¨å†Œè¿›EurekaServeré»˜è®¤ä¸ºtrueã€‚</span>
    <span class="token key atrule">register-with-eureka</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token comment">#æ˜¯å¦ä»EurekaServeræŠ“å–å·²æœ‰çš„æ³¨å†Œä¿¡æ¯ï¼Œé»˜è®¤ä¸ºtrueã€‚å•èŠ‚ç‚¹æ— æ‰€è°“ï¼Œé›†ç¾¤å¿…é¡»è®¾ç½®ä¸ºtrueæ‰èƒ½é…åˆribbonä½¿ç”¨è´Ÿè½½å‡è¡¡</span>
    <span class="token key atrule">fetchRegistry</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>7001/eureka
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>å¯åŠ¨ç±»æ·»åŠ @EnableEurekaClientæ³¨è§£</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableEurekaClient</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PaymentMain8001</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">PaymentMain8001</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>æµ‹è¯•ï¼šå¯åŠ¨è¯¥æœåŠ¡ï¼Œè¿›å»æ³¨å†Œä¸­å¿ƒæŸ¥çœ‹</strong></p> <p><img src="http://img.aismy.top/img/image-20220619110713329.png" alt="image-20220619110713329"></p> <h2 id="eurekaé›†ç¾¤æ­å»º"><a href="#eurekaé›†ç¾¤æ­å»º" class="header-anchor">#</a> Eurekaé›†ç¾¤æ­å»º</h2> <h3 id="eurekaé›†ç¾¤åŸç†è¯´æ˜"><a href="#eurekaé›†ç¾¤åŸç†è¯´æ˜" class="header-anchor">#</a> Eurekaé›†ç¾¤åŸç†è¯´æ˜</h3> <p><img src="http://img.aismy.top/img/image-20220619120609244.png" alt="image-20220619120609244"></p> <p><img src="http://img.aismy.top/img/image-20220619120721027.png" alt="image-20220619120721027"></p> <p>ä¿®æ”¹æ˜ å°„é…ç½®æ·»åŠ è¿›hostsæ–‡ä»¶ ï¼šæ¨¡æ‹Ÿä¸¤å°ä¸»æœº</p> <p><img src="http://img.aismy.top/img/image-20220619120819385.png" alt="image-20220619120819385"></p> <h3 id="eurekaserveré›†ç¾¤æ­å»º"><a href="#eurekaserveré›†ç¾¤æ­å»º" class="header-anchor">#</a> EurekaServeré›†ç¾¤æ­å»º</h3> <p><strong>ä¿®æ”¹EurekaServerçš„ymlæ–‡ä»¶</strong></p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">7001</span>
<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">instance</span><span class="token punctuation">:</span>
    <span class="token key atrule">hostname</span><span class="token punctuation">:</span> eureka7001.com <span class="token comment">#eurekaæœåŠ¡ç«¯çš„å®ä¾‹åç§°</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">register-with-eureka</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>     <span class="token comment">#falseè¡¨ç¤ºä¸å‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±ã€‚</span>
    <span class="token key atrule">fetch-registry</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>     <span class="token comment">#falseè¡¨ç¤ºè‡ªå·±ç«¯å°±æ˜¯æ³¨å†Œä¸­å¿ƒï¼Œæˆ‘çš„èŒè´£å°±æ˜¯ç»´æŠ¤æœåŠ¡å®ä¾‹ï¼Œå¹¶ä¸éœ€è¦å»æ£€ç´¢æœåŠ¡</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//eureka7002.com<span class="token punctuation">:</span>7002/eureka/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">7002</span>
<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">instance</span><span class="token punctuation">:</span>
    <span class="token key atrule">hostname</span><span class="token punctuation">:</span> eureka7002.com <span class="token comment">#eurekaæœåŠ¡ç«¯çš„å®ä¾‹åç§°</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">register-with-eureka</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>     <span class="token comment">#falseè¡¨ç¤ºä¸å‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±ã€‚</span>
    <span class="token key atrule">fetch-registry</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>     <span class="token comment">#falseè¡¨ç¤ºè‡ªå·±ç«¯å°±æ˜¯æ³¨å†Œä¸­å¿ƒï¼Œæˆ‘çš„èŒè´£å°±æ˜¯ç»´æŠ¤æœåŠ¡å®ä¾‹ï¼Œå¹¶ä¸éœ€è¦å»æ£€ç´¢æœåŠ¡</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//eureka7001.com<span class="token punctuation">:</span>7001/eureka/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>äº’ç›¸æ³¨å†Œï¼Œäº’ç›¸å®ˆæœ›</p> <h3 id="å°†eurekaclientæ³¨å†Œåˆ°eurekaserveré›†ç¾¤ä¸­"><a href="#å°†eurekaclientæ³¨å†Œåˆ°eurekaserveré›†ç¾¤ä¸­" class="header-anchor">#</a> å°†EurekaClientæ³¨å†Œåˆ°EurekaServeré›†ç¾¤ä¸­</h3> <p>ä¿®æ”¹EurekaClientçš„yml</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token comment">#è¡¨ç¤ºæ˜¯å¦å°†è‡ªå·±æ³¨å†Œè¿›EurekaServeré»˜è®¤ä¸ºtrueã€‚</span>
    <span class="token key atrule">register-with-eureka</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token comment">#æ˜¯å¦ä»EurekaServeræŠ“å–å·²æœ‰çš„æ³¨å†Œä¿¡æ¯ï¼Œé»˜è®¤ä¸ºtrueã€‚å•èŠ‚ç‚¹æ— æ‰€è°“ï¼Œé›†ç¾¤å¿…é¡»è®¾ç½®ä¸ºtrueæ‰èƒ½é…åˆribbonä½¿ç”¨è´Ÿè½½å‡è¡¡</span>
    <span class="token key atrule">fetchRegistry</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token comment">#defaultZone: http://localhost:7001/eureka å•æœºç‰ˆ</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//eureka7001.com<span class="token punctuation">:</span>7001/eureka<span class="token punctuation">,</span>http<span class="token punctuation">:</span>//eureka7002.com<span class="token punctuation">:</span>7002/eureka  <span class="token comment"># é›†ç¾¤ç‰ˆ</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>æµ‹è¯•ï¼š</p> <p>è®¿é—®http://eureka7001.com:7001/</p> <p><img src="http://img.aismy.top/img/image-20220619121531488.png" alt="image-20220619121531488"></p> <p>è®¿é—®http://eureka7002.com:7002/</p> <p><img src="http://img.aismy.top/img/image-20220619121601206.png" alt="image-20220619121601206"></p> <blockquote><p>EurekaServerä¹‹é—´äº’ç›¸æ³¨å†Œï¼Œäº’ç›¸å®ˆæœ›ï¼ŒEurekaServeré›†ç¾¤ä¸­éƒ½å­˜åœ¨EurekaClient</p></blockquote> <h2 id="æœåŠ¡æä¾›è€…é›†ç¾¤æ­å»º"><a href="#æœåŠ¡æä¾›è€…é›†ç¾¤æ­å»º" class="header-anchor">#</a> æœåŠ¡æä¾›è€…é›†ç¾¤æ­å»º</h2> <p>ä¿®æ”¹cloud-provider-paymentå‚æ•°ï¼Œæ¨¡æ‹Ÿé›†ç¾¤</p> <p><img src="http://img.aismy.top/img/image-20220619125431158.png" alt="image-20220619125431158"></p> <p>ä¸¤ä¸ªæœåŠ¡éƒ½è¢«æ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒä¸­</p> <p><img src="http://img.aismy.top/img/image-20220619125507167.png" alt="image-20220619125507167"></p> <p>æµ‹è¯•æ¶ˆè´¹è€…cloud-consumer-orderæ¨¡å—</p> <p><img src="http://img.aismy.top/img/image-20220619130344885.png" alt="image-20220619130344885"></p> <p>å‘ç°åªèƒ½è°ƒç”¨8001ç«¯å£çš„æœåŠ¡</p> <p>åŸcontrollerä»£ç </p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">PAYMENT_URL</span><span class="token operator">=</span><span class="token string">&quot;http://localhost:8001&quot;</span><span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">RestTemplate</span> restTemplate<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@PostMapping</span> <span class="token punctuation">(</span><span class="token string">&quot;create&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">CommonResult</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Payment</span> payment<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> restTemplate<span class="token punctuation">.</span><span class="token function">postForObject</span><span class="token punctuation">(</span><span class="token constant">PAYMENT_URL</span><span class="token operator">+</span><span class="token string">&quot;payment/create&quot;</span><span class="token punctuation">,</span>payment<span class="token punctuation">,</span><span class="token class-name">CommonResult</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;get/{id}&quot;</span><span class="token punctuation">)</span>
     <span class="token keyword">public</span> <span class="token class-name">CommonResult</span> <span class="token function">getPayment</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> restTemplate<span class="token punctuation">.</span><span class="token function">getForObject</span><span class="token punctuation">(</span><span class="token constant">PAYMENT_URL</span><span class="token operator">+</span><span class="token string">&quot;payment/get/&quot;</span><span class="token operator">+</span>id<span class="token punctuation">,</span><span class="token class-name">CommonResult</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>ç°åœ¨æœåŠ¡æä¾›è€…ä¸ºé›†ç¾¤ï¼Œåˆ™ä¸èƒ½ä½¿ç”¨å›ºå®šçš„ipåŠ ç«¯å£å·å»è°ƒç”¨ï¼Œåº”è¯¥ä½¿ç”¨<code>æœåŠ¡åç§°</code>å»è°ƒç”¨</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// é€šè¿‡åœ¨eurekaä¸Šæ³¨å†Œè¿‡çš„å¾®æœåŠ¡åç§°è°ƒç”¨</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">PAYMENT_SRV</span> <span class="token operator">=</span> <span class="token string">&quot;http://CLOUD-PAYMENT-SERVICE&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>ä¿®æ”¹åæµ‹è¯•ï¼š</strong></p> <p><img src="http://img.aismy.top/img/image-20220619130759750.png" alt="image-20220619130759750"></p> <blockquote><p>ä¿®æ”¹ä¸ºä½¿ç”¨æœåŠ¡åç§°è°ƒç”¨åï¼Œå‘ç°è°ƒç”¨å¤±è´¥ï¼ŒåŸå› æ˜¯ï¼šå› ä¸ºæ­¤æ—¶æœåŠ¡æä¾›è€…ä¸ºé›†ç¾¤æ­å»ºï¼ŒåŒä¸€ä¸ªæœåŠ¡åç§°ä¸‹æœ‰å¤šä¸ªæœåŠ¡å®ä¾‹ï¼Œæ­¤æ—¶ä¸çŸ¥é“è°ƒç”¨å“ªä¸€ä¸ªæœåŠ¡å®ä¾‹ï¼Œå› æ­¤æŠ›å‡ºå¼‚å¸¸</p></blockquote> <p><strong>è§£å†³æ–¹æ³•ï¼šä½¿ç”¨@LoadBalancedæ³¨è§£èµ‹äºˆRestTemplateè´Ÿè½½å‡è¡¡çš„èƒ½åŠ›</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BeanConfig</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token annotation punctuation">@LoadBalanced</span> <span class="token comment">//ä½¿ç”¨@LoadBalancedæ³¨è§£èµ‹äºˆRestTemplateè´Ÿè½½å‡è¡¡çš„èƒ½åŠ›</span>
    <span class="token keyword">public</span> <span class="token class-name">RestTemplate</span> <span class="token function">getRestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>æµ‹è¯•ï¼šhttp://localhost/consumer/payment/get/1</p> <p><img src="http://img.aismy.top/img/image-20220619155948860.png" alt="image-20220619155948860"></p> <p>å†æ¬¡è®¿é—®ï¼šhttp://localhost/consumer/payment/get/1</p> <p><img src="http://img.aismy.top/img/image-20220619160001968.png" alt="image-20220619160001968"></p> <blockquote><p>ä¸¤æ¬¡è®¿é—®ï¼Œè°ƒç”¨äº†ä¸åŒç«¯å£çš„paymentæœåŠ¡ï¼Œè´Ÿè½½å‡è¡¡æ•ˆæœå®ç°(é»˜è®¤ä¸º<code>è½®è¯¢</code>è°ƒç”¨)</p></blockquote> <h2 id="æœåŠ¡å‘ç°discovery"><a href="#æœåŠ¡å‘ç°discovery" class="header-anchor">#</a> æœåŠ¡å‘ç°Discovery</h2> <blockquote><p>å¯¹äºæ³¨å†Œè¿›<code>eureka</code>é‡Œé¢çš„å¾®æœåŠ¡ï¼Œå¯ä»¥é€šè¿‡æœåŠ¡å‘ç°æ¥è·å¾—è¯¥æœåŠ¡çš„ä¿¡æ¯</p></blockquote> <p>ä¿®æ”¹cloud-provider-payment8001çš„Controller</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>
<span class="token keyword">private</span> <span class="token class-name">DiscoveryClient</span> discoveryClient<span class="token punctuation">;</span>

<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;discovery&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">discovery</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> services <span class="token operator">=</span> discoveryClient<span class="token punctuation">.</span><span class="token function">getServices</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> element <span class="token operator">:</span> services<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ServiceInstance</span><span class="token punctuation">&gt;</span></span> instances <span class="token operator">=</span> discoveryClient<span class="token punctuation">.</span><span class="token function">getInstances</span><span class="token punctuation">(</span><span class="token string">&quot;CLOUD-PAYMENT-SERVICE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">ServiceInstance</span> element <span class="token operator">:</span> instances<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span><span class="token function">getServiceId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\t&quot;</span> <span class="token operator">+</span> element<span class="token punctuation">.</span><span class="token function">getHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\t&quot;</span> <span class="token operator">+</span> element<span class="token punctuation">.</span><span class="token function">getPort</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\t&quot;</span>
                    <span class="token operator">+</span> element<span class="token punctuation">.</span><span class="token function">getUri</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>discoveryClient<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>æ·»åŠ å¯åŠ¨ç±»æ³¨è§£ï¼š@EnableDiscoveryClient</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableEurekaClient</span>
<span class="token annotation punctuation">@EnableDiscoveryClient</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Payment8001</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Payment8001</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>æµ‹è¯•ï¼šè®¿é—®http://localhost:8001/payment/discovery</p> <p><img src="http://img.aismy.top/img/image-20220619163156613.png" alt="image-20220619163156613"></p> <p>æ§åˆ¶å°ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>cloud<span class="token operator">-</span>consumer<span class="token operator">-</span>order
cloud<span class="token operator">-</span>payment<span class="token operator">-</span>service
<span class="token constant">CLOUD</span><span class="token operator">-</span><span class="token constant">PAYMENT</span><span class="token operator">-</span><span class="token constant">SERVICE</span>	<span class="token constant">LAPTOP</span><span class="token operator">-</span><span class="token number">887</span><span class="token constant">GD1N2</span>	<span class="token number">8002</span>	http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token constant">LAPTOP</span><span class="token operator">-</span><span class="token number">887</span><span class="token constant">GD1N2</span><span class="token operator">:</span><span class="token number">8002</span>
<span class="token constant">CLOUD</span><span class="token operator">-</span><span class="token constant">PAYMENT</span><span class="token operator">-</span><span class="token constant">SERVICE</span>	<span class="token constant">LAPTOP</span><span class="token operator">-</span><span class="token number">887</span><span class="token constant">GD1N2</span>	<span class="token number">8001</span>	http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token constant">LAPTOP</span><span class="token operator">-</span><span class="token number">887</span><span class="token constant">GD1N2</span><span class="token operator">:</span><span class="token number">8001</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="eurekaè‡ªæˆ‘ä¿æŠ¤"><a href="#eurekaè‡ªæˆ‘ä¿æŠ¤" class="header-anchor">#</a> Eurekaè‡ªæˆ‘ä¿æŠ¤</h2> <blockquote><p>ä¿æŠ¤æ¨¡å¼ä¸»è¦ç”¨äºä¸€ç»„å®¢æˆ·ç«¯å’ŒEureka Serverä¹‹é—´å­˜åœ¨ç½‘ç»œåˆ†åŒºåœºæ™¯ä¸‹çš„ä¿æŠ¤ã€‚ä¸€æ—¦è¿›å…¥ä¿æŠ¤æ¨¡å¼ï¼ŒEureka Serverå°†ä¼šå°è¯•ä¿æŠ¤å…¶æœåŠ¡æ³¨å†Œè¡¨ä¸­çš„ä¿¡æ¯ï¼Œä¸å†åˆ é™¤æœåŠ¡æ³¨å†Œè¡¨ä¸­çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯ä¸ä¼šæ³¨é”€ä»»ä½•å¾®æœåŠ¡ã€‚</p> <p>å¦‚æœåœ¨Eureka Serverçš„é¦–é¡µçœ‹åˆ°ä»¥ä¸‹è¿™æ®µæç¤ºï¼Œåˆ™è¯´æ˜Eurekaè¿›å…¥äº†ä¿æŠ¤æ¨¡å¼ï¼š
EMERGENCY! EUREKA MAY BE INCORRECTLY CLAIMING INSTANCES ARE UP WHEN THEY'RE NOT.
RENEWALS ARE LESSER THAN THRESHOLD AND HENCE THE INSTANCES ARE NOT BEING EXPIRED JUST TO BE SAFE</p></blockquote> <p><img src="http://img.aismy.top/img/image-20220619164633380.png" alt="image-20220619164633380"></p> <h3 id="ä¸ºä»€ä¹ˆä¼šäº§ç”Ÿeurekaè‡ªæˆ‘ä¿æŠ¤æœºåˆ¶"><a href="#ä¸ºä»€ä¹ˆä¼šäº§ç”Ÿeurekaè‡ªæˆ‘ä¿æŠ¤æœºåˆ¶" class="header-anchor">#</a> ä¸ºä»€ä¹ˆä¼šäº§ç”ŸEurekaè‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼Ÿ</h3> <p>ä¸ºäº†é˜²æ­¢EurekaClientå¯ä»¥æ­£å¸¸è¿è¡Œï¼Œä½†æ˜¯ ä¸ EurekaServerç½‘ç»œä¸é€šæƒ…å†µä¸‹ï¼ŒEurekaServerä¸ä¼šç«‹åˆ»å°†EurekaClientæœåŠ¡å‰”é™¤</p> <h3 id="ä»€ä¹ˆæ˜¯è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼"><a href="#ä»€ä¹ˆæ˜¯è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼" class="header-anchor">#</a> ä»€ä¹ˆæ˜¯è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ï¼Ÿ</h3> <p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœEurekaServeråœ¨ä¸€å®šæ—¶é—´å†…æ²¡æœ‰æ¥æ”¶åˆ°æŸä¸ªå¾®æœåŠ¡å®ä¾‹çš„å¿ƒè·³ï¼ŒEurekaServerå°†ä¼šæ³¨é”€è¯¥å®ä¾‹ï¼ˆé»˜è®¤90ç§’ï¼‰ã€‚ä½†æ˜¯å½“ç½‘ç»œåˆ†åŒºæ•…éšœå‘ç”Ÿ(å»¶æ—¶ã€å¡é¡¿ã€æ‹¥æŒ¤)æ—¶ï¼Œå¾®æœåŠ¡ä¸EurekaServerä¹‹é—´æ— æ³•æ­£å¸¸é€šä¿¡ï¼Œä»¥ä¸Šè¡Œä¸ºå¯èƒ½å˜å¾—éå¸¸å±é™©äº†â€”â€”å› ä¸ºå¾®æœåŠ¡æœ¬èº«å…¶å®æ˜¯å¥åº·çš„ï¼Œæ­¤æ—¶æœ¬ä¸åº”è¯¥æ³¨é”€è¿™ä¸ªå¾®æœåŠ¡ã€‚Eurekaé€šè¿‡â€œè‡ªæˆ‘ä¿æŠ¤æ¨¡å¼â€æ¥è§£å†³è¿™ä¸ªé—®é¢˜â€”â€”å½“EurekaServerèŠ‚ç‚¹åœ¨çŸ­æ—¶é—´å†…ä¸¢å¤±è¿‡å¤šå®¢æˆ·ç«¯æ—¶ï¼ˆå¯èƒ½å‘ç”Ÿäº†ç½‘ç»œåˆ†åŒºæ•…éšœï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ªèŠ‚ç‚¹å°±ä¼šè¿›å…¥è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ã€‚</p> <p>åœ¨è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ä¸­ï¼ŒEureka Serverä¼šä¿æŠ¤æœåŠ¡æ³¨å†Œè¡¨ä¸­çš„ä¿¡æ¯ï¼Œä¸å†æ³¨é”€ä»»ä½•æœåŠ¡å®ä¾‹ã€‚
å®ƒçš„è®¾è®¡å“²å­¦å°±æ˜¯å®å¯ä¿ç•™é”™è¯¯çš„æœåŠ¡æ³¨å†Œä¿¡æ¯ï¼Œä¹Ÿä¸ç›²ç›®æ³¨é”€ä»»ä½•å¯èƒ½å¥åº·çš„æœåŠ¡å®ä¾‹ã€‚ä¸€å¥è¯è®²è§£ï¼šå¥½æ­»ä¸å¦‚èµ–æ´»ç€</p> <p>ç»¼ä¸Šï¼Œè‡ªæˆ‘ä¿æŠ¤æ¨¡å¼æ˜¯ä¸€ç§åº”å¯¹ç½‘ç»œå¼‚å¸¸çš„å®‰å…¨ä¿æŠ¤æªæ–½ã€‚å®ƒçš„æ¶æ„å“²å­¦æ˜¯å®å¯åŒæ—¶ä¿ç•™æ‰€æœ‰å¾®æœåŠ¡ï¼ˆå¥åº·çš„å¾®æœåŠ¡å’Œä¸å¥åº·çš„å¾®æœåŠ¡éƒ½ä¼šä¿ç•™ï¼‰ä¹Ÿä¸ç›²ç›®æ³¨é”€ä»»ä½•å¥åº·çš„å¾®æœåŠ¡ã€‚ä½¿ç”¨è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ï¼Œå¯ä»¥è®©Eurekaé›†ç¾¤æ›´åŠ çš„å¥å£®ã€ç¨³å®šã€‚</p> <blockquote><p>ä¸€å¥è¯ï¼šæŸæ—¶åˆ»æŸä¸€ä¸ªå¾®æœåŠ¡ä¸å¯ç”¨äº†ï¼ŒEurekaä¸ä¼šç«‹åˆ»æ¸…ç†ï¼Œä¾æ—§ä¼šå¯¹è¯¥å¾®æœåŠ¡çš„ä¿¡æ¯è¿›è¡Œä¿å­˜</p> <p>å±äºCAPé‡Œé¢çš„APåˆ†æ”¯</p></blockquote> <h3 id="æ€ä¹ˆç¦æ­¢è‡ªæˆ‘ä¿æŠ¤"><a href="#æ€ä¹ˆç¦æ­¢è‡ªæˆ‘ä¿æŠ¤" class="header-anchor">#</a> æ€ä¹ˆç¦æ­¢è‡ªæˆ‘ä¿æŠ¤</h3> <h4 id="æ³¨å†Œä¸­å¿ƒeureakeserverç«¯7001"><a href="#æ³¨å†Œä¸­å¿ƒeureakeserverç«¯7001" class="header-anchor">#</a> æ³¨å†Œä¸­å¿ƒeureakeServerç«¯7001</h4> <p>å‡ºå‚é»˜è®¤ï¼Œè‡ªæˆ‘ä¿æŠ¤æœºåˆ¶æ˜¯å¼€å¯çš„ eureka.server.enable-self-preservation=true</p> <p>ä¿®æ”¹yml</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">7001</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> eureka<span class="token punctuation">-</span>cluster<span class="token punctuation">-</span>server
<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">instance</span><span class="token punctuation">:</span>
    <span class="token key atrule">hostname</span><span class="token punctuation">:</span> eureka7001.com
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">register-with-eureka</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
    <span class="token key atrule">fetch-registry</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token comment">#defaultZone: http://eureka7002.com:7002/eureka,http://eureka7003.com:7003/eureka</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//eureka7001.com<span class="token punctuation">:</span>7001/eureka
  <span class="token key atrule">server</span><span class="token punctuation">:</span>
    <span class="token comment">#å…³é—­è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼Œä¿è¯ä¸å¯ç”¨æœåŠ¡è¢«åŠæ—¶è¸¢é™¤</span>
    <span class="token key atrule">enable-self-preservation</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
    <span class="token key atrule">eviction-interval-timer-in-ms</span><span class="token punctuation">:</span> <span class="token number">2000</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>å…³é—­ä¹‹åæ•ˆæœ</p> <p><img src="http://img.aismy.top/img/image-20220619165008503.png" alt="image-20220619165008503"></p> <h4 id="ç”Ÿäº§è€…å®¢æˆ·ç«¯eureakeclientç«¯8001"><a href="#ç”Ÿäº§è€…å®¢æˆ·ç«¯eureakeclientç«¯8001" class="header-anchor">#</a> ç”Ÿäº§è€…å®¢æˆ·ç«¯eureakeClientç«¯8001</h4> <p>é»˜è®¤ï¼šeureka.instance.lease-renewal-interval-in-seconds=30     eureka.instance.lease-expiration-duration-in-seconds=90</p> <p>å•ä½ä¸ºç§’(é»˜è®¤æ˜¯90ç§’)</p> <p>ä¿®æ”¹yml</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8001</span>
<span class="token comment">###æœåŠ¡åç§°(æœåŠ¡æ³¨å†Œåˆ°eurekaåç§°)</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
    <span class="token key atrule">application</span><span class="token punctuation">:</span>
        <span class="token key atrule">name</span><span class="token punctuation">:</span> cloud<span class="token punctuation">-</span>provider<span class="token punctuation">-</span>payment
<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span> <span class="token comment">#æœåŠ¡æä¾›è€…provideræ³¨å†Œè¿›eurekaæœåŠ¡åˆ—è¡¨å†…</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token key atrule">register-with-eureka</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">fetch-registry</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//eureka7001.com<span class="token punctuation">:</span>7001/eureka
<span class="token comment">#å¿ƒè·³æ£€æµ‹ä¸ç»­çº¦æ—¶é—´</span>
<span class="token comment">#å¼€å‘æ—¶è®¾ç½®å°äº›ï¼Œä¿è¯æœåŠ¡å…³é—­åæ³¨å†Œä¸­å¿ƒèƒ½å³ä½¿å‰”é™¤æœåŠ¡</span>
  <span class="token key atrule">instance</span><span class="token punctuation">:</span>
  <span class="token comment">#Eurekaå®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€å¿ƒè·³çš„æ—¶é—´é—´éš”ï¼Œå•ä½ä¸ºç§’(é»˜è®¤æ˜¯30ç§’)</span>
    <span class="token key atrule">lease-renewal-interval-in-seconds</span><span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token comment">#EurekaæœåŠ¡ç«¯åœ¨æ”¶åˆ°æœ€åä¸€æ¬¡å¿ƒè·³åç­‰å¾…æ—¶é—´ä¸Šé™ï¼Œå•ä½ä¸ºç§’(é»˜è®¤æ˜¯90ç§’)ï¼Œè¶…æ—¶å°†å‰”é™¤æœåŠ¡</span>
    <span class="token key atrule">lease-expiration-duration-in-seconds</span><span class="token punctuation">:</span> <span class="token number">2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>æµ‹è¯•</p> <p><img src="http://img.aismy.top/img/image-20220619165223538.png" alt="image-20220619165223538"></p> <p>å…³é—­8001ï¼šåœ¨eurekaä¸­é©¬ä¸Šå°±è¢«åˆ é™¤äº†</p> <p><img src="http://img.aismy.top/img/image-20220619165242290.png" alt="image-20220619165242290"></p> <h2 id="æ³¨å†Œä¸­å¿ƒå¼‚åŒç‚¹"><a href="#æ³¨å†Œä¸­å¿ƒå¼‚åŒç‚¹" class="header-anchor">#</a> æ³¨å†Œä¸­å¿ƒå¼‚åŒç‚¹</h2> <p><img src="http://img.aismy.top/img/image-20220619202147269.png" alt="image-20220619202147269"></p> <h2 id="capç†è®º"><a href="#capç†è®º" class="header-anchor">#</a> CAPç†è®º</h2> <p>CAPç†è®ºå…³æ³¨ç²’åº¦æ˜¯æ•°æ®ï¼Œè€Œä¸æ˜¯æ•´ä½“ç³»ç»Ÿè®¾è®¡çš„ç­–ç•¥</p> <ul><li>C:Consistencyï¼ˆå¼ºä¸€è‡´æ€§ï¼‰</li> <li>A:Availabilityï¼ˆå¯ç”¨æ€§ï¼‰</li> <li>P:Partition toleranceï¼ˆåˆ†åŒºå®¹é”™æ€§ï¼‰</li></ul> <img src="http://img.aismy.top/img/image-20220619202306646.png" alt="image-20220619202306646" style="zoom:80%;"> <p><strong>APæ¶æ„ï¼ˆEurekaï¼‰</strong>
å½“ç½‘ç»œåˆ†åŒºå‡ºç°åï¼Œä¸ºäº†ä¿è¯<code>å¯ç”¨æ€§</code>ï¼Œç³»ç»ŸBå¯ä»¥è¿”å›æ—§å€¼ï¼Œä¿è¯ç³»ç»Ÿçš„å¯ç”¨æ€§ã€‚
ç»“è®ºï¼šè¿èƒŒäº†ä¸€è‡´æ€§Cçš„è¦æ±‚ï¼Œåªæ»¡è¶³å¯ç”¨æ€§å’Œåˆ†åŒºå®¹é”™ï¼Œå³AP</p> <p><img src="http://img.aismy.top/img/image-20220619202451325.png" alt="image-20220619202451325"></p> <p><strong>CPæ¶æ„(Zookeeper/Consul)</strong>
å½“ç½‘ç»œåˆ†åŒºå‡ºç°åï¼Œä¸ºäº†ä¿è¯<code>ä¸€è‡´æ€§</code>ï¼Œå°±å¿…é¡»æ‹’æ¥è¯·æ±‚ï¼Œå¦åˆ™æ— æ³•ä¿è¯ä¸€è‡´æ€§
ç»“è®ºï¼šè¿èƒŒäº†å¯ç”¨æ€§Açš„è¦æ±‚ï¼Œåªæ»¡è¶³ä¸€è‡´æ€§å’Œåˆ†åŒºå®¹é”™ï¼Œå³CP</p> <p><img src="http://img.aismy.top/img/image-20220619202559420.png" alt="image-20220619202559420"></p> <p>Eurekaåœæ›´è¯´æ˜</p> <p><img src="http://img.aismy.top/img/image-20220619165442522.png" alt="image-20220619165442522"></p> <h1 id="ribbon"><a href="#ribbon" class="header-anchor">#</a> Ribbon</h1> <ul><li>https://blog.csdn.net/yeyinglingfeng/article/details/83860613?ops_request_misc=&amp;request_id=&amp;biz_id=102&amp;utm_term=ribbon%E5%92%8Cresttemplate%E5%92%8Cfegin&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-1-83860613.142^v17^control,157^v15^new_3&amp;spm=1018.2226.3001.4187</li> <li>https://blog.csdn.net/zqn666/article/details/106856712?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522165565074916781483711143%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=165565074916781483711143&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-1-106856712-null-null.142^v17^control,157^v15^new_3&amp;utm_term=ribbon%E5%92%8Cresttemplate%E5%92%8Cfegin&amp;spm=1018.2226.3001.4187</li> <li>https://blog.csdn.net/lettuce_/article/details/106378110?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522165565074916781483711143%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=165565074916781483711143&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-2-106378110-null-null.142^v17^control,157^v15^new_3&amp;utm_term=ribbon%E5%92%8Cresttemplate%E5%92%8Cfegin&amp;spm=1018.2226.3001.4187</li></ul> <h2 id="æœåŠ¡è°ƒç”¨å‡ ç§æ–¹å¼"><a href="#æœåŠ¡è°ƒç”¨å‡ ç§æ–¹å¼" class="header-anchor">#</a> æœåŠ¡è°ƒç”¨å‡ ç§æ–¹å¼</h2> <p>Httpclient
Okhttp
HttpURLConnection
RestTemplate</p> <h2 id="äºŒã€ribbon-resttemplate"><a href="#äºŒã€ribbon-resttemplate" class="header-anchor">#</a> äºŒã€<a href="https://so.csdn.net/so/search?q=Ribbon&amp;spm=1001.2101.3001.7020" target="_blank" rel="noopener noreferrer">Ribbon<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>+RestTemplate</h2> <h2 id="loadbalancerå’Œribbon"><a href="#loadbalancerå’Œribbon" class="header-anchor">#</a> loadbalancerå’ŒRibbon</h2> <p>https://blog.csdn.net/qq_31856061/article/details/122026939?ops_request_misc=&amp;request_id=&amp;biz_id=102&amp;utm_term=ribbon%E5%92%8Cloadbalancer%E7%9A%84%E5%8C%BA%E5%88%AB&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-5-122026939.142^v17^control,157^v15^new_3&amp;spm=1018.2226.3001.4187</p> <p>https://blog.csdn.net/qq_38050728/article/details/121924621?spm=1001.2101.3001.6661.1&amp;utm_medium=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-1-121924621-blog-122026939.pc_relevant_downloadblacklistv1&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-1-121924621-blog-122026939.pc_relevant_downloadblacklistv1&amp;utm_relevant_index=1</p></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/Aismy/aismy.github.io/edit/master/docs/03.å¼€å‘æ¡†æ¶/03.SpringCloud/01.SpringCloud.md" target="_blank" rel="noopener noreferrer">åœ¨çº¿ç¼–è¾‘æ­¤æ–‡ç« </a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <!----></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/6b7be5/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">SpringBootè®²ä¹‰</div></a> <a href="/pages/8c1c55/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">SpringCloudAlibaba</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="/pages/6b7be5/" class="prev">SpringBootè®²ä¹‰</a></span> <span class="next"><a href="/pages/8c1c55/">SpringCloudAlibaba</a>â†’
      </span></p></div></div></div> <!----></main></div> <div class="footer"><div class="icons"><a href="mailto:752704491@qq.com" title="å‘é‚®ä»¶" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/Aismy" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="æœ¬ç«™ä¸»é¢˜">Vdoing</a> 
    | Copyright Â© 2022-2023
    <span>Aismy | MIT License</span></div> <div class="buttons"><div title="è¿”å›é¡¶éƒ¨" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="å»è¯„è®º" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="ä¸»é¢˜æ¨¡å¼" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          è·Ÿéšç³»ç»Ÿ
        </li><li class="iconfont icon-rijianmoshi">
          æµ…è‰²æ¨¡å¼
        </li><li class="iconfont icon-yejianmoshi">
          æ·±è‰²æ¨¡å¼
        </li><li class="iconfont icon-yuedu">
          é˜…è¯»æ¨¡å¼
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.b738e2cf.js" defer></script><script src="/assets/js/2.ffb45a81.js" defer></script><script src="/assets/js/29.aa305b1a.js" defer></script>
  </body>
</html>
